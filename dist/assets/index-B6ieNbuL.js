(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hh={exports:{}},ha={},gh={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),gv=Symbol.for("react.portal"),mv=Symbol.for("react.fragment"),yv=Symbol.for("react.strict_mode"),vv=Symbol.for("react.profiler"),xv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),Sv=Symbol.for("react.forward_ref"),kv=Symbol.for("react.suspense"),bv=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),of=Symbol.iterator;function jv(e){return e===null||typeof e!="object"?null:(e=of&&e[of]||e["@@iterator"],typeof e=="function"?e:null)}var mh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yh=Object.assign,vh={};function gs(e,t,n){this.props=e,this.context=t,this.refs=vh,this.updater=n||mh}gs.prototype.isReactComponent={};gs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xh(){}xh.prototype=gs.prototype;function Fu(e,t,n){this.props=e,this.context=t,this.refs=vh,this.updater=n||mh}var Bu=Fu.prototype=new xh;Bu.constructor=Fu;yh(Bu,gs.prototype);Bu.isPureReactComponent=!0;var lf=Array.isArray,wh=Object.prototype.hasOwnProperty,Hu={current:null},Sh={key:!0,ref:!0,__self:!0,__source:!0};function kh(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)wh.call(t,r)&&!Sh.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_o,type:e,key:s,ref:o,props:i,_owner:Hu.current}}function Ev(e,t){return{$$typeof:_o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wu(e){return typeof e=="object"&&e!==null&&e.$$typeof===_o}function Nv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var af=/\/+/g;function Oa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nv(""+e.key):t.toString(36)}function ml(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _o:case gv:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Oa(o,0):r,lf(i)?(n="",e!=null&&(n=e.replace(af,"$&/")+"/"),ml(i,t,n,"",function(u){return u})):i!=null&&(Wu(i)&&(i=Ev(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(af,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",lf(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+Oa(s,a);o+=ml(s,t,n,c,i)}else if(c=jv(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+Oa(s,a++),o+=ml(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Lo(e,t,n){if(e==null)return e;var r=[],i=0;return ml(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Av(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qt={current:null},yl={transition:null},_v={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:yl,ReactCurrentOwner:Hu};function bh(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:Lo,forEach:function(e,t,n){Lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Lo(e,function(){t++}),t},toArray:function(e){return Lo(e,function(t){return t})||[]},only:function(e){if(!Wu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};tt.Component=gs;tt.Fragment=mv;tt.Profiler=vv;tt.PureComponent=Fu;tt.StrictMode=yv;tt.Suspense=kv;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_v;tt.act=bh;tt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=yh({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Hu.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)wh.call(t,c)&&!Sh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:_o,type:e.type,key:i,ref:s,props:r,_owner:o}};tt.createContext=function(e){return e={$$typeof:wv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xv,_context:e},e.Consumer=e};tt.createElement=kh;tt.createFactory=function(e){var t=kh.bind(null,e);return t.type=e,t};tt.createRef=function(){return{current:null}};tt.forwardRef=function(e){return{$$typeof:Sv,render:e}};tt.isValidElement=Wu;tt.lazy=function(e){return{$$typeof:Cv,_payload:{_status:-1,_result:e},_init:Av}};tt.memo=function(e,t){return{$$typeof:bv,type:e,compare:t===void 0?null:t}};tt.startTransition=function(e){var t=yl.transition;yl.transition={};try{e()}finally{yl.transition=t}};tt.unstable_act=bh;tt.useCallback=function(e,t){return qt.current.useCallback(e,t)};tt.useContext=function(e){return qt.current.useContext(e)};tt.useDebugValue=function(){};tt.useDeferredValue=function(e){return qt.current.useDeferredValue(e)};tt.useEffect=function(e,t){return qt.current.useEffect(e,t)};tt.useId=function(){return qt.current.useId()};tt.useImperativeHandle=function(e,t,n){return qt.current.useImperativeHandle(e,t,n)};tt.useInsertionEffect=function(e,t){return qt.current.useInsertionEffect(e,t)};tt.useLayoutEffect=function(e,t){return qt.current.useLayoutEffect(e,t)};tt.useMemo=function(e,t){return qt.current.useMemo(e,t)};tt.useReducer=function(e,t,n){return qt.current.useReducer(e,t,n)};tt.useRef=function(e){return qt.current.useRef(e)};tt.useState=function(e){return qt.current.useState(e)};tt.useSyncExternalStore=function(e,t,n){return qt.current.useSyncExternalStore(e,t,n)};tt.useTransition=function(){return qt.current.useTransition()};tt.version="18.3.1";gh.exports=tt;var b=gh.exports;const U=ph(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=b,Mv=Symbol.for("react.element"),zv=Symbol.for("react.fragment"),Rv=Object.prototype.hasOwnProperty,Iv=Dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tv={key:!0,ref:!0,__self:!0,__source:!0};function Ch(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Rv.call(t,r)&&!Tv.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Mv,type:e,key:s,ref:o,props:i,_owner:Iv.current}}ha.Fragment=zv;ha.jsx=Ch;ha.jsxs=Ch;hh.exports=ha;var l=hh.exports,jh={exports:{}},wn={},Eh={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,j){var D=A.length;A.push(j);e:for(;0<D;){var H=D-1>>>1,X=A[H];if(0<i(X,j))A[H]=j,A[D]=X,D=H;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var j=A[0],D=A.pop();if(D!==j){A[0]=D;e:for(var H=0,X=A.length,oe=X>>>1;H<oe;){var Z=2*(H+1)-1,we=A[Z],ke=Z+1,$=A[ke];if(0>i(we,D))ke<X&&0>i($,we)?(A[H]=$,A[ke]=D,H=ke):(A[H]=we,A[Z]=D,H=Z);else if(ke<X&&0>i($,D))A[H]=$,A[ke]=D,H=ke;else break e}}return j}function i(A,j){var D=A.sortIndex-j.sortIndex;return D!==0?D:A.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,p=3,h=!1,k=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=A)r(u),j.sortIndex=j.expirationTime,t(c,j);else break;j=n(u)}}function v(A){if(S=!1,w(A),!k)if(n(c)!==null)k=!0,_(z);else{var j=n(u);j!==null&&B(v,j.startTime-A)}}function z(A,j){k=!1,S&&(S=!1,g(x),x=-1),h=!0;var D=p;try{for(w(j),f=n(c);f!==null&&(!(f.expirationTime>j)||A&&!L());){var H=f.callback;if(typeof H=="function"){f.callback=null,p=f.priorityLevel;var X=H(f.expirationTime<=j);j=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),w(j)}else r(c);f=n(c)}if(f!==null)var oe=!0;else{var Z=n(u);Z!==null&&B(v,Z.startTime-j),oe=!1}return oe}finally{f=null,p=D,h=!1}}var T=!1,P=null,x=-1,E=5,I=-1;function L(){return!(e.unstable_now()-I<E)}function Y(){if(P!==null){var A=e.unstable_now();I=A;var j=!0;try{j=P(!0,A)}finally{j?O():(T=!1,P=null)}}else T=!1}var O;if(typeof m=="function")O=function(){m(Y)};else if(typeof MessageChannel<"u"){var y=new MessageChannel,C=y.port2;y.port1.onmessage=Y,O=function(){C.postMessage(null)}}else O=function(){M(Y,0)};function _(A){P=A,T||(T=!0,O())}function B(A,j){x=M(function(){A(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){k||h||(k=!0,_(z))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var D=p;p=j;try{return A()}finally{p=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,j){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var D=p;p=A;try{return j()}finally{p=D}},e.unstable_scheduleCallback=function(A,j,D){var H=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?H+D:H):D=H,A){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=D+X,A={id:d++,callback:j,priorityLevel:A,startTime:D,expirationTime:X,sortIndex:-1},D>H?(A.sortIndex=D,t(u,A),n(c)===null&&A===n(u)&&(S?(g(x),x=-1):S=!0,B(v,D-H))):(A.sortIndex=X,t(c,A),k||h||(k=!0,_(z))),A},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(A){var j=p;return function(){var D=p;p=j;try{return A.apply(this,arguments)}finally{p=D}}}})(Nh);Eh.exports=Nh;var Pv=Eh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v=b,vn=Pv;function pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ah=new Set,no={};function bi(e,t){is(e,t),is(e+"Capture",t)}function is(e,t){for(no[e]=t,e=0;e<t.length;e++)Ah.add(t[e])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_c=Object.prototype.hasOwnProperty,Lv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cf={},uf={};function Ov(e){return _c.call(uf,e)?!0:_c.call(cf,e)?!1:Lv.test(e)?uf[e]=!0:(cf[e]=!0,!1)}function Fv(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bv(e,t,n,r){if(t===null||typeof t>"u"||Fv(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function en(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bt[e]=new en(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bt[t]=new en(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bt[e]=new en(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bt[e]=new en(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bt[e]=new en(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bt[e]=new en(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bt[e]=new en(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bt[e]=new en(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bt[e]=new en(e,5,!1,e.toLowerCase(),null,!1,!1)});var Uu=/[\-:]([a-z])/g;function Vu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Uu,Vu);Bt[t]=new en(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Uu,Vu);Bt[t]=new en(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Uu,Vu);Bt[t]=new en(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bt[e]=new en(e,1,!1,e.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bt[e]=new en(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yu(e,t,n,r){var i=Bt.hasOwnProperty(t)?Bt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bv(t,n,i,r)&&(n=null),r||i===null?Ov(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vr=$v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oo=Symbol.for("react.element"),Ii=Symbol.for("react.portal"),Ti=Symbol.for("react.fragment"),Gu=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),_h=Symbol.for("react.provider"),Dh=Symbol.for("react.context"),Xu=Symbol.for("react.forward_ref"),Mc=Symbol.for("react.suspense"),zc=Symbol.for("react.suspense_list"),Ku=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),Mh=Symbol.for("react.offscreen"),df=Symbol.iterator;function ks(e){return e===null||typeof e!="object"?null:(e=df&&e[df]||e["@@iterator"],typeof e=="function"?e:null)}var kt=Object.assign,Fa;function $s(e){if(Fa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fa=t&&t[1]||""}return`
`+Fa+e}var Ba=!1;function Ha(e,t){if(!e||Ba)return"";Ba=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ba=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$s(e):""}function Hv(e){switch(e.tag){case 5:return $s(e.type);case 16:return $s("Lazy");case 13:return $s("Suspense");case 19:return $s("SuspenseList");case 0:case 2:case 15:return e=Ha(e.type,!1),e;case 11:return e=Ha(e.type.render,!1),e;case 1:return e=Ha(e.type,!0),e;default:return""}}function Rc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ti:return"Fragment";case Ii:return"Portal";case Dc:return"Profiler";case Gu:return"StrictMode";case Mc:return"Suspense";case zc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dh:return(e.displayName||"Context")+".Consumer";case _h:return(e._context.displayName||"Context")+".Provider";case Xu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ku:return t=e.displayName||null,t!==null?t:Rc(e.type)||"Memo";case Nr:t=e._payload,e=e._init;try{return Rc(e(t))}catch{}}return null}function Wv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rc(t);case 8:return t===Gu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uv(e){var t=zh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fo(e){e._valueTracker||(e._valueTracker=Uv(e))}function Rh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ic(e,t){var n=t.checked;return kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ff(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ih(e,t){t=t.checked,t!=null&&Yu(e,"checked",t,!1)}function Tc(e,t){Ih(e,t);var n=Gr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pc(e,t.type,Gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Pc(e,t,n){(t!=="number"||zl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ls=Array.isArray;function Xi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $c(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pe(91));return kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(pe(92));if(Ls(n)){if(1<n.length)throw Error(pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gr(n)}}function Th(e,t){var n=Gr(t.value),r=Gr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ph(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ph(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bo,$h=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bo=Bo||document.createElement("div"),Bo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ro(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vv=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(e){Vv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ys[t]=Ys[e]})});function Lh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ys.hasOwnProperty(e)&&Ys[e]?(""+t).trim():t+"px"}function Oh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Lh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Yv=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oc(e,t){if(t){if(Yv[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pe(62))}}function Fc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bc=null;function Ju(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hc=null,Ki=null,Ji=null;function mf(e){if(e=zo(e)){if(typeof Hc!="function")throw Error(pe(280));var t=e.stateNode;t&&(t=xa(t),Hc(e.stateNode,e.type,t))}}function Fh(e){Ki?Ji?Ji.push(e):Ji=[e]:Ki=e}function Bh(){if(Ki){var e=Ki,t=Ji;if(Ji=Ki=null,mf(e),t)for(e=0;e<t.length;e++)mf(t[e])}}function Hh(e,t){return e(t)}function Wh(){}var Wa=!1;function Uh(e,t,n){if(Wa)return e(t,n);Wa=!0;try{return Hh(e,t,n)}finally{Wa=!1,(Ki!==null||Ji!==null)&&(Wh(),Bh())}}function io(e,t){var n=e.stateNode;if(n===null)return null;var r=xa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(pe(231,t,typeof n));return n}var Wc=!1;if(fr)try{var bs={};Object.defineProperty(bs,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",bs,bs),window.removeEventListener("test",bs,bs)}catch{Wc=!1}function Gv(e,t,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Gs=!1,Rl=null,Il=!1,Uc=null,Xv={onError:function(e){Gs=!0,Rl=e}};function Kv(e,t,n,r,i,s,o,a,c){Gs=!1,Rl=null,Gv.apply(Xv,arguments)}function Jv(e,t,n,r,i,s,o,a,c){if(Kv.apply(this,arguments),Gs){if(Gs){var u=Rl;Gs=!1,Rl=null}else throw Error(pe(198));Il||(Il=!0,Uc=u)}}function Ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Vh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yf(e){if(Ci(e)!==e)throw Error(pe(188))}function Qv(e){var t=e.alternate;if(!t){if(t=Ci(e),t===null)throw Error(pe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return yf(i),e;if(s===r)return yf(i),t;s=s.sibling}throw Error(pe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(pe(189))}}if(n.alternate!==r)throw Error(pe(190))}if(n.tag!==3)throw Error(pe(188));return n.stateNode.current===n?e:t}function Yh(e){return e=Qv(e),e!==null?Gh(e):null}function Gh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gh(e);if(t!==null)return t;e=e.sibling}return null}var Xh=vn.unstable_scheduleCallback,vf=vn.unstable_cancelCallback,Zv=vn.unstable_shouldYield,qv=vn.unstable_requestPaint,Nt=vn.unstable_now,e0=vn.unstable_getCurrentPriorityLevel,Qu=vn.unstable_ImmediatePriority,Kh=vn.unstable_UserBlockingPriority,Tl=vn.unstable_NormalPriority,t0=vn.unstable_LowPriority,Jh=vn.unstable_IdlePriority,ga=null,qn=null;function n0(e){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(ga,e,void 0,(e.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:s0,r0=Math.log,i0=Math.LN2;function s0(e){return e>>>=0,e===0?32:31-(r0(e)/i0|0)|0}var Ho=64,Wo=4194304;function Os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Os(a):(s&=o,s!==0&&(r=Os(s)))}else o=n&~i,o!==0?r=Os(o):s!==0&&(r=Os(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Fn(t),i=1<<n,r|=e[n],t&=~i;return r}function o0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function l0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Fn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=o0(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function Vc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qh(){var e=Ho;return Ho<<=1,!(Ho&4194240)&&(Ho=64),e}function Ua(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Do(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fn(t),e[t]=n}function a0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Fn(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Zu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Fn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var at=0;function Zh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qh,qu,eg,tg,ng,Yc=!1,Uo=[],Lr=null,Or=null,Fr=null,so=new Map,oo=new Map,Rr=[],c0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xf(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Or=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":so.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oo.delete(t.pointerId)}}function Cs(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=zo(t),t!==null&&qu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function u0(e,t,n,r,i){switch(t){case"focusin":return Lr=Cs(Lr,e,t,n,r,i),!0;case"dragenter":return Or=Cs(Or,e,t,n,r,i),!0;case"mouseover":return Fr=Cs(Fr,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return so.set(s,Cs(so.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,oo.set(s,Cs(oo.get(s)||null,e,t,n,r,i)),!0}return!1}function rg(e){var t=li(e.target);if(t!==null){var n=Ci(t);if(n!==null){if(t=n.tag,t===13){if(t=Vh(n),t!==null){e.blockedOn=t,ng(e.priority,function(){eg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Bc=r,n.target.dispatchEvent(r),Bc=null}else return t=zo(n),t!==null&&qu(t),e.blockedOn=n,!1;t.shift()}return!0}function wf(e,t,n){vl(e)&&n.delete(t)}function d0(){Yc=!1,Lr!==null&&vl(Lr)&&(Lr=null),Or!==null&&vl(Or)&&(Or=null),Fr!==null&&vl(Fr)&&(Fr=null),so.forEach(wf),oo.forEach(wf)}function js(e,t){e.blockedOn===t&&(e.blockedOn=null,Yc||(Yc=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,d0)))}function lo(e){function t(i){return js(i,e)}if(0<Uo.length){js(Uo[0],e);for(var n=1;n<Uo.length;n++){var r=Uo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Lr!==null&&js(Lr,e),Or!==null&&js(Or,e),Fr!==null&&js(Fr,e),so.forEach(t),oo.forEach(t),n=0;n<Rr.length;n++)r=Rr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Rr.length&&(n=Rr[0],n.blockedOn===null);)rg(n),n.blockedOn===null&&Rr.shift()}var Qi=vr.ReactCurrentBatchConfig,$l=!0;function f0(e,t,n,r){var i=at,s=Qi.transition;Qi.transition=null;try{at=1,ed(e,t,n,r)}finally{at=i,Qi.transition=s}}function p0(e,t,n,r){var i=at,s=Qi.transition;Qi.transition=null;try{at=4,ed(e,t,n,r)}finally{at=i,Qi.transition=s}}function ed(e,t,n,r){if($l){var i=Gc(e,t,n,r);if(i===null)ec(e,t,r,Ll,n),xf(e,r);else if(u0(i,e,t,n,r))r.stopPropagation();else if(xf(e,r),t&4&&-1<c0.indexOf(e)){for(;i!==null;){var s=zo(i);if(s!==null&&qh(s),s=Gc(e,t,n,r),s===null&&ec(e,t,r,Ll,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ec(e,t,r,null,n)}}var Ll=null;function Gc(e,t,n,r){if(Ll=null,e=Ju(r),e=li(e),e!==null)if(t=Ci(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Vh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ll=e,null}function ig(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e0()){case Qu:return 1;case Kh:return 4;case Tl:case t0:return 16;case Jh:return 536870912;default:return 16}default:return 16}}var Pr=null,td=null,xl=null;function sg(){if(xl)return xl;var e,t=td,n=t.length,r,i="value"in Pr?Pr.value:Pr.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return xl=i.slice(e,1<r?1-r:void 0)}function wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vo(){return!0}function Sf(){return!1}function Sn(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vo:Sf,this.isPropagationStopped=Sf,this}return kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vo)},persist:function(){},isPersistent:Vo}),t}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nd=Sn(ms),Mo=kt({},ms,{view:0,detail:0}),h0=Sn(Mo),Va,Ya,Es,ma=kt({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(Va=e.screenX-Es.screenX,Ya=e.screenY-Es.screenY):Ya=Va=0,Es=e),Va)},movementY:function(e){return"movementY"in e?e.movementY:Ya}}),kf=Sn(ma),g0=kt({},ma,{dataTransfer:0}),m0=Sn(g0),y0=kt({},Mo,{relatedTarget:0}),Ga=Sn(y0),v0=kt({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),x0=Sn(v0),w0=kt({},ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S0=Sn(w0),k0=kt({},ms,{data:0}),bf=Sn(k0),b0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=j0[e])?!!t[e]:!1}function rd(){return E0}var N0=kt({},Mo,{key:function(e){if(e.key){var t=b0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rd,charCode:function(e){return e.type==="keypress"?wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),A0=Sn(N0),_0=kt({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cf=Sn(_0),D0=kt({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rd}),M0=Sn(D0),z0=kt({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),R0=Sn(z0),I0=kt({},ma,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),T0=Sn(I0),P0=[9,13,27,32],id=fr&&"CompositionEvent"in window,Xs=null;fr&&"documentMode"in document&&(Xs=document.documentMode);var $0=fr&&"TextEvent"in window&&!Xs,og=fr&&(!id||Xs&&8<Xs&&11>=Xs),jf=" ",Ef=!1;function lg(e,t){switch(e){case"keyup":return P0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ag(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pi=!1;function L0(e,t){switch(e){case"compositionend":return ag(t);case"keypress":return t.which!==32?null:(Ef=!0,jf);case"textInput":return e=t.data,e===jf&&Ef?null:e;default:return null}}function O0(e,t){if(Pi)return e==="compositionend"||!id&&lg(e,t)?(e=sg(),xl=td=Pr=null,Pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return og&&t.locale!=="ko"?null:t.data;default:return null}}var F0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!F0[e.type]:t==="textarea"}function cg(e,t,n,r){Fh(r),t=Ol(t,"onChange"),0<t.length&&(n=new nd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ks=null,ao=null;function B0(e){wg(e,0)}function ya(e){var t=Oi(e);if(Rh(t))return e}function H0(e,t){if(e==="change")return t}var ug=!1;if(fr){var Xa;if(fr){var Ka="oninput"in document;if(!Ka){var Af=document.createElement("div");Af.setAttribute("oninput","return;"),Ka=typeof Af.oninput=="function"}Xa=Ka}else Xa=!1;ug=Xa&&(!document.documentMode||9<document.documentMode)}function _f(){Ks&&(Ks.detachEvent("onpropertychange",dg),ao=Ks=null)}function dg(e){if(e.propertyName==="value"&&ya(ao)){var t=[];cg(t,ao,e,Ju(e)),Uh(B0,t)}}function W0(e,t,n){e==="focusin"?(_f(),Ks=t,ao=n,Ks.attachEvent("onpropertychange",dg)):e==="focusout"&&_f()}function U0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ya(ao)}function V0(e,t){if(e==="click")return ya(t)}function Y0(e,t){if(e==="input"||e==="change")return ya(t)}function G0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wn=typeof Object.is=="function"?Object.is:G0;function co(e,t){if(Wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_c.call(t,i)||!Wn(e[i],t[i]))return!1}return!0}function Df(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mf(e,t){var n=Df(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Df(n)}}function fg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pg(){for(var e=window,t=zl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zl(e.document)}return t}function sd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function X0(e){var t=pg(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fg(n.ownerDocument.documentElement,n)){if(r!==null&&sd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Mf(n,s);var o=Mf(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K0=fr&&"documentMode"in document&&11>=document.documentMode,$i=null,Xc=null,Js=null,Kc=!1;function zf(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kc||$i==null||$i!==zl(r)||(r=$i,"selectionStart"in r&&sd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Js&&co(Js,r)||(Js=r,r=Ol(Xc,"onSelect"),0<r.length&&(t=new nd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$i)))}function Yo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Li={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},Ja={},hg={};fr&&(hg=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function va(e){if(Ja[e])return Ja[e];if(!Li[e])return e;var t=Li[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hg)return Ja[e]=t[n];return e}var gg=va("animationend"),mg=va("animationiteration"),yg=va("animationstart"),vg=va("transitionend"),xg=new Map,Rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(e,t){xg.set(e,t),bi(t,[e])}for(var Qa=0;Qa<Rf.length;Qa++){var Za=Rf[Qa],J0=Za.toLowerCase(),Q0=Za[0].toUpperCase()+Za.slice(1);Kr(J0,"on"+Q0)}Kr(gg,"onAnimationEnd");Kr(mg,"onAnimationIteration");Kr(yg,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(vg,"onTransitionEnd");is("onMouseEnter",["mouseout","mouseover"]);is("onMouseLeave",["mouseout","mouseover"]);is("onPointerEnter",["pointerout","pointerover"]);is("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fs));function If(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Jv(r,t,void 0,e),e.currentTarget=null}function wg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;If(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;If(i,a,u),s=c}}}if(Il)throw e=Uc,Il=!1,Uc=null,e}function gt(e,t){var n=t[eu];n===void 0&&(n=t[eu]=new Set);var r=e+"__bubble";n.has(r)||(Sg(t,e,2,!1),n.add(r))}function qa(e,t,n){var r=0;t&&(r|=4),Sg(n,e,r,t)}var Go="_reactListening"+Math.random().toString(36).slice(2);function uo(e){if(!e[Go]){e[Go]=!0,Ah.forEach(function(n){n!=="selectionchange"&&(Z0.has(n)||qa(n,!1,e),qa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Go]||(t[Go]=!0,qa("selectionchange",!1,t))}}function Sg(e,t,n,r){switch(ig(t)){case 1:var i=f0;break;case 4:i=p0;break;default:i=ed}n=i.bind(null,t,n,e),i=void 0,!Wc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ec(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=li(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Uh(function(){var u=s,d=Ju(n),f=[];e:{var p=xg.get(e);if(p!==void 0){var h=nd,k=e;switch(e){case"keypress":if(wl(n)===0)break e;case"keydown":case"keyup":h=A0;break;case"focusin":k="focus",h=Ga;break;case"focusout":k="blur",h=Ga;break;case"beforeblur":case"afterblur":h=Ga;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=m0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=M0;break;case gg:case mg:case yg:h=x0;break;case vg:h=R0;break;case"scroll":h=h0;break;case"wheel":h=T0;break;case"copy":case"cut":case"paste":h=S0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Cf}var S=(t&4)!==0,M=!S&&e==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var m=u,w;m!==null;){w=m;var v=w.stateNode;if(w.tag===5&&v!==null&&(w=v,g!==null&&(v=io(m,g),v!=null&&S.push(fo(m,v,w)))),M)break;m=m.return}0<S.length&&(p=new h(p,k,null,n,d),f.push({event:p,listeners:S}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==Bc&&(k=n.relatedTarget||n.fromElement)&&(li(k)||k[pr]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(k=n.relatedTarget||n.toElement,h=u,k=k?li(k):null,k!==null&&(M=Ci(k),k!==M||k.tag!==5&&k.tag!==6)&&(k=null)):(h=null,k=u),h!==k)){if(S=kf,v="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(S=Cf,v="onPointerLeave",g="onPointerEnter",m="pointer"),M=h==null?p:Oi(h),w=k==null?p:Oi(k),p=new S(v,m+"leave",h,n,d),p.target=M,p.relatedTarget=w,v=null,li(d)===u&&(S=new S(g,m+"enter",k,n,d),S.target=w,S.relatedTarget=M,v=S),M=v,h&&k)t:{for(S=h,g=k,m=0,w=S;w;w=ji(w))m++;for(w=0,v=g;v;v=ji(v))w++;for(;0<m-w;)S=ji(S),m--;for(;0<w-m;)g=ji(g),w--;for(;m--;){if(S===g||g!==null&&S===g.alternate)break t;S=ji(S),g=ji(g)}S=null}else S=null;h!==null&&Tf(f,p,h,S,!1),k!==null&&M!==null&&Tf(f,M,k,S,!0)}}e:{if(p=u?Oi(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var z=H0;else if(Nf(p))if(ug)z=Y0;else{z=U0;var T=W0}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=V0);if(z&&(z=z(e,u))){cg(f,z,n,d);break e}T&&T(e,p,u),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Pc(p,"number",p.value)}switch(T=u?Oi(u):window,e){case"focusin":(Nf(T)||T.contentEditable==="true")&&($i=T,Xc=u,Js=null);break;case"focusout":Js=Xc=$i=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,zf(f,n,d);break;case"selectionchange":if(K0)break;case"keydown":case"keyup":zf(f,n,d)}var P;if(id)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Pi?lg(e,n)&&(x="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(og&&n.locale!=="ko"&&(Pi||x!=="onCompositionStart"?x==="onCompositionEnd"&&Pi&&(P=sg()):(Pr=d,td="value"in Pr?Pr.value:Pr.textContent,Pi=!0)),T=Ol(u,x),0<T.length&&(x=new bf(x,e,null,n,d),f.push({event:x,listeners:T}),P?x.data=P:(P=ag(n),P!==null&&(x.data=P)))),(P=$0?L0(e,n):O0(e,n))&&(u=Ol(u,"onBeforeInput"),0<u.length&&(d=new bf("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=P))}wg(f,t)})}function fo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ol(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=io(e,n),s!=null&&r.unshift(fo(e,s,i)),s=io(e,t),s!=null&&r.push(fo(e,s,i))),e=e.return}return r}function ji(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Tf(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=io(n,s),c!=null&&o.unshift(fo(n,c,a))):i||(c=io(n,s),c!=null&&o.push(fo(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var q0=/\r\n?/g,ex=/\u0000|\uFFFD/g;function Pf(e){return(typeof e=="string"?e:""+e).replace(q0,`
`).replace(ex,"")}function Xo(e,t,n){if(t=Pf(t),Pf(e)!==t&&n)throw Error(pe(425))}function Fl(){}var Jc=null,Qc=null;function Zc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qc=typeof setTimeout=="function"?setTimeout:void 0,tx=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,nx=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(e){return $f.resolve(null).then(e).catch(rx)}:qc;function rx(e){setTimeout(function(){throw e})}function tc(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),lo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lo(t)}function Br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Jn="__reactFiber$"+ys,po="__reactProps$"+ys,pr="__reactContainer$"+ys,eu="__reactEvents$"+ys,ix="__reactListeners$"+ys,sx="__reactHandles$"+ys;function li(e){var t=e[Jn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[Jn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lf(e);e!==null;){if(n=e[Jn])return n;e=Lf(e)}return t}e=n,n=e.parentNode}return null}function zo(e){return e=e[Jn]||e[pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pe(33))}function xa(e){return e[po]||null}var tu=[],Fi=-1;function Jr(e){return{current:e}}function mt(e){0>Fi||(e.current=tu[Fi],tu[Fi]=null,Fi--)}function ft(e,t){Fi++,tu[Fi]=e.current,e.current=t}var Xr={},Xt=Jr(Xr),ln=Jr(!1),mi=Xr;function ss(e,t){var n=e.type.contextTypes;if(!n)return Xr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function an(e){return e=e.childContextTypes,e!=null}function Bl(){mt(ln),mt(Xt)}function Of(e,t,n){if(Xt.current!==Xr)throw Error(pe(168));ft(Xt,t),ft(ln,n)}function kg(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(pe(108,Wv(e)||"Unknown",i));return kt({},n,r)}function Hl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xr,mi=Xt.current,ft(Xt,e),ft(ln,ln.current),!0}function Ff(e,t,n){var r=e.stateNode;if(!r)throw Error(pe(169));n?(e=kg(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,mt(ln),mt(Xt),ft(Xt,e)):mt(ln),ft(ln,n)}var or=null,wa=!1,nc=!1;function bg(e){or===null?or=[e]:or.push(e)}function ox(e){wa=!0,bg(e)}function Qr(){if(!nc&&or!==null){nc=!0;var e=0,t=at;try{var n=or;for(at=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}or=null,wa=!1}catch(i){throw or!==null&&(or=or.slice(e+1)),Xh(Qu,Qr),i}finally{at=t,nc=!1}}return null}var Bi=[],Hi=0,Wl=null,Ul=0,kn=[],bn=0,yi=null,lr=1,ar="";function ti(e,t){Bi[Hi++]=Ul,Bi[Hi++]=Wl,Wl=e,Ul=t}function Cg(e,t,n){kn[bn++]=lr,kn[bn++]=ar,kn[bn++]=yi,yi=e;var r=lr;e=ar;var i=32-Fn(r)-1;r&=~(1<<i),n+=1;var s=32-Fn(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,lr=1<<32-Fn(t)+i|n<<i|r,ar=s+e}else lr=1<<s|n<<i|r,ar=e}function od(e){e.return!==null&&(ti(e,1),Cg(e,1,0))}function ld(e){for(;e===Wl;)Wl=Bi[--Hi],Bi[Hi]=null,Ul=Bi[--Hi],Bi[Hi]=null;for(;e===yi;)yi=kn[--bn],kn[bn]=null,ar=kn[--bn],kn[bn]=null,lr=kn[--bn],kn[bn]=null}var yn=null,mn=null,vt=!1,$n=null;function jg(e,t){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yn=e,mn=Br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yn=e,mn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=yi!==null?{id:lr,overflow:ar}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yn=e,mn=null,!0):!1;default:return!1}}function nu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ru(e){if(vt){var t=mn;if(t){var n=t;if(!Bf(e,t)){if(nu(e))throw Error(pe(418));t=Br(n.nextSibling);var r=yn;t&&Bf(e,t)?jg(r,n):(e.flags=e.flags&-4097|2,vt=!1,yn=e)}}else{if(nu(e))throw Error(pe(418));e.flags=e.flags&-4097|2,vt=!1,yn=e}}}function Hf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yn=e}function Ko(e){if(e!==yn)return!1;if(!vt)return Hf(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zc(e.type,e.memoizedProps)),t&&(t=mn)){if(nu(e))throw Eg(),Error(pe(418));for(;t;)jg(e,t),t=Br(t.nextSibling)}if(Hf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mn=Br(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mn=null}}else mn=yn?Br(e.stateNode.nextSibling):null;return!0}function Eg(){for(var e=mn;e;)e=Br(e.nextSibling)}function os(){mn=yn=null,vt=!1}function ad(e){$n===null?$n=[e]:$n.push(e)}var lx=vr.ReactCurrentBatchConfig;function Ns(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(pe(309));var r=n.stateNode}if(!r)throw Error(pe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(pe(284));if(!n._owner)throw Error(pe(290,e))}return e}function Jo(e,t){throw e=Object.prototype.toString.call(t),Error(pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wf(e){var t=e._init;return t(e._payload)}function Ng(e){function t(g,m){if(e){var w=g.deletions;w===null?(g.deletions=[m],g.flags|=16):w.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=Vr(g,m),g.index=0,g.sibling=null,g}function s(g,m,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<m?(g.flags|=2,m):w):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,m,w,v){return m===null||m.tag!==6?(m=cc(w,g.mode,v),m.return=g,m):(m=i(m,w),m.return=g,m)}function c(g,m,w,v){var z=w.type;return z===Ti?d(g,m,w.props.children,v,w.key):m!==null&&(m.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Nr&&Wf(z)===m.type)?(v=i(m,w.props),v.ref=Ns(g,m,w),v.return=g,v):(v=Nl(w.type,w.key,w.props,null,g.mode,v),v.ref=Ns(g,m,w),v.return=g,v)}function u(g,m,w,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=uc(w,g.mode,v),m.return=g,m):(m=i(m,w.children||[]),m.return=g,m)}function d(g,m,w,v,z){return m===null||m.tag!==7?(m=pi(w,g.mode,v,z),m.return=g,m):(m=i(m,w),m.return=g,m)}function f(g,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=cc(""+m,g.mode,w),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Oo:return w=Nl(m.type,m.key,m.props,null,g.mode,w),w.ref=Ns(g,null,m),w.return=g,w;case Ii:return m=uc(m,g.mode,w),m.return=g,m;case Nr:var v=m._init;return f(g,v(m._payload),w)}if(Ls(m)||ks(m))return m=pi(m,g.mode,w,null),m.return=g,m;Jo(g,m)}return null}function p(g,m,w,v){var z=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return z!==null?null:a(g,m,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oo:return w.key===z?c(g,m,w,v):null;case Ii:return w.key===z?u(g,m,w,v):null;case Nr:return z=w._init,p(g,m,z(w._payload),v)}if(Ls(w)||ks(w))return z!==null?null:d(g,m,w,v,null);Jo(g,w)}return null}function h(g,m,w,v,z){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(w)||null,a(m,g,""+v,z);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Oo:return g=g.get(v.key===null?w:v.key)||null,c(m,g,v,z);case Ii:return g=g.get(v.key===null?w:v.key)||null,u(m,g,v,z);case Nr:var T=v._init;return h(g,m,w,T(v._payload),z)}if(Ls(v)||ks(v))return g=g.get(w)||null,d(m,g,v,z,null);Jo(m,v)}return null}function k(g,m,w,v){for(var z=null,T=null,P=m,x=m=0,E=null;P!==null&&x<w.length;x++){P.index>x?(E=P,P=null):E=P.sibling;var I=p(g,P,w[x],v);if(I===null){P===null&&(P=E);break}e&&P&&I.alternate===null&&t(g,P),m=s(I,m,x),T===null?z=I:T.sibling=I,T=I,P=E}if(x===w.length)return n(g,P),vt&&ti(g,x),z;if(P===null){for(;x<w.length;x++)P=f(g,w[x],v),P!==null&&(m=s(P,m,x),T===null?z=P:T.sibling=P,T=P);return vt&&ti(g,x),z}for(P=r(g,P);x<w.length;x++)E=h(P,g,x,w[x],v),E!==null&&(e&&E.alternate!==null&&P.delete(E.key===null?x:E.key),m=s(E,m,x),T===null?z=E:T.sibling=E,T=E);return e&&P.forEach(function(L){return t(g,L)}),vt&&ti(g,x),z}function S(g,m,w,v){var z=ks(w);if(typeof z!="function")throw Error(pe(150));if(w=z.call(w),w==null)throw Error(pe(151));for(var T=z=null,P=m,x=m=0,E=null,I=w.next();P!==null&&!I.done;x++,I=w.next()){P.index>x?(E=P,P=null):E=P.sibling;var L=p(g,P,I.value,v);if(L===null){P===null&&(P=E);break}e&&P&&L.alternate===null&&t(g,P),m=s(L,m,x),T===null?z=L:T.sibling=L,T=L,P=E}if(I.done)return n(g,P),vt&&ti(g,x),z;if(P===null){for(;!I.done;x++,I=w.next())I=f(g,I.value,v),I!==null&&(m=s(I,m,x),T===null?z=I:T.sibling=I,T=I);return vt&&ti(g,x),z}for(P=r(g,P);!I.done;x++,I=w.next())I=h(P,g,x,I.value,v),I!==null&&(e&&I.alternate!==null&&P.delete(I.key===null?x:I.key),m=s(I,m,x),T===null?z=I:T.sibling=I,T=I);return e&&P.forEach(function(Y){return t(g,Y)}),vt&&ti(g,x),z}function M(g,m,w,v){if(typeof w=="object"&&w!==null&&w.type===Ti&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Oo:e:{for(var z=w.key,T=m;T!==null;){if(T.key===z){if(z=w.type,z===Ti){if(T.tag===7){n(g,T.sibling),m=i(T,w.props.children),m.return=g,g=m;break e}}else if(T.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Nr&&Wf(z)===T.type){n(g,T.sibling),m=i(T,w.props),m.ref=Ns(g,T,w),m.return=g,g=m;break e}n(g,T);break}else t(g,T);T=T.sibling}w.type===Ti?(m=pi(w.props.children,g.mode,v,w.key),m.return=g,g=m):(v=Nl(w.type,w.key,w.props,null,g.mode,v),v.ref=Ns(g,m,w),v.return=g,g=v)}return o(g);case Ii:e:{for(T=w.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){n(g,m.sibling),m=i(m,w.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=uc(w,g.mode,v),m.return=g,g=m}return o(g);case Nr:return T=w._init,M(g,m,T(w._payload),v)}if(Ls(w))return k(g,m,w,v);if(ks(w))return S(g,m,w,v);Jo(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(n(g,m.sibling),m=i(m,w),m.return=g,g=m):(n(g,m),m=cc(w,g.mode,v),m.return=g,g=m),o(g)):n(g,m)}return M}var ls=Ng(!0),Ag=Ng(!1),Vl=Jr(null),Yl=null,Wi=null,cd=null;function ud(){cd=Wi=Yl=null}function dd(e){var t=Vl.current;mt(Vl),e._currentValue=t}function iu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zi(e,t){Yl=e,cd=Wi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(sn=!0),e.firstContext=null)}function An(e){var t=e._currentValue;if(cd!==e)if(e={context:e,memoizedValue:t,next:null},Wi===null){if(Yl===null)throw Error(pe(308));Wi=e,Yl.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return t}var ai=null;function fd(e){ai===null?ai=[e]:ai.push(e)}function _g(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,fd(t)):(n.next=i.next,i.next=n),t.interleaved=n,hr(e,r)}function hr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ar=!1;function pd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ur(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,hr(e,n)}return i=r.interleaved,i===null?(t.next=t,fd(r)):(t.next=i.next,i.next=t),r.interleaved=t,hr(e,n)}function Sl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zu(e,n)}}function Uf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gl(e,t,n,r){var i=e.updateQueue;Ar=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,d=u=c=null,a=s;do{var p=a.lane,h=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,S=a;switch(p=t,h=n,S.tag){case 1:if(k=S.payload,typeof k=="function"){f=k.call(h,f,p);break e}f=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=S.payload,p=typeof k=="function"?k.call(h,f,p):k,p==null)break e;f=kt({},f,p);break e;case 2:Ar=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else h={eventTime:h,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);xi|=o,e.lanes=o,e.memoizedState=f}}function Vf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(pe(191,i));i.call(r)}}}var Ro={},er=Jr(Ro),ho=Jr(Ro),go=Jr(Ro);function ci(e){if(e===Ro)throw Error(pe(174));return e}function hd(e,t){switch(ft(go,t),ft(ho,e),ft(er,Ro),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lc(t,e)}mt(er),ft(er,t)}function as(){mt(er),mt(ho),mt(go)}function Mg(e){ci(go.current);var t=ci(er.current),n=Lc(t,e.type);t!==n&&(ft(ho,e),ft(er,n))}function gd(e){ho.current===e&&(mt(er),mt(ho))}var wt=Jr(0);function Xl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rc=[];function md(){for(var e=0;e<rc.length;e++)rc[e]._workInProgressVersionPrimary=null;rc.length=0}var kl=vr.ReactCurrentDispatcher,ic=vr.ReactCurrentBatchConfig,vi=0,St=null,Dt=null,Rt=null,Kl=!1,Qs=!1,mo=0,ax=0;function Vt(){throw Error(pe(321))}function yd(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wn(e[n],t[n]))return!1;return!0}function vd(e,t,n,r,i,s){if(vi=s,St=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kl.current=e===null||e.memoizedState===null?fx:px,e=n(r,i),Qs){s=0;do{if(Qs=!1,mo=0,25<=s)throw Error(pe(301));s+=1,Rt=Dt=null,t.updateQueue=null,kl.current=hx,e=n(r,i)}while(Qs)}if(kl.current=Jl,t=Dt!==null&&Dt.next!==null,vi=0,Rt=Dt=St=null,Kl=!1,t)throw Error(pe(300));return e}function xd(){var e=mo!==0;return mo=0,e}function Xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?St.memoizedState=Rt=e:Rt=Rt.next=e,Rt}function _n(){if(Dt===null){var e=St.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=Rt===null?St.memoizedState:Rt.next;if(t!==null)Rt=t,Dt=e;else{if(e===null)throw Error(pe(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Rt===null?St.memoizedState=Rt=e:Rt=Rt.next=e}return Rt}function yo(e,t){return typeof t=="function"?t(e):t}function sc(e){var t=_n(),n=t.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=e;var r=Dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var d=u.lane;if((vi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,St.lanes|=d,xi|=d}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,Wn(r,t.memoizedState)||(sn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,St.lanes|=s,xi|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function oc(e){var t=_n(),n=t.queue;if(n===null)throw Error(pe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Wn(s,t.memoizedState)||(sn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function zg(){}function Rg(e,t){var n=St,r=_n(),i=t(),s=!Wn(r.memoizedState,i);if(s&&(r.memoizedState=i,sn=!0),r=r.queue,wd(Pg.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Rt!==null&&Rt.memoizedState.tag&1){if(n.flags|=2048,vo(9,Tg.bind(null,n,r,i,t),void 0,null),It===null)throw Error(pe(349));vi&30||Ig(n,t,i)}return i}function Ig(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Tg(e,t,n,r){t.value=n,t.getSnapshot=r,$g(t)&&Lg(e)}function Pg(e,t,n){return n(function(){$g(t)&&Lg(e)})}function $g(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wn(e,n)}catch{return!0}}function Lg(e){var t=hr(e,1);t!==null&&Bn(t,e,1,-1)}function Yf(e){var t=Xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:e},t.queue=e,e=e.dispatch=dx.bind(null,St,e),[t.memoizedState,e]}function vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=St.updateQueue,t===null?(t={lastEffect:null,stores:null},St.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Og(){return _n().memoizedState}function bl(e,t,n,r){var i=Xn();St.flags|=e,i.memoizedState=vo(1|t,n,void 0,r===void 0?null:r)}function Sa(e,t,n,r){var i=_n();r=r===void 0?null:r;var s=void 0;if(Dt!==null){var o=Dt.memoizedState;if(s=o.destroy,r!==null&&yd(r,o.deps)){i.memoizedState=vo(t,n,s,r);return}}St.flags|=e,i.memoizedState=vo(1|t,n,s,r)}function Gf(e,t){return bl(8390656,8,e,t)}function wd(e,t){return Sa(2048,8,e,t)}function Fg(e,t){return Sa(4,2,e,t)}function Bg(e,t){return Sa(4,4,e,t)}function Hg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wg(e,t,n){return n=n!=null?n.concat([e]):null,Sa(4,4,Hg.bind(null,t,e),n)}function Sd(){}function Ug(e,t){var n=_n();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yd(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vg(e,t){var n=_n();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&yd(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Yg(e,t,n){return vi&21?(Wn(n,t)||(n=Qh(),St.lanes|=n,xi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,sn=!0),e.memoizedState=n)}function cx(e,t){var n=at;at=n!==0&&4>n?n:4,e(!0);var r=ic.transition;ic.transition={};try{e(!1),t()}finally{at=n,ic.transition=r}}function Gg(){return _n().memoizedState}function ux(e,t,n){var r=Ur(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xg(e))Kg(t,n);else if(n=_g(e,t,n,r),n!==null){var i=Zt();Bn(n,e,r,i),Jg(n,t,r)}}function dx(e,t,n){var r=Ur(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xg(e))Kg(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Wn(a,o)){var c=t.interleaved;c===null?(i.next=i,fd(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=_g(e,t,i,r),n!==null&&(i=Zt(),Bn(n,e,r,i),Jg(n,t,r))}}function Xg(e){var t=e.alternate;return e===St||t!==null&&t===St}function Kg(e,t){Qs=Kl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zu(e,n)}}var Jl={readContext:An,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},fx={readContext:An,useCallback:function(e,t){return Xn().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:Gf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bl(4194308,4,Hg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bl(4194308,4,e,t)},useInsertionEffect:function(e,t){return bl(4,2,e,t)},useMemo:function(e,t){var n=Xn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ux.bind(null,St,e),[r.memoizedState,e]},useRef:function(e){var t=Xn();return e={current:e},t.memoizedState=e},useState:Yf,useDebugValue:Sd,useDeferredValue:function(e){return Xn().memoizedState=e},useTransition:function(){var e=Yf(!1),t=e[0];return e=cx.bind(null,e[1]),Xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=St,i=Xn();if(vt){if(n===void 0)throw Error(pe(407));n=n()}else{if(n=t(),It===null)throw Error(pe(349));vi&30||Ig(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Gf(Pg.bind(null,r,s,e),[e]),r.flags|=2048,vo(9,Tg.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Xn(),t=It.identifierPrefix;if(vt){var n=ar,r=lr;n=(r&~(1<<32-Fn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=mo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ax++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},px={readContext:An,useCallback:Ug,useContext:An,useEffect:wd,useImperativeHandle:Wg,useInsertionEffect:Fg,useLayoutEffect:Bg,useMemo:Vg,useReducer:sc,useRef:Og,useState:function(){return sc(yo)},useDebugValue:Sd,useDeferredValue:function(e){var t=_n();return Yg(t,Dt.memoizedState,e)},useTransition:function(){var e=sc(yo)[0],t=_n().memoizedState;return[e,t]},useMutableSource:zg,useSyncExternalStore:Rg,useId:Gg,unstable_isNewReconciler:!1},hx={readContext:An,useCallback:Ug,useContext:An,useEffect:wd,useImperativeHandle:Wg,useInsertionEffect:Fg,useLayoutEffect:Bg,useMemo:Vg,useReducer:oc,useRef:Og,useState:function(){return oc(yo)},useDebugValue:Sd,useDeferredValue:function(e){var t=_n();return Dt===null?t.memoizedState=e:Yg(t,Dt.memoizedState,e)},useTransition:function(){var e=oc(yo)[0],t=_n().memoizedState;return[e,t]},useMutableSource:zg,useSyncExternalStore:Rg,useId:Gg,unstable_isNewReconciler:!1};function Rn(e,t){if(e&&e.defaultProps){t=kt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function su(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:kt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ka={isMounted:function(e){return(e=e._reactInternals)?Ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zt(),i=Ur(e),s=ur(r,i);s.payload=t,n!=null&&(s.callback=n),t=Hr(e,s,i),t!==null&&(Bn(t,e,i,r),Sl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zt(),i=Ur(e),s=ur(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Hr(e,s,i),t!==null&&(Bn(t,e,i,r),Sl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zt(),r=Ur(e),i=ur(n,r);i.tag=2,t!=null&&(i.callback=t),t=Hr(e,i,r),t!==null&&(Bn(t,e,r,n),Sl(t,e,r))}};function Xf(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!co(n,r)||!co(i,s):!0}function Qg(e,t,n){var r=!1,i=Xr,s=t.contextType;return typeof s=="object"&&s!==null?s=An(s):(i=an(t)?mi:Xt.current,r=t.contextTypes,s=(r=r!=null)?ss(e,i):Xr),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ka,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Kf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ka.enqueueReplaceState(t,t.state,null)}function ou(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},pd(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=An(s):(s=an(t)?mi:Xt.current,i.context=ss(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(su(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ka.enqueueReplaceState(i,i.state,null),Gl(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do n+=Hv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function lc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gx=typeof WeakMap=="function"?WeakMap:Map;function Zg(e,t,n){n=ur(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,yu=r),lu(e,t)},n}function qg(e,t,n){n=ur(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){lu(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lu(e,t),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Jf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gx;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_x.bind(null,e,t,n),t.then(e,e))}function Qf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zf(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ur(-1,1),t.tag=2,Hr(n,t,1))),n.lanes|=1),e)}var mx=vr.ReactCurrentOwner,sn=!1;function Qt(e,t,n,r){t.child=e===null?Ag(t,null,n,r):ls(t,e.child,n,r)}function qf(e,t,n,r,i){n=n.render;var s=t.ref;return Zi(t,i),r=vd(e,t,n,r,s,i),n=xd(),e!==null&&!sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,gr(e,t,i)):(vt&&n&&od(t),t.flags|=1,Qt(e,t,r,i),t.child)}function ep(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!_d(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,em(e,t,s,r,i)):(e=Nl(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:co,n(o,r)&&e.ref===t.ref)return gr(e,t,i)}return t.flags|=1,e=Vr(s,r),e.ref=t.ref,e.return=t,t.child=e}function em(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(co(s,r)&&e.ref===t.ref)if(sn=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(sn=!0);else return t.lanes=e.lanes,gr(e,t,i)}return au(e,t,n,r,i)}function tm(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Vi,gn),gn|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ft(Vi,gn),gn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ft(Vi,gn),gn|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ft(Vi,gn),gn|=r;return Qt(e,t,i,n),t.child}function nm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function au(e,t,n,r,i){var s=an(n)?mi:Xt.current;return s=ss(t,s),Zi(t,i),n=vd(e,t,n,r,s,i),r=xd(),e!==null&&!sn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,gr(e,t,i)):(vt&&r&&od(t),t.flags|=1,Qt(e,t,n,i),t.child)}function tp(e,t,n,r,i){if(an(n)){var s=!0;Hl(t)}else s=!1;if(Zi(t,i),t.stateNode===null)Cl(e,t),Qg(t,n,r),ou(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=An(u):(u=an(n)?mi:Xt.current,u=ss(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Kf(t,o,r,u),Ar=!1;var p=t.memoizedState;o.state=p,Gl(t,r,o,i),c=t.memoizedState,a!==r||p!==c||ln.current||Ar?(typeof d=="function"&&(su(t,n,d,r),c=t.memoizedState),(a=Ar||Xf(t,n,a,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Dg(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Rn(t.type,a),o.props=u,f=t.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=An(c):(c=an(n)?mi:Xt.current,c=ss(t,c));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&Kf(t,o,r,c),Ar=!1,p=t.memoizedState,o.state=p,Gl(t,r,o,i);var k=t.memoizedState;a!==f||p!==k||ln.current||Ar?(typeof h=="function"&&(su(t,n,h,r),k=t.memoizedState),(u=Ar||Xf(t,n,u,r,p,k,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),o.props=r,o.state=k,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return cu(e,t,n,r,s,i)}function cu(e,t,n,r,i,s){nm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Ff(t,n,!1),gr(e,t,s);r=t.stateNode,mx.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ls(t,e.child,null,s),t.child=ls(t,null,a,s)):Qt(e,t,a,s),t.memoizedState=r.state,i&&Ff(t,n,!0),t.child}function rm(e){var t=e.stateNode;t.pendingContext?Of(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Of(e,t.context,!1),hd(e,t.containerInfo)}function np(e,t,n,r,i){return os(),ad(i),t.flags|=256,Qt(e,t,n,r),t.child}var uu={dehydrated:null,treeContext:null,retryLane:0};function du(e){return{baseLanes:e,cachePool:null,transitions:null}}function im(e,t,n){var r=t.pendingProps,i=wt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ft(wt,i&1),e===null)return ru(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ja(o,r,0,null),e=pi(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=du(n),t.memoizedState=uu,e):kd(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return yx(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Vr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Vr(a,s):(s=pi(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?du(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=uu,r}return s=e.child,e=s.sibling,r=Vr(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function kd(e,t){return t=ja({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qo(e,t,n,r){return r!==null&&ad(r),ls(t,e.child,null,n),e=kd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yx(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=lc(Error(pe(422))),Qo(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=ja({mode:"visible",children:r.children},i,0,null),s=pi(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&ls(t,e.child,null,o),t.child.memoizedState=du(o),t.memoizedState=uu,s);if(!(t.mode&1))return Qo(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(pe(419)),r=lc(s,r,void 0),Qo(e,t,o,r)}if(a=(o&e.childLanes)!==0,sn||a){if(r=It,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hr(e,i),Bn(r,e,i,-1))}return Ad(),r=lc(Error(pe(421))),Qo(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Dx.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,mn=Br(i.nextSibling),yn=t,vt=!0,$n=null,e!==null&&(kn[bn++]=lr,kn[bn++]=ar,kn[bn++]=yi,lr=e.id,ar=e.overflow,yi=t),t=kd(t,r.children),t.flags|=4096,t)}function rp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),iu(e.return,t,n)}function ac(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function sm(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Qt(e,t,r.children,n),r=wt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rp(e,n,t);else if(e.tag===19)rp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ft(wt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Xl(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ac(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Xl(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ac(t,!0,n,null,s);break;case"together":ac(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pe(153));if(t.child!==null){for(e=t.child,n=Vr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vx(e,t,n){switch(t.tag){case 3:rm(t),os();break;case 5:Mg(t);break;case 1:an(t.type)&&Hl(t);break;case 4:hd(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ft(Vl,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ft(wt,wt.current&1),t.flags|=128,null):n&t.child.childLanes?im(e,t,n):(ft(wt,wt.current&1),e=gr(e,t,n),e!==null?e.sibling:null);ft(wt,wt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return sm(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ft(wt,wt.current),r)break;return null;case 22:case 23:return t.lanes=0,tm(e,t,n)}return gr(e,t,n)}var om,fu,lm,am;om=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fu=function(){};lm=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ci(er.current);var s=null;switch(n){case"input":i=Ic(e,i),r=Ic(e,r),s=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),s=[];break;case"textarea":i=$c(e,i),r=$c(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fl)}Oc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(no.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(no.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&gt("scroll",e),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};am=function(e,t,n,r){n!==r&&(t.flags|=4)};function As(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xx(e,t,n){var r=t.pendingProps;switch(ld(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(t),null;case 1:return an(t.type)&&Bl(),Yt(t),null;case 3:return r=t.stateNode,as(),mt(ln),mt(Xt),md(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ko(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$n!==null&&(wu($n),$n=null))),fu(e,t),Yt(t),null;case 5:gd(t);var i=ci(go.current);if(n=t.type,e!==null&&t.stateNode!=null)lm(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(pe(166));return Yt(t),null}if(e=ci(er.current),Ko(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jn]=t,r[po]=s,e=(t.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(i=0;i<Fs.length;i++)gt(Fs[i],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":ff(r,s),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gt("invalid",r);break;case"textarea":hf(r,s),gt("invalid",r)}Oc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xo(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xo(r.textContent,a,e),i=["children",""+a]):no.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":Fo(r),pf(r,s,!0);break;case"textarea":Fo(r),gf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Fl)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ph(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Jn]=t,e[po]=r,om(e,t,!1,!1),t.stateNode=e;e:{switch(o=Fc(n,r),n){case"dialog":gt("cancel",e),gt("close",e),i=r;break;case"iframe":case"object":case"embed":gt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Fs.length;i++)gt(Fs[i],e);i=r;break;case"source":gt("error",e),i=r;break;case"img":case"image":case"link":gt("error",e),gt("load",e),i=r;break;case"details":gt("toggle",e),i=r;break;case"input":ff(e,r),i=Ic(e,r),gt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),gt("invalid",e);break;case"textarea":hf(e,r),i=$c(e,r),gt("invalid",e);break;default:i=r}Oc(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?Oh(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$h(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ro(e,c):typeof c=="number"&&ro(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(no.hasOwnProperty(s)?c!=null&&s==="onScroll"&&gt("scroll",e):c!=null&&Yu(e,s,c,o))}switch(n){case"input":Fo(e),pf(e,r,!1);break;case"textarea":Fo(e),gf(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gr(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Xi(e,!!r.multiple,s,!1):r.defaultValue!=null&&Xi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Fl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yt(t),null;case 6:if(e&&t.stateNode!=null)am(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(pe(166));if(n=ci(go.current),ci(er.current),Ko(t)){if(r=t.stateNode,n=t.memoizedProps,r[Jn]=t,(s=r.nodeValue!==n)&&(e=yn,e!==null))switch(e.tag){case 3:Xo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xo(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=t,t.stateNode=r}return Yt(t),null;case 13:if(mt(wt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&mn!==null&&t.mode&1&&!(t.flags&128))Eg(),os(),t.flags|=98560,s=!1;else if(s=Ko(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(pe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(pe(317));s[Jn]=t}else os(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yt(t),s=!1}else $n!==null&&(wu($n),$n=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||wt.current&1?Mt===0&&(Mt=3):Ad())),t.updateQueue!==null&&(t.flags|=4),Yt(t),null);case 4:return as(),fu(e,t),e===null&&uo(t.stateNode.containerInfo),Yt(t),null;case 10:return dd(t.type._context),Yt(t),null;case 17:return an(t.type)&&Bl(),Yt(t),null;case 19:if(mt(wt),s=t.memoizedState,s===null)return Yt(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)As(s,!1);else{if(Mt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Xl(e),o!==null){for(t.flags|=128,As(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ft(wt,wt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Nt()>us&&(t.flags|=128,r=!0,As(s,!1),t.lanes=4194304)}else{if(!r)if(e=Xl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),As(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!vt)return Yt(t),null}else 2*Nt()-s.renderingStartTime>us&&n!==1073741824&&(t.flags|=128,r=!0,As(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Nt(),t.sibling=null,n=wt.current,ft(wt,r?n&1|2:n&1),t):(Yt(t),null);case 22:case 23:return Nd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gn&1073741824&&(Yt(t),t.subtreeFlags&6&&(t.flags|=8192)):Yt(t),null;case 24:return null;case 25:return null}throw Error(pe(156,t.tag))}function wx(e,t){switch(ld(t),t.tag){case 1:return an(t.type)&&Bl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return as(),mt(ln),mt(Xt),md(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gd(t),null;case 13:if(mt(wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pe(340));os()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mt(wt),null;case 4:return as(),null;case 10:return dd(t.type._context),null;case 22:case 23:return Nd(),null;case 24:return null;default:return null}}var Zo=!1,Gt=!1,Sx=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Ui(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(e,t,r)}else n.current=null}function pu(e,t,n){try{n()}catch(r){bt(e,t,r)}}var ip=!1;function kx(e,t){if(Jc=$l,e=pg(),sd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(c=o),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qc={focusedElem:e,selectionRange:n},$l=!1,Re=t;Re!==null;)if(t=Re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Re=e;else for(;Re!==null;){t=Re;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var S=k.memoizedProps,M=k.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?S:Rn(t.type,S),M);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch(v){bt(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,Re=e;break}Re=t.return}return k=ip,ip=!1,k}function Zs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&pu(t,n,s)}i=i.next}while(i!==r)}}function ba(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cm(e){var t=e.alternate;t!==null&&(e.alternate=null,cm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jn],delete t[po],delete t[eu],delete t[ix],delete t[sx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function um(e){return e.tag===5||e.tag===3||e.tag===4}function sp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fl));else if(r!==4&&(e=e.child,e!==null))for(gu(e,t,n),e=e.sibling;e!==null;)gu(e,t,n),e=e.sibling}function mu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(mu(e,t,n),e=e.sibling;e!==null;)mu(e,t,n),e=e.sibling}var Pt=null,Tn=!1;function wr(e,t,n){for(n=n.child;n!==null;)dm(e,t,n),n=n.sibling}function dm(e,t,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(ga,n)}catch{}switch(n.tag){case 5:Gt||Ui(n,t);case 6:var r=Pt,i=Tn;Pt=null,wr(e,t,n),Pt=r,Tn=i,Pt!==null&&(Tn?(e=Pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pt.removeChild(n.stateNode));break;case 18:Pt!==null&&(Tn?(e=Pt,n=n.stateNode,e.nodeType===8?tc(e.parentNode,n):e.nodeType===1&&tc(e,n),lo(e)):tc(Pt,n.stateNode));break;case 4:r=Pt,i=Tn,Pt=n.stateNode.containerInfo,Tn=!0,wr(e,t,n),Pt=r,Tn=i;break;case 0:case 11:case 14:case 15:if(!Gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pu(n,t,o),i=i.next}while(i!==r)}wr(e,t,n);break;case 1:if(!Gt&&(Ui(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bt(n,t,a)}wr(e,t,n);break;case 21:wr(e,t,n);break;case 22:n.mode&1?(Gt=(r=Gt)||n.memoizedState!==null,wr(e,t,n),Gt=r):wr(e,t,n);break;default:wr(e,t,n)}}function op(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sx),t.forEach(function(r){var i=Mx.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pt=a.stateNode,Tn=!1;break e;case 3:Pt=a.stateNode.containerInfo,Tn=!0;break e;case 4:Pt=a.stateNode.containerInfo,Tn=!0;break e}a=a.return}if(Pt===null)throw Error(pe(160));dm(s,o,i),Pt=null,Tn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){bt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fm(t,e),t=t.sibling}function fm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mn(t,e),Yn(e),r&4){try{Zs(3,e,e.return),ba(3,e)}catch(S){bt(e,e.return,S)}try{Zs(5,e,e.return)}catch(S){bt(e,e.return,S)}}break;case 1:Mn(t,e),Yn(e),r&512&&n!==null&&Ui(n,n.return);break;case 5:if(Mn(t,e),Yn(e),r&512&&n!==null&&Ui(n,n.return),e.flags&32){var i=e.stateNode;try{ro(i,"")}catch(S){bt(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Ih(i,s),Fc(a,o);var u=Fc(a,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Oh(i,f):d==="dangerouslySetInnerHTML"?$h(i,f):d==="children"?ro(i,f):Yu(i,d,f,u)}switch(a){case"input":Tc(i,s);break;case"textarea":Th(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Xi(i,!!s.multiple,h,!1):p!==!!s.multiple&&(s.defaultValue!=null?Xi(i,!!s.multiple,s.defaultValue,!0):Xi(i,!!s.multiple,s.multiple?[]:"",!1))}i[po]=s}catch(S){bt(e,e.return,S)}}break;case 6:if(Mn(t,e),Yn(e),r&4){if(e.stateNode===null)throw Error(pe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(S){bt(e,e.return,S)}}break;case 3:if(Mn(t,e),Yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lo(t.containerInfo)}catch(S){bt(e,e.return,S)}break;case 4:Mn(t,e),Yn(e);break;case 13:Mn(t,e),Yn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jd=Nt())),r&4&&op(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Gt=(u=Gt)||d,Mn(t,e),Gt=u):Mn(t,e),Yn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Re=e,d=e.child;d!==null;){for(f=Re=d;Re!==null;){switch(p=Re,h=p.child,p.tag){case 0:case 11:case 14:case 15:Zs(4,p,p.return);break;case 1:Ui(p,p.return);var k=p.stateNode;if(typeof k.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(S){bt(r,n,S)}}break;case 5:Ui(p,p.return);break;case 22:if(p.memoizedState!==null){ap(f);continue}}h!==null?(h.return=p,Re=h):ap(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Lh("display",o))}catch(S){bt(e,e.return,S)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(S){bt(e,e.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mn(t,e),Yn(e),r&4&&op(e);break;case 21:break;default:Mn(t,e),Yn(e)}}function Yn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(um(n)){var r=n;break e}n=n.return}throw Error(pe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ro(i,""),r.flags&=-33);var s=sp(e);mu(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=sp(e);gu(e,a,o);break;default:throw Error(pe(161))}}catch(c){bt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bx(e,t,n){Re=e,pm(e)}function pm(e,t,n){for(var r=(e.mode&1)!==0;Re!==null;){var i=Re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zo;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Gt;a=Zo;var u=Gt;if(Zo=o,(Gt=c)&&!u)for(Re=i;Re!==null;)o=Re,c=o.child,o.tag===22&&o.memoizedState!==null?cp(i):c!==null?(c.return=o,Re=c):cp(i);for(;s!==null;)Re=s,pm(s),s=s.sibling;Re=i,Zo=a,Gt=u}lp(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Re=s):lp(e)}}function lp(e){for(;Re!==null;){var t=Re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gt||ba(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Gt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Rn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Vf(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Vf(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&lo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}Gt||t.flags&512&&hu(t)}catch(p){bt(t,t.return,p)}}if(t===e){Re=null;break}if(n=t.sibling,n!==null){n.return=t.return,Re=n;break}Re=t.return}}function ap(e){for(;Re!==null;){var t=Re;if(t===e){Re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Re=n;break}Re=t.return}}function cp(e){for(;Re!==null;){var t=Re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ba(4,t)}catch(c){bt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){bt(t,i,c)}}var s=t.return;try{hu(t)}catch(c){bt(t,s,c)}break;case 5:var o=t.return;try{hu(t)}catch(c){bt(t,o,c)}}}catch(c){bt(t,t.return,c)}if(t===e){Re=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Re=a;break}Re=t.return}}var Cx=Math.ceil,Ql=vr.ReactCurrentDispatcher,bd=vr.ReactCurrentOwner,Nn=vr.ReactCurrentBatchConfig,st=0,It=null,_t=null,Ft=0,gn=0,Vi=Jr(0),Mt=0,xo=null,xi=0,Ca=0,Cd=0,qs=null,rn=null,jd=0,us=1/0,sr=null,Zl=!1,yu=null,Wr=null,qo=!1,$r=null,ql=0,eo=0,vu=null,jl=-1,El=0;function Zt(){return st&6?Nt():jl!==-1?jl:jl=Nt()}function Ur(e){return e.mode&1?st&2&&Ft!==0?Ft&-Ft:lx.transition!==null?(El===0&&(El=Qh()),El):(e=at,e!==0||(e=window.event,e=e===void 0?16:ig(e.type)),e):1}function Bn(e,t,n,r){if(50<eo)throw eo=0,vu=null,Error(pe(185));Do(e,n,r),(!(st&2)||e!==It)&&(e===It&&(!(st&2)&&(Ca|=n),Mt===4&&Ir(e,Ft)),cn(e,r),n===1&&st===0&&!(t.mode&1)&&(us=Nt()+500,wa&&Qr()))}function cn(e,t){var n=e.callbackNode;l0(e,t);var r=Pl(e,e===It?Ft:0);if(r===0)n!==null&&vf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vf(n),t===1)e.tag===0?ox(up.bind(null,e)):bg(up.bind(null,e)),nx(function(){!(st&6)&&Qr()}),n=null;else{switch(Zh(r)){case 1:n=Qu;break;case 4:n=Kh;break;case 16:n=Tl;break;case 536870912:n=Jh;break;default:n=Tl}n=Sm(n,hm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hm(e,t){if(jl=-1,El=0,st&6)throw Error(pe(327));var n=e.callbackNode;if(qi()&&e.callbackNode!==n)return null;var r=Pl(e,e===It?Ft:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ea(e,r);else{t=r;var i=st;st|=2;var s=mm();(It!==e||Ft!==t)&&(sr=null,us=Nt()+500,fi(e,t));do try{Nx();break}catch(a){gm(e,a)}while(!0);ud(),Ql.current=s,st=i,_t!==null?t=0:(It=null,Ft=0,t=Mt)}if(t!==0){if(t===2&&(i=Vc(e),i!==0&&(r=i,t=xu(e,i))),t===1)throw n=xo,fi(e,0),Ir(e,r),cn(e,Nt()),n;if(t===6)Ir(e,r);else{if(i=e.current.alternate,!(r&30)&&!jx(i)&&(t=ea(e,r),t===2&&(s=Vc(e),s!==0&&(r=s,t=xu(e,s))),t===1))throw n=xo,fi(e,0),Ir(e,r),cn(e,Nt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(pe(345));case 2:ni(e,rn,sr);break;case 3:if(Ir(e,r),(r&130023424)===r&&(t=jd+500-Nt(),10<t)){if(Pl(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Zt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qc(ni.bind(null,e,rn,sr),t);break}ni(e,rn,sr);break;case 4:if(Ir(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Fn(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cx(r/1960))-r,10<r){e.timeoutHandle=qc(ni.bind(null,e,rn,sr),r);break}ni(e,rn,sr);break;case 5:ni(e,rn,sr);break;default:throw Error(pe(329))}}}return cn(e,Nt()),e.callbackNode===n?hm.bind(null,e):null}function xu(e,t){var n=qs;return e.current.memoizedState.isDehydrated&&(fi(e,t).flags|=256),e=ea(e,t),e!==2&&(t=rn,rn=n,t!==null&&wu(t)),e}function wu(e){rn===null?rn=e:rn.push.apply(rn,e)}function jx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wn(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t){for(t&=~Cd,t&=~Ca,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fn(t),r=1<<n;e[n]=-1,t&=~r}}function up(e){if(st&6)throw Error(pe(327));qi();var t=Pl(e,0);if(!(t&1))return cn(e,Nt()),null;var n=ea(e,t);if(e.tag!==0&&n===2){var r=Vc(e);r!==0&&(t=r,n=xu(e,r))}if(n===1)throw n=xo,fi(e,0),Ir(e,t),cn(e,Nt()),n;if(n===6)throw Error(pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ni(e,rn,sr),cn(e,Nt()),null}function Ed(e,t){var n=st;st|=1;try{return e(t)}finally{st=n,st===0&&(us=Nt()+500,wa&&Qr())}}function wi(e){$r!==null&&$r.tag===0&&!(st&6)&&qi();var t=st;st|=1;var n=Nn.transition,r=at;try{if(Nn.transition=null,at=1,e)return e()}finally{at=r,Nn.transition=n,st=t,!(st&6)&&Qr()}}function Nd(){gn=Vi.current,mt(Vi)}function fi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tx(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(ld(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bl();break;case 3:as(),mt(ln),mt(Xt),md();break;case 5:gd(r);break;case 4:as();break;case 13:mt(wt);break;case 19:mt(wt);break;case 10:dd(r.type._context);break;case 22:case 23:Nd()}n=n.return}if(It=e,_t=e=Vr(e.current,null),Ft=gn=t,Mt=0,xo=null,Cd=Ca=xi=0,rn=qs=null,ai!==null){for(t=0;t<ai.length;t++)if(n=ai[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ai=null}return e}function gm(e,t){do{var n=_t;try{if(ud(),kl.current=Jl,Kl){for(var r=St.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Kl=!1}if(vi=0,Rt=Dt=St=null,Qs=!1,mo=0,bd.current=null,n===null||n.return===null){Mt=1,xo=t,_t=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=Ft,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Qf(o);if(h!==null){h.flags&=-257,Zf(h,o,a,s,t),h.mode&1&&Jf(s,u,t),t=h,c=u;var k=t.updateQueue;if(k===null){var S=new Set;S.add(c),t.updateQueue=S}else k.add(c);break e}else{if(!(t&1)){Jf(s,u,t),Ad();break e}c=Error(pe(426))}}else if(vt&&a.mode&1){var M=Qf(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Zf(M,o,a,s,t),ad(cs(c,a));break e}}s=c=cs(c,a),Mt!==4&&(Mt=2),qs===null?qs=[s]:qs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=Zg(s,c,t);Uf(s,g);break e;case 1:a=c;var m=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Wr===null||!Wr.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var v=qg(s,a,t);Uf(s,v);break e}}s=s.return}while(s!==null)}vm(n)}catch(z){t=z,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function mm(){var e=Ql.current;return Ql.current=Jl,e===null?Jl:e}function Ad(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),It===null||!(xi&268435455)&&!(Ca&268435455)||Ir(It,Ft)}function ea(e,t){var n=st;st|=2;var r=mm();(It!==e||Ft!==t)&&(sr=null,fi(e,t));do try{Ex();break}catch(i){gm(e,i)}while(!0);if(ud(),st=n,Ql.current=r,_t!==null)throw Error(pe(261));return It=null,Ft=0,Mt}function Ex(){for(;_t!==null;)ym(_t)}function Nx(){for(;_t!==null&&!Zv();)ym(_t)}function ym(e){var t=wm(e.alternate,e,gn);e.memoizedProps=e.pendingProps,t===null?vm(e):_t=t,bd.current=null}function vm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wx(n,t),n!==null){n.flags&=32767,_t=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Mt=6,_t=null;return}}else if(n=xx(n,t,gn),n!==null){_t=n;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);Mt===0&&(Mt=5)}function ni(e,t,n){var r=at,i=Nn.transition;try{Nn.transition=null,at=1,Ax(e,t,n,r)}finally{Nn.transition=i,at=r}return null}function Ax(e,t,n,r){do qi();while($r!==null);if(st&6)throw Error(pe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(pe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(a0(e,s),e===It&&(_t=It=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,Sm(Tl,function(){return qi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nn.transition,Nn.transition=null;var o=at;at=1;var a=st;st|=4,bd.current=null,kx(e,n),fm(n,e),X0(Qc),$l=!!Jc,Qc=Jc=null,e.current=n,bx(n),qv(),st=a,at=o,Nn.transition=s}else e.current=n;if(qo&&(qo=!1,$r=e,ql=i),s=e.pendingLanes,s===0&&(Wr=null),n0(n.stateNode),cn(e,Nt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,e=yu,yu=null,e;return ql&1&&e.tag!==0&&qi(),s=e.pendingLanes,s&1?e===vu?eo++:(eo=0,vu=e):eo=0,Qr(),null}function qi(){if($r!==null){var e=Zh(ql),t=Nn.transition,n=at;try{if(Nn.transition=null,at=16>e?16:e,$r===null)var r=!1;else{if(e=$r,$r=null,ql=0,st&6)throw Error(pe(331));var i=st;for(st|=4,Re=e.current;Re!==null;){var s=Re,o=s.child;if(Re.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Re=u;Re!==null;){var d=Re;switch(d.tag){case 0:case 11:case 15:Zs(8,d,s)}var f=d.child;if(f!==null)f.return=d,Re=f;else for(;Re!==null;){d=Re;var p=d.sibling,h=d.return;if(cm(d),d===u){Re=null;break}if(p!==null){p.return=h,Re=p;break}Re=h}}}var k=s.alternate;if(k!==null){var S=k.child;if(S!==null){k.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}Re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Re=o;else e:for(;Re!==null;){if(s=Re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zs(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Re=g;break e}Re=s.return}}var m=e.current;for(Re=m;Re!==null;){o=Re;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Re=w;else e:for(o=m;Re!==null;){if(a=Re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ba(9,a)}}catch(z){bt(a,a.return,z)}if(a===o){Re=null;break e}var v=a.sibling;if(v!==null){v.return=a.return,Re=v;break e}Re=a.return}}if(st=i,Qr(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(ga,e)}catch{}r=!0}return r}finally{at=n,Nn.transition=t}}return!1}function dp(e,t,n){t=cs(n,t),t=Zg(e,t,1),e=Hr(e,t,1),t=Zt(),e!==null&&(Do(e,1,t),cn(e,t))}function bt(e,t,n){if(e.tag===3)dp(e,e,n);else for(;t!==null;){if(t.tag===3){dp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){e=cs(n,e),e=qg(t,e,1),t=Hr(t,e,1),e=Zt(),t!==null&&(Do(t,1,e),cn(t,e));break}}t=t.return}}function _x(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Zt(),e.pingedLanes|=e.suspendedLanes&n,It===e&&(Ft&n)===n&&(Mt===4||Mt===3&&(Ft&130023424)===Ft&&500>Nt()-jd?fi(e,0):Cd|=n),cn(e,t)}function xm(e,t){t===0&&(e.mode&1?(t=Wo,Wo<<=1,!(Wo&130023424)&&(Wo=4194304)):t=1);var n=Zt();e=hr(e,t),e!==null&&(Do(e,t,n),cn(e,n))}function Dx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),xm(e,n)}function Mx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(pe(314))}r!==null&&r.delete(t),xm(e,n)}var wm;wm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)sn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return sn=!1,vx(e,t,n);sn=!!(e.flags&131072)}else sn=!1,vt&&t.flags&1048576&&Cg(t,Ul,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cl(e,t),e=t.pendingProps;var i=ss(t,Xt.current);Zi(t,n),i=vd(null,t,r,e,i,n);var s=xd();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,an(r)?(s=!0,Hl(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pd(t),i.updater=ka,t.stateNode=i,i._reactInternals=t,ou(t,r,e,n),t=cu(null,t,r,!0,s,n)):(t.tag=0,vt&&s&&od(t),Qt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Rx(r),e=Rn(r,e),i){case 0:t=au(null,t,r,e,n);break e;case 1:t=tp(null,t,r,e,n);break e;case 11:t=qf(null,t,r,e,n);break e;case 14:t=ep(null,t,r,Rn(r.type,e),n);break e}throw Error(pe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),au(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),tp(e,t,r,i,n);case 3:e:{if(rm(t),e===null)throw Error(pe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Dg(e,t),Gl(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=cs(Error(pe(423)),t),t=np(e,t,r,n,i);break e}else if(r!==i){i=cs(Error(pe(424)),t),t=np(e,t,r,n,i);break e}else for(mn=Br(t.stateNode.containerInfo.firstChild),yn=t,vt=!0,$n=null,n=Ag(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(os(),r===i){t=gr(e,t,n);break e}Qt(e,t,r,n)}t=t.child}return t;case 5:return Mg(t),e===null&&ru(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Zc(r,i)?o=null:s!==null&&Zc(r,s)&&(t.flags|=32),nm(e,t),Qt(e,t,o,n),t.child;case 6:return e===null&&ru(t),null;case 13:return im(e,t,n);case 4:return hd(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ls(t,null,r,n):Qt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),qf(e,t,r,i,n);case 7:return Qt(e,t,t.pendingProps,n),t.child;case 8:return Qt(e,t,t.pendingProps.children,n),t.child;case 12:return Qt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ft(Vl,r._currentValue),r._currentValue=o,s!==null)if(Wn(s.value,o)){if(s.children===i.children&&!ln.current){t=gr(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=ur(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),iu(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(pe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iu(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Zi(t,n),i=An(i),r=r(i),t.flags|=1,Qt(e,t,r,n),t.child;case 14:return r=t.type,i=Rn(r,t.pendingProps),i=Rn(r.type,i),ep(e,t,r,i,n);case 15:return em(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Rn(r,i),Cl(e,t),t.tag=1,an(r)?(e=!0,Hl(t)):e=!1,Zi(t,n),Qg(t,r,i),ou(t,r,i,n),cu(null,t,r,!0,e,n);case 19:return sm(e,t,n);case 22:return tm(e,t,n)}throw Error(pe(156,t.tag))};function Sm(e,t){return Xh(e,t)}function zx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,n,r){return new zx(e,t,n,r)}function _d(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rx(e){if(typeof e=="function")return _d(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xu)return 11;if(e===Ku)return 14}return 2}function Vr(e,t){var n=e.alternate;return n===null?(n=jn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nl(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")_d(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ti:return pi(n.children,i,s,t);case Gu:o=8,i|=8;break;case Dc:return e=jn(12,n,t,i|2),e.elementType=Dc,e.lanes=s,e;case Mc:return e=jn(13,n,t,i),e.elementType=Mc,e.lanes=s,e;case zc:return e=jn(19,n,t,i),e.elementType=zc,e.lanes=s,e;case Mh:return ja(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _h:o=10;break e;case Dh:o=9;break e;case Xu:o=11;break e;case Ku:o=14;break e;case Nr:o=16,r=null;break e}throw Error(pe(130,e==null?e:typeof e,""))}return t=jn(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function pi(e,t,n,r){return e=jn(7,e,r,t),e.lanes=n,e}function ja(e,t,n,r){return e=jn(22,e,r,t),e.elementType=Mh,e.lanes=n,e.stateNode={isHidden:!1},e}function cc(e,t,n){return e=jn(6,e,null,t),e.lanes=n,e}function uc(e,t,n){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ix(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ua(0),this.expirationTimes=Ua(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dd(e,t,n,r,i,s,o,a,c){return e=new Ix(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=jn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pd(s),e}function Tx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ii,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function km(e){if(!e)return Xr;e=e._reactInternals;e:{if(Ci(e)!==e||e.tag!==1)throw Error(pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(an(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pe(171))}if(e.tag===1){var n=e.type;if(an(n))return kg(e,n,t)}return t}function bm(e,t,n,r,i,s,o,a,c){return e=Dd(n,r,!0,e,i,s,o,a,c),e.context=km(null),n=e.current,r=Zt(),i=Ur(n),s=ur(r,i),s.callback=t??null,Hr(n,s,i),e.current.lanes=i,Do(e,i,r),cn(e,r),e}function Ea(e,t,n,r){var i=t.current,s=Zt(),o=Ur(i);return n=km(n),t.context===null?t.context=n:t.pendingContext=n,t=ur(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hr(i,t,o),e!==null&&(Bn(e,i,o,s),Sl(e,i,o)),o}function ta(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Md(e,t){fp(e,t),(e=e.alternate)&&fp(e,t)}function Px(){return null}var Cm=typeof reportError=="function"?reportError:function(e){console.error(e)};function zd(e){this._internalRoot=e}Na.prototype.render=zd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pe(409));Ea(e,t,null,null)};Na.prototype.unmount=zd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wi(function(){Ea(null,e,null,null)}),t[pr]=null}};function Na(e){this._internalRoot=e}Na.prototype.unstable_scheduleHydration=function(e){if(e){var t=tg();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rr.length&&t!==0&&t<Rr[n].priority;n++);Rr.splice(n,0,e),n===0&&rg(e)}};function Rd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pp(){}function $x(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ta(o);s.call(u)}}var o=bm(t,r,e,0,null,!1,!1,"",pp);return e._reactRootContainer=o,e[pr]=o.current,uo(e.nodeType===8?e.parentNode:e),wi(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=ta(c);a.call(u)}}var c=Dd(e,0,!1,null,null,!1,!1,"",pp);return e._reactRootContainer=c,e[pr]=c.current,uo(e.nodeType===8?e.parentNode:e),wi(function(){Ea(t,c,n,r)}),c}function _a(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=ta(o);a.call(c)}}Ea(t,o,e,i)}else o=$x(n,t,e,i,r);return ta(o)}qh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Os(t.pendingLanes);n!==0&&(Zu(t,n|1),cn(t,Nt()),!(st&6)&&(us=Nt()+500,Qr()))}break;case 13:wi(function(){var r=hr(e,1);if(r!==null){var i=Zt();Bn(r,e,1,i)}}),Md(e,1)}};qu=function(e){if(e.tag===13){var t=hr(e,134217728);if(t!==null){var n=Zt();Bn(t,e,134217728,n)}Md(e,134217728)}};eg=function(e){if(e.tag===13){var t=Ur(e),n=hr(e,t);if(n!==null){var r=Zt();Bn(n,e,t,r)}Md(e,t)}};tg=function(){return at};ng=function(e,t){var n=at;try{return at=e,t()}finally{at=n}};Hc=function(e,t,n){switch(t){case"input":if(Tc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xa(r);if(!i)throw Error(pe(90));Rh(r),Tc(r,i)}}}break;case"textarea":Th(e,n);break;case"select":t=n.value,t!=null&&Xi(e,!!n.multiple,t,!1)}};Hh=Ed;Wh=wi;var Lx={usingClientEntryPoint:!1,Events:[zo,Oi,xa,Fh,Bh,Ed]},_s={findFiberByHostInstance:li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ox={bundleType:_s.bundleType,version:_s.version,rendererPackageName:_s.rendererPackageName,rendererConfig:_s.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yh(e),e===null?null:e.stateNode},findFiberByHostInstance:_s.findFiberByHostInstance||Px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var el=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!el.isDisabled&&el.supportsFiber)try{ga=el.inject(Ox),qn=el}catch{}}wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lx;wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rd(t))throw Error(pe(200));return Tx(e,t,null,n)};wn.createRoot=function(e,t){if(!Rd(e))throw Error(pe(299));var n=!1,r="",i=Cm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Dd(e,1,!1,null,null,n,!1,r,i),e[pr]=t.current,uo(e.nodeType===8?e.parentNode:e),new zd(t)};wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pe(188)):(e=Object.keys(e).join(","),Error(pe(268,e)));return e=Yh(t),e=e===null?null:e.stateNode,e};wn.flushSync=function(e){return wi(e)};wn.hydrate=function(e,t,n){if(!Aa(t))throw Error(pe(200));return _a(null,e,t,!0,n)};wn.hydrateRoot=function(e,t,n){if(!Rd(e))throw Error(pe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Cm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=bm(t,null,e,1,n??null,i,!1,s,o),e[pr]=t.current,uo(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Na(t)};wn.render=function(e,t,n){if(!Aa(t))throw Error(pe(200));return _a(null,e,t,!1,n)};wn.unmountComponentAtNode=function(e){if(!Aa(e))throw Error(pe(40));return e._reactRootContainer?(wi(function(){_a(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0):!1};wn.unstable_batchedUpdates=Ed;wn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Aa(n))throw Error(pe(200));if(e==null||e._reactInternals===void 0)throw Error(pe(38));return _a(e,t,n,!1,r)};wn.version="18.3.1-next-f1338f8080-20240426";function jm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jm)}catch(e){console.error(e)}}jm(),jh.exports=wn;var Fx=jh.exports,Em,hp=Fx;Em=hp.createRoot,hp.hydrateRoot;/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hx=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),gp=e=>{const t=Hx(e);return t.charAt(0).toUpperCase()+t.slice(1)},Nm=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),Wx=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ux={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>b.createElement("svg",{ref:c,...Ux,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Nm("lucide",i),...!s&&!Wx(a)&&{"aria-hidden":"true"},...a},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=(e,t)=>{const n=b.forwardRef(({className:r,...i},s)=>b.createElement(Vx,{ref:s,iconNode:t,className:Nm(`lucide-${Bx(gp(e))}`,`lucide-${e}`,r),...i}));return n.displayName=gp(e),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],Gx=Dn("columns-2",Yx);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mp=Dn("info",Xx);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Jx=Dn("layout-grid",Kx);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Zx=Dn("list",Qx);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],e1=Dn("plus",qx);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],n1=Dn("redo-2",t1);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],i1=Dn("scale",r1);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],o1=Dn("settings-2",s1);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Am=Dn("shield",l1);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ei=Dn("sparkles",a1);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Id=Dn("sword",c1);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],d1=Dn("undo-2",u1),hn=[{id:"acrobatics",name:"Acrobatics",ability:"dex"},{id:"animal",name:"Animal Handling",ability:"wis"},{id:"arcana",name:"Arcana",ability:"int"},{id:"athletics",name:"Athletics",ability:"str"},{id:"deception",name:"Deception",ability:"cha"},{id:"history",name:"History",ability:"int"},{id:"insight",name:"Insight",ability:"wis"},{id:"intimidation",name:"Intimidation",ability:"cha"},{id:"investigation",name:"Investigation",ability:"int"},{id:"medicine",name:"Medicine",ability:"wis"},{id:"nature",name:"Nature",ability:"int"},{id:"perception",name:"Perception",ability:"wis"},{id:"performance",name:"Performance",ability:"cha"},{id:"persuasion",name:"Persuasion",ability:"cha"},{id:"religion",name:"Religion",ability:"int"},{id:"sleight",name:"Sleight of Hand",ability:"dex"},{id:"stealth",name:"Stealth",ability:"dex"},{id:"survival",name:"Survival",ability:"wis"}],Zr=[{id:"soldier",name:"Soldier",skills:["athletics","intimidation"],tools:["gaming set","vehicles (land)"],feature:{name:"Military Rank",text:"You have a military rank and can exert influence."}},{id:"acolyte",name:"Acolyte",skills:["insight","religion"],languages:2,feature:{name:"Shelter of the Faithful",text:"You command respect from those who share your faith."}},{id:"criminal",name:"Criminal",skills:["deception","stealth"],tools:["thieves tools","gaming set"],feature:{name:"Criminal Contact",text:"You have a reliable and trustworthy contact."}},{id:"sage",name:"Sage",skills:["arcana","history"],languages:2,feature:{name:"Researcher",text:"You can find information with ease in libraries and archives."}},{id:"folk-hero",name:"Folk Hero",skills:["animal","survival"],tools:["artisans tools","vehicles (land)"],feature:{name:"Rustic Hospitality",text:"You fit in among common folk and can find shelter among them."}},{id:"urchin",name:"Urchin",skills:["sleight","stealth"],tools:["disguise kit","thieves tools"],feature:{name:"City Secrets",text:"You know the secret patterns and flow to cities and can find passages through the urban sprawl."}},{id:"noble",name:"Noble",skills:["history","persuasion"],tools:["gaming set"],languages:1,feature:{name:"Position of Privilege",text:"People are inclined to think the best of you. You are welcome in high society."}},{id:"outlander",name:"Outlander",skills:["athletics","survival"],tools:["musical instrument"],feature:{name:"Wanderer",text:"You have an excellent memory for maps and geography; you can find food and fresh water for yourself and up to five others each day."}},{id:"sailor",name:"Sailor",skills:["athletics","perception"],tools:["navigator's tools","vehicles (water)"],feature:{name:"Ship's Passage",text:"You can secure free passage on a sailing ship for yourself and your companions."}}],tl=[{id:"vicious-mockery",name:"Vicious Mockery",level:0,classes:["bard"],text:"Insult a creature; it takes psychic damage and has disadvantage on next attack."},{id:"prestidigitation",name:"Prestidigitation",level:0,classes:["bard","wizard"],text:"Minor magical tricks and sensory effects."},{id:"mage-hand",name:"Mage Hand",level:0,classes:["bard","wizard"],text:"Create a spectral hand to manipulate objects."},{id:"friends",name:"Friends",level:0,classes:["bard"],text:"Gain advantage on CHA checks directed at one creature."},{id:"produce-flame",name:"Produce Flame",level:0,classes:["druid"],text:"Conjure a flame in your hand; shed light and can hurl for fire damage."},{id:"shillelagh",name:"Shillelagh",level:0,classes:["druid"],text:"Imbue a club or quarterstaff; use WIS for attack/damage."},{id:"thorn-whip",name:"Thorn Whip",level:0,classes:["druid"],text:"Create a vine whip; pull a creature closer on a hit."},{id:"guidance",name:"Guidance",level:0,classes:["cleric"],text:"Add 1d4 to one ability check."},{id:"sacred-flame",name:"Sacred Flame",level:0,classes:["cleric"],text:"Radiant fire descends on a creature; DEX save for no damage."},{id:"thaumaturgy",name:"Thaumaturgy",level:0,classes:["cleric"],text:"Manifest minor wonders to show divine power."},{id:"spare-the-dying",name:"Spare the Dying",level:0,classes:["cleric"],text:"Stabilize a creature at 0 HP."},{id:"fire-bolt",name:"Fire Bolt",level:0,classes:["wizard"],text:"Ranged spell attack for fire damage."},{id:"ray-of-frost",name:"Ray of Frost",level:0,classes:["wizard"],text:"Ray of cold that slows the target."},{id:"eldritch-blast",name:"Eldritch Blast",level:0,classes:["warlock"],text:"Ranged spell attack dealing force damage."},{id:"minor-illusion",name:"Minor Illusion",level:0,classes:["bard","wizard"],text:"Create a sound or image to distract or conceal."},{id:"light",name:"Light",level:0,classes:["cleric","wizard"],text:"Object sheds bright light; dispels magical darkness in small areas rarely."},{id:"resistance",name:"Resistance",level:0,classes:["cleric","druid"],text:"Touch grants +1d4 to one saving throw before the spell ends."},{id:"druidcraft",name:"Druidcraft",level:0,classes:["druid"],text:"Whisper of nature: predict weather, create small sensory effects."},{id:"acid-splash",name:"Acid Splash",level:0,classes:["wizard"],text:"Hurl a bubble of acid that corrodes one or two nearby targets."},{id:"shocking-grasp",name:"Shocking Grasp",level:0,classes:["wizard"],text:"Lightning springs from your hand; target cant take reactions briefly."},{id:"chill-touch",name:"Chill Touch",level:0,classes:["wizard"],text:"Skeletal hand deals necrotic damage; hampers healing."},{id:"healing-word",name:"Healing Word",level:1,classes:["bard","cleric"],text:"Bonus action healing at range."},{id:"tashas-hideous-laughter",name:"Tasha's Hideous Laughter",level:1,classes:["bard"],text:"A creature falls prone with laughter; WIS save ends."},{id:"dissonant-whispers",name:"Dissonant Whispers",level:1,classes:["bard"],text:"Psychic damage; target may flee immediately."},{id:"faerie-fire",name:"Faerie Fire",level:1,classes:["bard"],text:"Outline creatures; attacks against them have advantage."},{id:"heroism",name:"Heroism",level:1,classes:["bard","paladin"],text:"A willing creature is imbued with bravery and temporary vigor."},{id:"charm-person",name:"Charm Person",level:1,classes:["bard","wizard"],text:"Attempt to charm a humanoid."},{id:"cure-wounds",name:"Cure Wounds",level:1,classes:["cleric"],text:"Touch-based healing."},{id:"bless",name:"Bless",level:1,classes:["cleric"],text:"Add 1d4 to allies attack rolls and saves."},{id:"guiding-bolt",name:"Guiding Bolt",level:1,classes:["cleric"],text:"Radiant damage and advantage for next attack against target."},{id:"sanctuary",name:"Sanctuary",level:1,classes:["cleric"],text:"Ward a creature against attack; attackers must make a save."},{id:"command",name:"Command",level:1,classes:["cleric"],text:"Speak a one-word command; target must obey on a failed save."},{id:"inflict-wounds",name:"Inflict Wounds",level:1,classes:["cleric"],text:"Melee spell attack dealing strong necrotic damage."},{id:"entangle",name:"Entangle",level:1,classes:["druid"],text:"Grasping weeds restrain creatures in a 20foot square."},{id:"goodberry",name:"Goodberry",level:1,classes:["druid"],text:"Create ten berries that heal when eaten."},{id:"fog-cloud",name:"Fog Cloud",level:1,classes:["druid","ranger","wizard"],text:"Create a 20footradius sphere of fog that heavily obscures."},{id:"speak-with-animals",name:"Speak with Animals",level:1,classes:["druid","ranger"],text:"You gain the ability to comprehend and verbally communicate with beasts."},{id:"hunters-mark",name:"Hunter's Mark",level:1,classes:["ranger"],text:"Mark a target to deal extra damage and track it more easily."},{id:"ensnaring-strike",name:"Ensnaring Strike",level:1,classes:["ranger"],text:"Vines spring forth to restrain the target on a hit."},{id:"hail-of-thorns",name:"Hail of Thorns",level:1,classes:["ranger"],text:"Your ranged attack sprouts thorns that burst in a small radius."},{id:"compelled-duel",name:"Compelled Duel",level:1,classes:["paladin"],text:"Compel a creature to duel you; disadvantage to attack others."},{id:"divine-favor",name:"Divine Favor",level:1,classes:["paladin"],text:"Your weapon attacks deal +1d4 radiant damage."},{id:"shield-of-faith",name:"Shield of Faith",level:1,classes:["paladin"],text:"A shimmering field grants +2 AC for duration."},{id:"wrathful-smite",name:"Wrathful Smite",level:1,classes:["paladin"],text:"Empower your strike with fearinducing psychic energy."},{id:"searing-smite",name:"Searing Smite",level:1,classes:["paladin"],text:"Your weapon flares with whitehot intensity on a hit."},{id:"thunderous-smite",name:"Thunderous Smite",level:1,classes:["paladin"],text:"Your strike rings with thunder; may push and knock prone."},{id:"magic-missile",name:"Magic Missile",level:1,classes:["wizard"],text:"Automatically hits with force darts."},{id:"shield-spell",name:"Shield",level:1,classes:["wizard"],text:"+5 AC as a reaction until your next turn."},{id:"mage-armor",name:"Mage Armor",level:1,classes:["wizard"],text:"Protective magical force; set AC when unarmored."},{id:"sleep",name:"Sleep",level:1,classes:["wizard"],text:"Magically send creatures into slumber."},{id:"burning-hands",name:"Burning Hands",level:1,classes:["wizard","sorcerer"],text:"A fan of flames erupts from your hands."},{id:"detect-magic",name:"Detect Magic",level:1,classes:["wizard","cleric","druid","bard"],text:"Sense the presence of magic within 30 feet."},{id:"feather-fall",name:"Feather Fall",level:1,classes:["wizard","bard","sorcerer"],text:"Choose falling creatures to slow their descent."},{id:"grease",name:"Grease",level:1,classes:["wizard"],text:"Slick grease makes an area difficult and creatures may fall prone."},{id:"identify",name:"Identify",level:1,classes:["wizard","bard"],text:"Determine properties of a magic item or effect."},{id:"hex",name:"Hex",level:1,classes:["warlock"],text:"Curse a creature; deal extra damage and disadvantage on checks."},{id:"armor-of-agathys",name:"Armor of Agathys",level:1,classes:["warlock"],text:"Gain temporary HP and deal cold damage to attackers."},{id:"hellish-rebuke",name:"Hellish Rebuke",level:1,classes:["warlock"],text:"Reactive burst of hellish flames against your attacker."},{id:"aid",name:"Aid",level:2,classes:["cleric","paladin"],text:"Bolster allies with increased hit point maximum and healing."},{id:"spiritual-weapon",name:"Spiritual Weapon",level:2,classes:["cleric"],text:"Summon a floating weapon to strike as a bonus action."},{id:"prayer-of-healing",name:"Prayer of Healing",level:2,classes:["cleric"],text:"After a short prayer, multiple allies regain hit points."},{id:"lesser-restoration",name:"Lesser Restoration",level:2,classes:["cleric","druid","paladin"],text:"End one disease or a condition afflicting a creature."},{id:"pass-without-trace",name:"Pass without Trace",level:2,classes:["druid","ranger"],text:"Veil your group in shadows; +10 to Stealth checks."},{id:"moonbeam",name:"Moonbeam",level:2,classes:["druid"],text:"Pale light damages and reveals shapeshifters."},{id:"misty-step",name:"Misty Step",level:2,classes:["bard","sorcerer","warlock","wizard"],text:"Briefly surrounded by silvery mist, you teleport a short distance."},{id:"mirror-image",name:"Mirror Image",level:2,classes:["sorcerer","wizard"],text:"Create illusory duplicates to confuse attackers."},{id:"invisibility",name:"Invisibility",level:2,classes:["bard","sorcerer","wizard"],text:"Target becomes invisible until it attacks or you lose focus."},{id:"scorching-ray",name:"Scorching Ray",level:2,classes:["sorcerer","wizard"],text:"Project multiple fiery rays at targets within range."},{id:"hold-person",name:"Hold Person",level:2,classes:["bard","cleric","sorcerer","warlock","wizard"],text:"Paralyze a humanoid that fails a WIS save."},{id:"darkness",name:"Darkness",level:2,classes:["warlock","sorcerer","wizard"],text:"Magical darkness spreads from a point you choose."},{id:"branding-smite",name:"Branding Smite",level:2,classes:["paladin"],text:"Your weapon gleams; a struck foe sheds revealing light."},{id:"magic-weapon",name:"Magic Weapon",level:2,classes:["paladin","wizard"],text:"Imbue a weapon with a +1 bonus to attack and damage rolls."},{id:"hail-of-thorns-2",name:"Spike Growth",level:2,classes:["druid","ranger"],text:"Area sprouts spikes; movement deals piercing damage."},{id:"revivify",name:"Revivify",level:3,classes:["cleric","paladin"],text:"Return a creature to life if it died within the last minute."},{id:"spirit-guardians",name:"Spirit Guardians",level:3,classes:["cleric"],text:"Summon spirits that slow foes and deal radiant or necrotic damage."},{id:"call-lightning",name:"Call Lightning",level:3,classes:["druid"],text:"Create a storm cloud; call down bolts of lightning."},{id:"conjure-animals",name:"Conjure Animals",level:3,classes:["druid","ranger"],text:"Summon fey spirits that take beast forms to fight for you."},{id:"blinding-smite",name:"Blinding Smite",level:3,classes:["paladin"],text:"Your strike flashes with radiant light that can blind a foe."},{id:"fireball",name:"Fireball",level:3,classes:["sorcerer","wizard"],text:"A bright streak blossoms into a roaring fire explosion."},{id:"counterspell",name:"Counterspell",level:3,classes:["sorcerer","warlock","wizard"],text:"Interrupt another creatures spellcasting."},{id:"dispel-magic",name:"Dispel Magic",level:3,classes:["bard","cleric","druid","sorcerer","warlock","wizard"],text:"End spells on creatures or objects within range."},{id:"hypnotic-pattern",name:"Hypnotic Pattern",level:3,classes:["bard","sorcerer","warlock","wizard"],text:"A weaving pattern charms and incapacitates those who see it."},{id:"haste",name:"Haste",level:3,classes:["sorcerer","wizard"],text:"Target moves faster and gains an extra action briefly."}],Da={"vicious-mockery":{school:"enchantment",damageTypes:["psychic"],save:"wis"},prestidigitation:{school:"transmutation",save:"none"},"mage-hand":{school:"conjuration",save:"none"},friends:{school:"enchantment",save:"none"},"produce-flame":{school:"conjuration",damageTypes:["fire"],save:"none"},shillelagh:{school:"transmutation",save:"none"},"thorn-whip":{school:"transmutation",damageTypes:["piercing"],save:"none"},guidance:{school:"divination",save:"none"},"sacred-flame":{school:"evocation",damageTypes:["radiant"],save:"dex"},thaumaturgy:{school:"transmutation",save:"none"},"spare-the-dying":{school:"necromancy",save:"none"},"fire-bolt":{school:"evocation",damageTypes:["fire"],save:"none"},"ray-of-frost":{school:"evocation",damageTypes:["cold"],save:"none"},"eldritch-blast":{school:"evocation",damageTypes:["force"],save:"none"},"minor-illusion":{school:"illusion",save:"none"},light:{school:"evocation",save:"none"},resistance:{school:"abjuration",save:"none"},druidcraft:{school:"transmutation",save:"none"},"acid-splash":{school:"conjuration",damageTypes:["acid"],save:"dex"},"shocking-grasp":{school:"evocation",damageTypes:["lightning"],save:"none"},"chill-touch":{school:"necromancy",damageTypes:["necrotic"],save:"none"},"healing-word":{school:"evocation",save:"none"},"tashas-hideous-laughter":{school:"enchantment",save:"wis"},"dissonant-whispers":{school:"enchantment",damageTypes:["psychic"],save:"wis"},"faerie-fire":{school:"evocation",save:"dex"},heroism:{school:"enchantment",save:"none"},"charm-person":{school:"enchantment",save:"wis"},"cure-wounds":{school:"evocation",save:"none"},bless:{school:"enchantment",save:"none"},"guiding-bolt":{school:"evocation",damageTypes:["radiant"],save:"none"},sanctuary:{school:"abjuration",save:"wis"},command:{school:"enchantment",save:"wis"},"inflict-wounds":{school:"necromancy",damageTypes:["necrotic"],save:"none"},entangle:{school:"conjuration",save:"str"},goodberry:{school:"transmutation",save:"none"},"fog-cloud":{school:"conjuration",save:"none"},"speak-with-animals":{school:"divination",save:"none"},"hunters-mark":{school:"divination",save:"none"},"ensnaring-strike":{school:"conjuration",damageTypes:["piercing"],save:"str"},"hail-of-thorns":{school:"conjuration",damageTypes:["piercing"],save:"dex"},"compelled-duel":{school:"enchantment",save:"wis"},"divine-favor":{school:"evocation",damageTypes:["radiant"],save:"none"},"shield-of-faith":{school:"abjuration",save:"none"},"wrathful-smite":{school:"evocation",damageTypes:["psychic"],save:"wis"},"searing-smite":{school:"evocation",damageTypes:["fire"],save:"con"},"thunderous-smite":{school:"evocation",damageTypes:["thunder"],save:"str"},"magic-missile":{school:"evocation",damageTypes:["force"],save:"none"},"shield-spell":{school:"abjuration",save:"none"},"mage-armor":{school:"abjuration",save:"none"},sleep:{school:"enchantment",save:"none"},"burning-hands":{school:"evocation",damageTypes:["fire"],save:"dex"},"detect-magic":{school:"divination",save:"none"},"feather-fall":{school:"transmutation",save:"none"},grease:{school:"conjuration",save:"dex"},identify:{school:"divination",save:"none"},hex:{school:"enchantment",save:"none"},"armor-of-agathys":{school:"abjuration",damageTypes:["cold"],save:"none"},"hellish-rebuke":{school:"evocation",damageTypes:["fire"],save:"dex"},aid:{school:"abjuration",save:"none"},"spiritual-weapon":{school:"evocation",damageTypes:["force"],save:"none"},"prayer-of-healing":{school:"evocation",save:"none"},"lesser-restoration":{school:"abjuration",save:"none"},"pass-without-trace":{school:"abjuration",save:"none"},moonbeam:{school:"evocation",damageTypes:["radiant"],save:"con"},"misty-step":{school:"conjuration",save:"none"},"mirror-image":{school:"illusion",save:"none"},invisibility:{school:"illusion",save:"none"},"scorching-ray":{school:"evocation",damageTypes:["fire"],save:"none"},"hold-person":{school:"enchantment",save:"wis"},darkness:{school:"evocation",save:"none"},"branding-smite":{school:"evocation",damageTypes:["radiant"],save:"con"},"magic-weapon":{school:"transmutation",save:"none"},"hail-of-thorns-2":{school:"transmutation",damageTypes:["piercing"],save:"none"},revivify:{school:"necromancy",save:"none"},"spirit-guardians":{school:"conjuration",damageTypes:["radiant","necrotic"],save:"wis"},"call-lightning":{school:"conjuration",damageTypes:["lightning"],save:"dex"},"conjure-animals":{school:"conjuration",save:"none"},"blinding-smite":{school:"evocation",damageTypes:["radiant"],save:"con"},fireball:{school:"evocation",damageTypes:["fire"],save:"dex"},counterspell:{school:"abjuration",save:"none"},"dispel-magic":{school:"abjuration",save:"none"},"hypnotic-pattern":{school:"illusion",save:"wis"},haste:{school:"transmutation",save:"none"}};Array.from(new Set(Object.values(Da).map(e=>e.school).filter(Boolean)));Array.from(new Set(Object.values(Da).flatMap(e=>e.damageTypes||[])));Array.from(new Set(Object.values(Da).map(e=>e.save).filter(e=>!!e&&e!=="none")));const rr=[{id:"greataxe",name:"Greataxe",type:"weapon",group:"martial",hands:2,dmg:"1d12 slashing",tags:["weapon","heavy","twohanded"],grants:["Melee Attack (Greataxe)"]},{id:"greatsword",name:"Greatsword",type:"weapon",group:"martial",hands:2,dmg:"2d6 slashing",tags:["weapon","heavy","twohanded"],grants:["Melee Attack (Greatsword)"]},{id:"longsword",name:"Longsword",type:"weapon",group:"martial",hands:1,dmg:"1d8 slashing",tags:["weapon","versatile"],grants:["Melee Attack (Longsword)"]},{id:"rapier",name:"Rapier",type:"weapon",group:"martial",hands:1,dmg:"1d8 piercing",tags:["weapon","finesse"],grants:["Melee Attack (Rapier)"]},{id:"shortsword",name:"Shortsword",type:"weapon",group:"martial",hands:1,dmg:"1d6 piercing",tags:["weapon","finesse","light"],grants:["Melee Attack (Shortsword)"]},{id:"warhammer",name:"Warhammer",type:"weapon",group:"martial",hands:1,dmg:"1d8 bludgeoning",tags:["weapon","versatile"],grants:["Melee Attack (Warhammer)"]},{id:"mace",name:"Mace",type:"weapon",group:"simple",hands:1,dmg:"1d6 bludgeoning",tags:["weapon","simple"],grants:["Melee Attack (Mace)"]},{id:"handaxe",name:"Handaxe",type:"weapon",group:"simple",hands:1,dmg:"1d6 slashing",tags:["weapon","simple","light","thrown"],grants:["Melee Attack (Handaxe)","Ranged Attack (Handaxe)"]},{id:"dagger",name:"Dagger",type:"weapon",group:"simple",hands:1,dmg:"1d4 piercing",tags:["weapon","simple","light","finesse","thrown"],grants:["Melee Attack (Dagger)","Ranged Attack (Dagger)"]},{id:"spear",name:"Spear",type:"weapon",group:"simple",hands:1,dmg:"1d6 piercing",tags:["weapon","simple","thrown","versatile"],grants:["Melee Attack (Spear)","Ranged Attack (Spear)"]},{id:"longbow",name:"Longbow",type:"weapon",group:"martial",hands:2,dmg:"1d8 piercing",tags:["weapon","heavy","twohanded","ranged"],grants:["Ranged Attack (Longbow)"]},{id:"shortbow",name:"Shortbow",type:"weapon",group:"simple",hands:2,dmg:"1d6 piercing",tags:["weapon","twohanded","ranged"],grants:["Ranged Attack (Shortbow)"]},{id:"light-crossbow",name:"Light Crossbow",type:"weapon",group:"simple",hands:2,dmg:"1d8 piercing",tags:["weapon","twohanded","ranged","loading"],grants:["Ranged Attack (Light Crossbow)"]},{id:"heavy-crossbow",name:"Heavy Crossbow",type:"weapon",group:"martial",hands:2,dmg:"1d10 piercing",tags:["weapon","heavy","twohanded","ranged","loading"],grants:["Ranged Attack (Heavy Crossbow)"]},{id:"shield",name:"Shield",type:"shield",ac:2,hands:1,tags:["shield"],grants:["Raise Shield"]},{id:"padded",name:"Padded Armor",type:"armor",ac:11,dexMax:Number.POSITIVE_INFINITY,tags:["armor","light"]},{id:"leather",name:"Leather Armor",type:"armor",ac:11,dexMax:Number.POSITIVE_INFINITY,tags:["armor","light"]},{id:"studded-leather",name:"Studded Leather",type:"armor",ac:12,dexMax:Number.POSITIVE_INFINITY,tags:["armor","light"]},{id:"scale-mail",name:"Scale Mail",type:"armor",ac:14,dexMax:2,tags:["armor","medium"]},{id:"breastplate",name:"Breastplate",type:"armor",ac:14,dexMax:2,tags:["armor","medium"]},{id:"half-plate",name:"Half Plate",type:"armor",ac:15,dexMax:2,tags:["armor","medium"]},{id:"chain",name:"Chain Mail",type:"armor",ac:16,dexMax:0,reqStr:13,tags:["armor","heavy"]},{id:"splint",name:"Splint Armor",type:"armor",ac:17,dexMax:0,reqStr:15,tags:["armor","heavy"]},{id:"plate",name:"Plate Armor",type:"armor",ac:18,dexMax:0,reqStr:15,tags:["armor","heavy"]}],_m={greataxe:["Melee Attack (Greataxe)"],greatsword:["Melee Attack (Greatsword)"],longsword:["Melee Attack (Longsword)"],rapier:["Melee Attack (Rapier)"],shortsword:["Melee Attack (Shortsword)"],warhammer:["Melee Attack (Warhammer)"],mace:["Melee Attack (Mace)"],handaxe:["Melee Attack (Handaxe)","Ranged Attack (Handaxe)"],dagger:["Melee Attack (Dagger)","Ranged Attack (Dagger)"],spear:["Melee Attack (Spear)","Ranged Attack (Spear)"],longbow:["Ranged Attack (Longbow)"],shortbow:["Ranged Attack (Shortbow)"],"light-crossbow":["Ranged Attack (Light Crossbow)"],"heavy-crossbow":["Ranged Attack (Heavy Crossbow)"],shield:["Raise Shield"]},qr=[{id:"great-weapon-master",name:"Great Weapon Master",tags:["martial"],text:"+10 damage on a heavy attack after -5 to hit; bonus attack on crit/kill."},{id:"sharpshooter",name:"Sharpshooter",tags:["ranged"],text:"+10 damage at range after -5 to hit; ignore cover; no disadvantage at long range."},{id:"sentinel",name:"Sentinel",tags:["defense","control"],text:"Reduce enemy speed to 0 on opportunity hit; creatures provoke even if Disengage; reactions on attacks within 5 ft."},{id:"polearm-master",name:"Polearm Master",tags:["martial"],text:"Bonus action butt-end attack; opportunity attacks when they enter reach."},{id:"resilient-con",name:"Resilient (Constitution)",tags:["defense"],text:"+1 CON; gain proficiency in CON saves."},{id:"alert",name:"Alert",tags:["utility"],text:"+5 initiative; cant be surprised while conscious; other creatures dont gain advantage from being unseen."}],$t=[{id:"human",name:"Human (Base)",asis:{str:1,dex:1,con:1,int:1,wis:1,cha:1},speed:30,traits:[{id:"versatile",name:"Versatile",text:"+1 to all ability scores."}]},{id:"human-variant",name:"Human (Variant)",asis:{str:1,dex:1},speed:30,traits:[{id:"adaptable",name:"Adaptable",text:"+1 to two ability scores (demo variant)."}]},{id:"elf-wood",name:"Elf (Wood)",asis:{dex:2,wis:1},speed:35,traits:[{id:"darkvision",name:"Darkvision",text:"See in dim light 60 ft."},{id:"keen",name:"Keen Senses",text:"Proficiency in Perception."},{id:"fey-ancestry",name:"Fey Ancestry",text:"Advantage on saves against being charmed; magic cant put you to sleep."}]},{id:"elf-high",name:"Elf (High)",asis:{dex:2,int:1},speed:30,traits:[{id:"darkvision",name:"Darkvision",text:"See in dim light 60 ft."},{id:"keen",name:"Keen Senses",text:"Proficiency in Perception."},{id:"fey-ancestry",name:"Fey Ancestry",text:"Advantage on saves against being charmed; magic cant put you to sleep."}]},{id:"dwarf-hill",name:"Dwarf (Hill)",asis:{con:2,wis:1},speed:25,traits:[{id:"darkvision",name:"Darkvision",text:"See in dim light 60 ft."},{id:"dwarven-resilience",name:"Dwarven Resilience",text:"Advantage on saving throws against poison, and resistance to poison damage (demo flavor)."}]},{id:"dwarf-mountain",name:"Dwarf (Mountain)",asis:{con:2,str:2},speed:25,traits:[{id:"darkvision",name:"Darkvision",text:"See in dim light 60 ft."},{id:"dwarven-resilience",name:"Dwarven Resilience",text:"Advantage on saving throws against poison, and resistance to poison damage (demo flavor)."}]},{id:"halfling-lightfoot",name:"Halfling (Lightfoot)",asis:{dex:2,cha:1},speed:25,traits:[{id:"lucky",name:"Lucky",text:"Reroll 1s on attack, ability, or save rolls (demo flavor)."},{id:"brave",name:"Brave",text:"Advantage on saves vs. fear."}]},{id:"halfling-stout",name:"Halfling (Stout)",asis:{dex:2,con:1},speed:25,traits:[{id:"lucky",name:"Lucky",text:"Reroll 1s on attack, ability, or save rolls (demo flavor)."},{id:"brave",name:"Brave",text:"Advantage on saves vs. fear."},{id:"stout-resilience",name:"Stout Resilience",text:"Advantage on saves vs. poison (demo flavor)."}]},{id:"tiefling",name:"Tiefling",asis:{cha:2,int:1},speed:30,traits:[{id:"darkvision",name:"Darkvision",text:"See in dim light 60 ft."},{id:"hellish-resistance",name:"Hellish Resistance",text:"Resistance to fire damage."}]},{id:"dragonborn",name:"Dragonborn",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry",name:"Draconic Ancestry",text:"Breath weapon and damage resistance depend on ancestry."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance based on ancestry."}]},{id:"dragonborn-black",name:"Dragonborn (Black)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-black",name:"Draconic Ancestry  Black",text:"Acid breath; resistance to acid (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to acid (demo)."}]},{id:"dragonborn-blue",name:"Dragonborn (Blue)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-blue",name:"Draconic Ancestry  Blue",text:"Lightning breath; resistance to lightning (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to lightning (demo)."}]},{id:"dragonborn-brass",name:"Dragonborn (Brass)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-brass",name:"Draconic Ancestry  Brass",text:"Fire breath; resistance to fire (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to fire (demo)."}]},{id:"dragonborn-bronze",name:"Dragonborn (Bronze)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-bronze",name:"Draconic Ancestry  Bronze",text:"Lightning breath; resistance to lightning (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to lightning (demo)."}]},{id:"dragonborn-copper",name:"Dragonborn (Copper)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-copper",name:"Draconic Ancestry  Copper",text:"Acid breath; resistance to acid (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to acid (demo)."}]},{id:"dragonborn-gold",name:"Dragonborn (Gold)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-gold",name:"Draconic Ancestry  Gold",text:"Fire breath; resistance to fire (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to fire (demo)."}]},{id:"dragonborn-green",name:"Dragonborn (Green)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-green",name:"Draconic Ancestry  Green",text:"Poison breath; resistance to poison (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to poison (demo)."}]},{id:"dragonborn-red",name:"Dragonborn (Red)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-red",name:"Draconic Ancestry  Red",text:"Fire breath; resistance to fire (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to fire (demo)."}]},{id:"dragonborn-silver",name:"Dragonborn (Silver)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-silver",name:"Draconic Ancestry  Silver",text:"Cold breath; resistance to cold (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to cold (demo)."}]},{id:"dragonborn-white",name:"Dragonborn (White)",asis:{str:2,cha:1},speed:30,traits:[{id:"draconic-ancestry-white",name:"Draconic Ancestry  White",text:"Cold breath; resistance to cold (demo)."},{id:"breath-weapon",name:"Breath Weapon",text:"Exhale destructive energy (demo flavor)."},{id:"damage-resistance",name:"Damage Resistance",text:"Resistance to cold (demo)."}]},{id:"gnome",name:"Gnome",asis:{int:2},speed:25,traits:[{id:"darkvision",name:"Darkvision",text:"See in dim light 60 ft."},{id:"gnome-cunning",name:"Gnome Cunning",text:"Advantage on INT, WIS, and CHA saves against magic."}]},{id:"half-orc",name:"Half-Orc",asis:{str:2,con:1},speed:30,traits:[{id:"darkvision",name:"Darkvision",text:"See in dim light 60 ft."},{id:"menacing",name:"Menacing",text:"Proficiency in Intimidation."},{id:"relentless-endurance",name:"Relentless Endurance",text:"When reduced to 0 HP but not killed, drop to 1 HP instead (1/long rest)."},{id:"savage-attacks",name:"Savage Attacks",text:"Extra weapon die on a crit (demo flavor)."}]}],In=[{id:"barbarian",name:"Barbarian",hitDie:12,armor:["light","medium","shields"],weapons:["simple","martial"],grants:{subactions:["Rage","Reckless Attack"]},featuresByLevel:{1:[{name:"Rage",text:"+2 damage, advantage on STR checks; uses/long rest."},{name:"Unarmored Defense",text:"AC = 10 + DEX + CON when no armor; shield allowed."}],2:[{name:"Reckless Attack",text:"Gain advantage on melee STR attacks this turn; attacks against you have advantage until your next turn."},{name:"Danger Sense",text:"Advantage on DEX saves vs. effects you can see."}],3:[{name:"Primal Path",text:"Choose a subclass and gain its level 3 features."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Extra Attack",text:"Attack twice, instead of once, whenever you take the Attack action."},{name:"Fast Movement",text:"Your speed increases by 10 ft. while not wearing heavy armor."}]},acFormula:e=>e.armor==="none"?10+e.dexMod+e.conMod:void 0,saves:["str","con"],subclasses:[{id:"berserker",name:"Path of the Berserker",unlockLevel:3,grants:{subactions:["Frenzy"]}}]},{id:"ranger",name:"Ranger",hitDie:10,armor:["light","medium","shields"],weapons:["simple","martial"],grants:{subactions:["Cast Spell"]},featuresByLevel:{1:[{name:"Favored Enemy",text:"You have significant experience studying, tracking, and hunting a certain type of enemy."},{name:"Natural Explorer",text:"You are particularly familiar with one type of natural environment and adept at traveling and surviving in such regions."}],2:[{name:"Fighting Style",text:"Choose a combat style to hone your martial prowess."},{name:"Spellcasting",text:"WISbased spellcasting (halfcaster). Gains 1stlevel spells at level 2."}],3:[{name:"Ranger Archetype",text:"Choose an archetype and gain its features."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Extra Attack",text:"Attack twice, instead of once, whenever you take the Attack action."}]},saves:["str","dex"],subclasses:[{id:"hunter",name:"Hunter",unlockLevel:3},{id:"beast-master",name:"Beast Master",unlockLevel:3}]},{id:"rogue",name:"Rogue",hitDie:8,armor:["light"],weapons:["simple","hand-crossbow","longsword","rapier","shortsword"],featuresByLevel:{1:[{name:"Sneak Attack",text:"Deal extra damage once per turn when you have advantage or an ally is adjacent."},{name:"Thieves Cant",text:"Secret mix of dialect, jargon, and code that allows you to hide messages."},{name:"Expertise",text:"Choose two skills; double proficiency bonus for them."}],2:[{name:"Cunning Action",text:"Dash, Disengage, or Hide as a bonus action."}],3:[{name:"Roguish Archetype",text:"Choose an archetype and gain its features."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Uncanny Dodge",text:"Use your reaction to halve the damage from an attacker you can see."}]},saves:["dex","int"],subclasses:[{id:"thief",name:"Thief",unlockLevel:3},{id:"assassin",name:"Assassin",unlockLevel:3},{id:"arcane-trickster",name:"Arcane Trickster",unlockLevel:3}]},{id:"monk",name:"Monk",hitDie:8,armor:[],weapons:["simple","shortswords"],grants:{subactions:["Flurry of Blows","Patient Defense","Step of the Wind"]},featuresByLevel:{1:[{name:"Unarmored Defense",text:"AC = 10 + DEX + WIS while not wearing armor or a shield."},{name:"Martial Arts",text:"Use DEX for unarmed/monk weapon attacks; bonus unarmed strike."}],2:[{name:"Ki",text:"Fuel abilities like Flurry of Blows, Patient Defense, Step of the Wind."},{name:"Unarmored Movement",text:"+10 ft. movement speed while unarmored."}],3:[{name:"Monastic Tradition",text:"Choose a subclass (tradition) and gain its level 3 features."},{name:"Deflect Missiles",text:"Reduce ranged weapon damage; catch/throw sometimes."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."},{name:"Slow Fall",text:"Reduce falling damage by 5  monk level."}],5:[{name:"Extra Attack",text:"Attack twice when you take the Attack action."},{name:"Stunning Strike",text:"On a hit, spend ki to stun a creature that fails a CON save."}]},saves:["str","dex"],subclasses:[{id:"open-hand",name:"Way of the Open Hand",unlockLevel:3,grants:{subactions:[]}},{id:"shadow",name:"Way of Shadow",unlockLevel:3,grants:{subactions:[]}}]},{id:"paladin",name:"Paladin",hitDie:10,armor:["all","shields"],weapons:["simple","martial"],grants:{subactions:["Divine Smite"]},featuresByLevel:{1:[{name:"Divine Sense",text:"Detect celestials, fiends, and undead (limited uses)."},{name:"Lay on Hands",text:"Pool of healing equal to 5  paladin level."}],2:[{name:"Fighting Style",text:"Choose a combat style for a passive benefit."},{name:"Spellcasting",text:"CHAbased halfcaster; gains 1stlevel spell slots."},{name:"Divine Smite",text:"Expend a spell slot to deal radiant damage on a hit."}],3:[{name:"Sacred Oath",text:"Swear an oath (subclass) and gain Channel Divinity options."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Extra Attack",text:"Attack twice, instead of once, whenever you take the Attack action."}]},saves:["wis","cha"],subclasses:[{id:"oath-devotion",name:"Oath of Devotion",unlockLevel:3,grants:{subactions:["Channel Divinity (Devotion)"]}},{id:"oath-vengeance",name:"Oath of Vengeance",unlockLevel:3,grants:{subactions:["Channel Divinity (Vengeance)"]}}]},{id:"fighter",name:"Fighter",hitDie:10,armor:["all","shields"],weapons:["simple","martial"],grants:{subactions:["Second Wind"]},featuresByLevel:{1:[{name:"Second Wind",text:"1d10 + level selfheal, 1/short rest."},{name:"Fighting Style",text:"Choose a combat style for a passive benefit."}],2:[{name:"Action Surge",text:"Take one additional action on your turn, 1/short rest."}],3:[{name:"Martial Archetype",text:"Choose a subclass and gain its level 3 features."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Extra Attack",text:"Attack twice, instead of once, whenever you take the Attack action."}]},saves:["str","con"],subclasses:[{id:"champion",name:"Champion",unlockLevel:3,grants:{subactions:["Improved Critical"]}}]},{id:"bard",name:"Bard",hitDie:8,armor:["light"],weapons:["simple","hand crossbows","longswords","rapiers","shortswords"],grants:{subactions:["Cast Spell","Bardic Inspiration"]},featuresByLevel:{1:[{name:"Spellcasting",text:"CHAbased spellcasting. Cantrips & 1stlevel slots."},{name:"Bardic Inspiration (d6)",text:"As a bonus action, give a creature a d6 inspiration die (CHA uses/long rest)."}],2:[{name:"Jack of All Trades",text:"Add half your proficiency bonus to ability checks you are not proficient in."},{name:"Song of Rest (d6)",text:"During a short rest, allies who hear your performance regain extra 1d6 HP."}],3:[{name:"Bard College",text:"Choose a subclass and gain its level 3 features."},{name:"Expertise",text:"Choose two skills you are proficient in; your proficiency bonus is doubled for them."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Font of Inspiration",text:"Regain all uses of Bardic Inspiration on a short rest."}]},saves:["dex","cha"],subclasses:[{id:"college-of-lore",name:"College of Lore",unlockLevel:3,grants:{subactions:[]}},{id:"college-of-valor",name:"College of Valor",unlockLevel:3,grants:{subactions:[]}}]},{id:"cleric",name:"Cleric",hitDie:8,armor:["light","medium","shields"],weapons:["simple"],grants:{subactions:["Cast Spell"]},featuresByLevel:{1:[{name:"Spellcasting",text:"WISbased spellcasting. Cantrips & 1stlevel slots."},{name:"Divine Domain",text:"Choose a domain (subclass) and gain its level 1 features."}],2:[{name:"Channel Divinity (1/rest)",text:"Turn Undead; your domain adds an additional Channel Divinity option."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Destroy Undead (CR 1/2)",text:"When a turned undead of CR 1/2 or lower fails its save, it is destroyed."},{name:"Spellcasting Progression",text:"Access to higherlevel spell slots and prepared spells."}]},saves:["wis","cha"],subclasses:[{id:"life-domain",name:"Life Domain",unlockLevel:1,grants:{subactions:["Channel Divinity: Preserve Life"]}},{id:"light-domain",name:"Light Domain",unlockLevel:1,grants:{subactions:["Channel Divinity: Radiance of the Dawn"]}}]},{id:"druid",name:"Druid",hitDie:8,armor:["light","medium","shields"],weapons:["clubs","daggers","darts","javelins","maces","quarterstaff","scimitars","sickles","slings","spears"],grants:{subactions:["Cast Spell"]},featuresByLevel:{1:[{name:"Druidic",text:"Secret druidic language known to druids."},{name:"Spellcasting",text:"WISbased prepared spellcasting. Cantrips & 1stlevel slots."}],2:[{name:"Wild Shape",text:"Magically assume the shape of a beast you have seen (limited CR/time)."},{name:"Druid Circle",text:"Choose a circle (subclass) and gain its level 2 features."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Wild Shape Improvement",text:"Improved wild shape options and spellcasting progression."}]},saves:["int","wis"],subclasses:[{id:"circle-land",name:"Circle of the Land",unlockLevel:2,grants:{subactions:[]}},{id:"circle-moon",name:"Circle of the Moon",unlockLevel:2,grants:{subactions:["Combat Wild Shape"]}}]},{id:"wizard",name:"Wizard",hitDie:6,armor:[],weapons:["daggers","quarterstaff"],grants:{subactions:["Cast Spell"]},featuresByLevel:{1:[{name:"Spellcasting",text:"INT spellcasting. Cantrips & 1stlevel slots."},{name:"Arcane Recovery",text:"Recover expended slots on short rest."}],2:[{name:"Arcane Tradition",text:"Choose a subclass (school) and gain its level 2/3 features."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}],5:[{name:"Spellcasting Progression",text:"Access to higherlevel spell slots and prepared spells."}]},saves:["int","wis"],subclasses:[{id:"evocation",name:"School of Evocation",unlockLevel:2,grants:{subactions:["Sculpt Spells"]}}]},{id:"warlock",name:"Warlock",hitDie:8,armor:["light"],weapons:["simple"],grants:{subactions:["Cast Spell"]},featuresByLevel:{1:[{name:"Otherworldly Patron",text:"Form a pact with a powerful entity and gain patron features."},{name:"Pact Magic",text:"CHAbased spellcasting using pact slots; Eldritch Blast cantrip available."}],2:[{name:"Eldritch Invocations",text:"Learn special invocations to augment abilities."}],3:[{name:"Pact Boon",text:"Choose Chain, Blade, or Tome (not modeled in this demo)."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}]},saves:["wis","cha"],subclasses:[{id:"fiend",name:"The Fiend",unlockLevel:1},{id:"archfey",name:"The Archfey",unlockLevel:1},{id:"great-old-one",name:"The Great Old One",unlockLevel:1}]},{id:"sorcerer",name:"Sorcerer",hitDie:6,armor:[],weapons:["daggers","quarterstaff","light-crossbow"],grants:{subactions:["Cast Spell"]},featuresByLevel:{1:[{name:"Sorcerous Origin",text:"Choose a bloodline that grants innate magic."},{name:"Spellcasting",text:"CHAbased flexible spellcasting. Cantrips & 1stlevel slots."}],2:[{name:"Font of Magic",text:"Sorcery Points fuel metamagic and spell slot conversions."}],3:[{name:"Metamagic",text:"Alter spells using metamagic options."}],4:[{name:"Ability Score Improvement",text:"+2 to one ability or +1 to two abilities (demo text)."}]},saves:["con","cha"],subclasses:[{id:"draconic-bloodline",name:"Draconic Bloodline",unlockLevel:1},{id:"wild-magic",name:"Wild Magic",unlockLevel:1}]}],na={keen:["perception"],menacing:["intimidation"]},Bs={barbarian:{count:2,options:["animal","athletics","intimidation","nature","perception","survival"]},bard:{count:3,options:["acrobatics","animal","arcana","athletics","deception","history","insight","intimidation","investigation","medicine","nature","perception","performance","persuasion","religion","sleight","stealth","survival"]},cleric:{count:2,options:["history","insight","medicine","persuasion","religion"]},druid:{count:2,options:["arcana","animal","insight","medicine","nature","perception","religion","survival"]},fighter:{count:2,options:["acrobatics","animal","athletics","history","insight","intimidation","perception","survival"]},monk:{count:2,options:["acrobatics","athletics","history","insight","religion","stealth"]},paladin:{count:2,options:["athletics","insight","intimidation","medicine","persuasion","religion"]},ranger:{count:3,options:["animal","athletics","insight","investigation","nature","perception","stealth","survival"]},rogue:{count:4,options:["acrobatics","athletics","deception","insight","intimidation","investigation","perception","performance","persuasion","sleight","stealth"]},sorcerer:{count:2,options:["arcana","deception","insight","intimidation","persuasion","religion"]},warlock:{count:2,options:["arcana","deception","history","intimidation","investigation","nature","religion"]},wizard:{count:2,options:["arcana","history","insight","investigation","medicine","religion"]}},Ni={fighter:[{id:"fighting-style",name:"Fighting Style",level:1,picks:1,options:[{id:"archery",name:"Archery",text:"+2 to attack rolls with ranged weapons."},{id:"defense",name:"Defense",text:"+1 AC while wearing armor."},{id:"dueling",name:"Dueling",text:"+2 damage when wielding a single onehanded weapon."},{id:"great-weapon",name:"Great Weapon Fighting",text:"Reroll 1s and 2s on damage dice with twohanded weapons."},{id:"protection",name:"Protection",text:"Use a shield to impose disadvantage on an attack (reaction)."},{id:"two-weapon",name:"TwoWeapon Fighting",text:"Add ability mod to offhand damage with twoweapon fighting."}]}],paladin:[{id:"fighting-style",name:"Fighting Style",level:2,picks:1,options:[{id:"defense",name:"Defense",text:"+1 AC while wearing armor."},{id:"dueling",name:"Dueling",text:"+2 damage when wielding a single onehanded weapon."},{id:"great-weapon",name:"Great Weapon Fighting",text:"Reroll 1s and 2s on damage dice with twohanded weapons."},{id:"protection",name:"Protection",text:"Use a shield to impose disadvantage on an attack (reaction)."}]},{id:"sacred-oath",name:"Sacred Oath",level:3,picks:1,options:[{id:"oath-devotion",name:"Oath of Devotion",text:"Channel Divinity options: Sacred Weapon, Turn the Unholy."},{id:"oath-vengeance",name:"Oath of Vengeance",text:"Channel Divinity options: Abjure Enemy, Vow of Enmity."}]}],cleric:[{id:"divine-domain",name:"Divine Domain",level:1,picks:1,options:[{id:"life-domain",name:"Life Domain",text:"Healerfocused domain; Channel Divinity: Preserve Life."},{id:"light-domain",name:"Light Domain",text:"Radiant/Fire domain; Channel Divinity: Radiance of the Dawn."}]}],druid:[{id:"druid-circle",name:"Druid Circle",level:2,picks:1,options:[{id:"circle-land",name:"Circle of the Land",text:"Bonus spells and recovery tied to the land."},{id:"circle-moon",name:"Circle of the Moon",text:"Combatfocused Wild Shape improvements."}]}],bard:[{id:"bard-college",name:"Bard College",level:3,picks:1,options:[{id:"college-of-lore",name:"College of Lore",text:"Additional magical secrets and skills."},{id:"college-of-valor",name:"College of Valor",text:"Martial training with medium armor, shields, and martial weapons."}]},{id:"expertise",name:"Expertise",level:3,picks:2,options:[{id:"acrobatics",name:"Acrobatics",text:"Double proficiency in Acrobatics."},{id:"animal",name:"Animal Handling",text:"Double proficiency in Animal Handling."},{id:"arcana",name:"Arcana",text:"Double proficiency in Arcana."},{id:"athletics",name:"Athletics",text:"Double proficiency in Athletics."},{id:"deception",name:"Deception",text:"Double proficiency in Deception."},{id:"history",name:"History",text:"Double proficiency in History."},{id:"insight",name:"Insight",text:"Double proficiency in Insight."},{id:"intimidation",name:"Intimidation",text:"Double proficiency in Intimidation."},{id:"investigation",name:"Investigation",text:"Double proficiency in Investigation."},{id:"medicine",name:"Medicine",text:"Double proficiency in Medicine."},{id:"nature",name:"Nature",text:"Double proficiency in Nature."},{id:"perception",name:"Perception",text:"Double proficiency in Perception."},{id:"performance",name:"Performance",text:"Double proficiency in Performance."},{id:"persuasion",name:"Persuasion",text:"Double proficiency in Persuasion."},{id:"religion",name:"Religion",text:"Double proficiency in Religion."},{id:"sleight",name:"Sleight of Hand",text:"Double proficiency in Sleight of Hand."},{id:"stealth",name:"Stealth",text:"Double proficiency in Stealth."},{id:"survival",name:"Survival",text:"Double proficiency in Survival."}]}],monk:[{id:"monastic-tradition",name:"Monastic Tradition",level:3,picks:1,options:[{id:"open-hand",name:"Way of the Open Hand",text:"Enhance Flurry of Blows with additional effects."},{id:"shadow",name:"Way of Shadow",text:"Kipowered stealth and shadow arts."}]}],warlock:[{id:"otherworldly-patron",name:"Otherworldly Patron",level:1,picks:1,options:[{id:"fiend",name:"The Fiend",text:"Dark bargains grant destructive power."},{id:"archfey",name:"The Archfey",text:"Fey patrons grant beguiling and trickster magic."},{id:"great-old-one",name:"The Great Old One",text:"Alien entities gift telepathy and mindbending magic."}]},{id:"eldritch-invocations",name:"Eldritch Invocations",level:2,picks:2,options:[{id:"agonizing-blast",name:"Agonizing Blast",text:"Add CHA to Eldritch Blast damage (demo note)."},{id:"repelling-blast",name:"Repelling Blast",text:"Push creatures hit by Eldritch Blast (demo note)."},{id:"devil-sight",name:"Devils Sight",text:"See normally in magical darkness (demo note)."},{id:"armor-of-shadows",name:"Armor of Shadows",text:"Cast Mage Armor at will (demo note)."}]}],sorcerer:[{id:"sorcerous-origin",name:"Sorcerous Origin",level:1,picks:1,options:[{id:"draconic-bloodline",name:"Draconic Bloodline",text:"Innate draconic magic strengthens body and spells."},{id:"wild-magic",name:"Wild Magic",text:"Unpredictable surges of magic can occur when casting."}]},{id:"metamagic",name:"Metamagic",level:3,picks:2,options:[{id:"quickened-spell",name:"Quickened Spell",text:"Cast a spell as a bonus action (demo note)."},{id:"twinned-spell",name:"Twinned Spell",text:"Target a second creature with a single-target spell (demo note)."},{id:"subtle-spell",name:"Subtle Spell",text:"Cast without verbal or somatic components (demo note)."},{id:"careful-spell",name:"Careful Spell",text:"Protect allies from your spells effects (demo note)."}]}],ranger:[{id:"fighting-style",name:"Fighting Style",level:2,picks:1,options:[{id:"archery",name:"Archery",text:"+2 to attack rolls with ranged weapons."},{id:"defense",name:"Defense",text:"+1 AC while wearing armor."},{id:"dueling",name:"Dueling",text:"+2 damage when wielding a single onehanded weapon."},{id:"two-weapon",name:"TwoWeapon Fighting",text:"Add ability mod to offhand damage with twoweapon fighting."}]},{id:"ranger-archetype",name:"Ranger Archetype",level:3,picks:1,options:[{id:"hunter",name:"Hunter",text:"Gain defensive and offensive options tailored to hunting prey."},{id:"beast-master",name:"Beast Master",text:"Bond with a beast companion that fights alongside you."}]}],rogue:[{id:"expertise",name:"Expertise",level:1,picks:2,options:[{id:"acrobatics",name:"Acrobatics",text:"Double proficiency in Acrobatics."},{id:"animal",name:"Animal Handling",text:"Double proficiency in Animal Handling."},{id:"arcana",name:"Arcana",text:"Double proficiency in Arcana."},{id:"athletics",name:"Athletics",text:"Double proficiency in Athletics."},{id:"deception",name:"Deception",text:"Double proficiency in Deception."},{id:"history",name:"History",text:"Double proficiency in History."},{id:"insight",name:"Insight",text:"Double proficiency in Insight."},{id:"intimidation",name:"Intimidation",text:"Double proficiency in Intimidation."},{id:"investigation",name:"Investigation",text:"Double proficiency in Investigation."},{id:"medicine",name:"Medicine",text:"Double proficiency in Medicine."},{id:"nature",name:"Nature",text:"Double proficiency in Nature."},{id:"perception",name:"Perception",text:"Double proficiency in Perception."},{id:"performance",name:"Performance",text:"Double proficiency in Performance."},{id:"persuasion",name:"Persuasion",text:"Double proficiency in Persuasion."},{id:"religion",name:"Religion",text:"Double proficiency in Religion."},{id:"sleight",name:"Sleight of Hand",text:"Double proficiency in Sleight of Hand."},{id:"stealth",name:"Stealth",text:"Double proficiency in Stealth."},{id:"survival",name:"Survival",text:"Double proficiency in Survival."}]},{id:"roguish-archetype",name:"Roguish Archetype",level:3,picks:1,options:[{id:"thief",name:"Thief",text:"Fast Hands and Second-Story Work (demo note)."},{id:"assassin",name:"Assassin",text:"Bonus to disguises/poisons; devastating ambushes (demo note)."},{id:"arcane-trickster",name:"Arcane Trickster",text:"Learn minor spells from the wizard list (demo note)."}]}]};function Ot(e){return Math.floor((e-10)/2)}function si(e,t,n){return Math.max(t,Math.min(n,e))}function ra(e){return Array.from(new Set(e))}function Su(e){return e>=17?6:e>=13?5:e>=9?4:e>=5?3:2}function f1(e){return typeof e.hands=="number"?e.hands:0}function p1(e){const t=[],n=e.loadout.some(a=>a.type==="shield"),r=e.loadout.find(a=>a.type==="armor"),i=e.loadout.reduce((a,c)=>a+f1(c),0),s=e.loadout.find(a=>{var c;return(c=a.tags)==null?void 0:c.includes("twohanded")}),o=Kn(e.abilities,e.race,e.asi);return s&&n&&t.push({level:"error",msg:"Twohanded weapon cannot be used with a shield equipped."}),(r==null?void 0:r.id)==="chain"&&(o.str||10)<13&&t.push({level:"warn",msg:"Chain Mail requires STR 13 for optimal use (speed penalties otherwise)."}),e.classes.some(a=>a.klass.id==="wizard")&&r&&t.push({level:"warn",msg:"Wizards are not proficient with armor by default (toy rule)."}),e.classes.some(a=>a.klass.id==="barbarian")&&!r&&t.push({level:"hint",msg:"Unarmored Defense active: AC = 10 + DEX + CON. Shield allowed."}),i>2&&t.push({level:"error",msg:"You cannot hold more than two hands worth of equipment."}),t}function h1(e){var z,T;const t=Kn(e.abilities,e.race,e.asi),n=Ot(t.dex),r=Ot(t.con),i=Ot(t.str),s=e.loadout.find(P=>P.type==="armor"),o=e.loadout.find(P=>P.type==="shield"),a=Math.max(1,e.classes.reduce((P,x)=>P+(x.level||0),0)||1);let c=10+n;if(s){const P=typeof s.dexMax=="number"?s.dexMax:1/0;c=s.ac+si(n,-1/0,P)}!s&&e.classes.some(P=>P.klass.id==="barbarian")&&(c=10+n+r),o&&(c+=o.ac??2);let d=(((z=e.classes[0])==null?void 0:z.klass.hitDie)??8)+r;e.classes.forEach((P,x)=>{const E=Math.max(1,Math.floor(P.klass.hitDie/2)+1+r),I=Math.max(0,(P.level||0)-(x===0?1:0));d+=I*E}),(e.feats||[]).includes("tough")&&(d+=2*a);const f=((T=e.race)==null?void 0:T.speed)??30,p=e.classes.flatMap(P=>{var x;return((x=P.klass.grants)==null?void 0:x.subactions)??[]}),h=e.classes.flatMap(P=>{var x,E;return((E=(x=P.subclass)==null?void 0:x.grants)==null?void 0:E.subactions)??[]}),k=e.loadout.flatMap(P=>_m[P.id]??[]),S=ra([...p,...h,...k]),M=Kn(e.abilities,e.race,e.asi),g=Su(a),m=ra(e.classes.flatMap(P=>P.klass.saves??[])),w={str:Ot(M.str)+(m.includes("str")?g:0),dex:Ot(M.dex)+(m.includes("dex")?g:0),con:Ot(M.con)+(m.includes("con")?g:0),int:Ot(M.int)+(m.includes("int")?g:0),wis:Ot(M.wis)+(m.includes("wis")?g:0),cha:Ot(M.cha)+(m.includes("cha")?g:0)},v=n+((e.feats||[]).includes("alert")?5:0);return{ac:c,hp:d,speed:f,subactions:S,dexMod:n,conMod:r,strMod:i,saves:w,totalLevel:a,initiative:v}}function zn(e){return l.jsxs("div",{style:{display:"grid",gap:6,alignContent:"start",justifyItems:"start"},children:[l.jsx("div",{style:{fontSize:12,color:"var(--muted-fg, #64748b)",letterSpacing:.3,textTransform:"uppercase"},children:e.label}),e.children]})}function nn(e){return l.jsx("span",{style:{padding:"2px 8px",borderRadius:999,background:"var(--pill-bg, #f1f5f9)",color:"var(--fg)",fontSize:12,whiteSpace:"nowrap"},children:e.children})}function ye(e){const{variant:t="default",size:n="md",style:r,...i}=e,s={borderRadius:8,border:"1px solid var(--button-border)",background:t==="default"?"var(--button-active-bg)":"var(--button-bg)",color:t==="default"?"var(--button-active-fg)":"var(--button-fg)",cursor:"pointer",whiteSpace:"nowrap"};return t==="outline"&&(s.background="var(--button-bg)"),t==="ghost"&&(s.background="transparent",s.border="1px solid transparent"),n==="sm"?(s.padding="6px 10px",s.fontSize=12):n==="icon"?s.padding=6:s.padding="8px 12px",l.jsx("button",{...i,style:{...s,...r}})}function Sr(e){return l.jsx("section",{style:m1,children:e.children})}function kr(e){return l.jsx("div",{style:{padding:"14px 16px",borderBottom:"1px solid #e2e8f0"},children:e.children})}function br(e){return l.jsx("div",{style:{display:"flex",alignItems:"center",gap:10,fontWeight:700,fontSize:15},children:e.children})}function Cr(e){return l.jsx("div",{style:{padding:16,display:"grid",gap:12},children:e.children})}const nl={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid var(--muted-border)",color:"var(--fg)",background:"var(--card-bg)"},g1={padding:"2px 8px",borderRadius:999,background:"var(--pill-bg, #f1f5f9)",border:"1px solid var(--muted-border)",fontSize:12,color:"var(--fg)"},m1={border:"1px solid var(--muted-border)",borderRadius:12,background:"var(--card-bg)",boxShadow:"0 2px 8px rgba(15,23,42,0.05)"};function y1(e){const[t,n]=b.useState("power"),[r,i]=b.useState("New Hero"),[s,o]=b.useState($t[0]),[a,c]=b.useState([{klass:In[0],level:1}]),[u,d]=b.useState({str:15,dex:14,con:14,int:10,wis:10,cha:8}),[f,p]=b.useState([rr[0],rr[1]]),[h,k]=b.useState(Zr[0]),[S,M]=b.useState({}),[g,m]=b.useState("ability"),[w,v]=b.useState("grid"),[z,T]=b.useState({}),[P,x]=b.useState("list"),[E,I]=b.useState({}),[L,Y]=b.useState([]),[O,y]=b.useState([]),[C,_]=b.useState({}),[B,A]=b.useState(!0),[j,D]=b.useState([]),[H,X]=b.useState([]),[oe,Z]=b.useState(""),[we,ke]=b.useState([]),[$,fe]=b.useState(!1),ce=b.useMemo(()=>ra(rr.flatMap(R=>R.tags||[])),[]),ve=b.useMemo(()=>{const R=oe.trim().toLowerCase();return rr.filter(N=>{const ee=N.tags||[],se=R?N.name.toLowerCase().includes(R):!0,Se=we.length?we.every(Ae=>ee.includes(Ae)):!0;return se&&Se})},[oe,we]),Pe=R=>ke(N=>N.includes(R)?N.filter(ee=>ee!==R):[...N,R]),[te,je]=b.useState({}),[_e,Ee]=b.useState({}),[ot,nt]=b.useState(""),[ae,rt]=b.useState({levels:{0:!0,1:!0,2:!0,3:!0},selectedOnly:!1,schools:[],damage:[],saves:[]}),[F,K]=b.useState(!1),[W,V]=b.useState({str:0,dex:0,con:0,int:0,wis:0,cha:0}),[ie,re]=b.useState([]),[xe,le]=b.useState({}),ne="characterBuilder.v1",ge=b.useRef(!1),Be=b.useRef(null),[De,$e]=b.useState(null),[Ye,Ne]=b.useState(null),me={name:r,race:s,classes:a,abilities:u,loadout:f,background:h,spells:{known:te,prepared:_e},asi:W,feats:ie,featChoices:xe},Le=b.useMemo(()=>h1(me),[me]);b.useMemo(()=>p1(me),[me]);const Ve=b.useMemo(()=>a.filter(R=>{const N=R.klass.subclasses||[];return N.length?N.filter(se=>R.level>=se.unlockLevel).length>0&&!R.subclass:!1}),[a]);function Je(R,N){c(ee=>ee.map(se=>se.klass.id===R?{...se,subclass:N}:se))}b.useEffect(()=>{c(R=>{let N=!1;const ee=R.map(se=>{var it;const Ae=(Ni[se.klass.id]||[]).find(q=>q.name==="Divine Domain"||q.name==="Bard College"||q.name==="Otherworldly Patron"||q.name==="Sorcerous Origin"||q.name==="Ranger Archetype"||q.name==="Roguish Archetype");if(!Ae||(se.level||0)<Ae.level)return se;const Ie=(it=C[se.klass.id])==null?void 0:it[Ae.id],Oe=Array.isArray(Ie)?Ie[0]:Ie;if(!Oe)return se;const qe=(se.klass.subclasses||[]).find(q=>q.id===Oe);return qe&&(!se.subclass||se.subclass.id!==qe.id)?(N=!0,{...se,subclass:qe}):se});return N?ee:R})},[C]),b.useEffect(()=>{const R=(h==null?void 0:h.skills)??[],N=((s==null?void 0:s.traits)||[]).flatMap(Ae=>na[Ae.id]||[]),ee=new Set(R),se=new Set(N);R.filter(Ae=>!(z[Ae]||[]).includes("bg")),N.filter(Ae=>!(z[Ae]||[]).includes("race"));let Se={};T(Ae=>{const Ie={};return Object.entries(Ae).forEach(([Oe,qe])=>{const it=qe.filter(q=>q==="bg"?ee.has(Oe):q==="race"?se.has(Oe):!0);it.length&&(Ie[Oe]=it)}),R.forEach(Oe=>{Ie[Oe]=Array.from(new Set([...Ie[Oe]||[],"bg"]))}),N.forEach(Oe=>{Ie[Oe]=Array.from(new Set([...Ie[Oe]||[],"race"]))}),Se=Ie,Ie}),M(Ae=>{const Ie={};return Object.keys(Se).forEach(Oe=>{Ie[Oe]=Ae[Oe]&&Ae[Oe]!=="none"?Ae[Oe]:"prof"}),Ie})},[h,s,z]);function dt(R,N){T(ee=>{const se=ee[R]||[];return se.includes(N)?ee:{...ee,[R]:[...se,N]}}),M(ee=>({...ee,[R]:ee[R]&&ee[R]!=="none"?ee[R]:"prof"}))}function lt(R,N){let ee=!0;T(se=>{const Se=se[R]||[];if(!Se.includes(N))return se;const Ae=Se.filter(Oe=>Oe!==N);ee=Ae.length>0;const Ie={...se};return Ae.length?Ie[R]=Ae:delete Ie[R],Ie}),M(se=>{if(ee)return se;const Se={...se};return delete Se[R],Se})}b.useEffect(()=>{var R;(R=e.onCharacterChange)==null||R.call(e,me,Le)},[r,s,JSON.stringify(a),JSON.stringify(u),JSON.stringify(f),JSON.stringify(h),Le]),b.useEffect(()=>{if(!ge.current){try{const R=localStorage.getItem(ne);if(R){const N=JSON.parse(R);if(N&&typeof N=="object"){if(typeof N.mode=="string"&&n(N.mode==="guided"?"guided":"power"),typeof N.name=="string"&&i(N.name),typeof N.raceId=="string"){const ee=$t.find(se=>se.id===N.raceId);ee&&o(ee)}if(typeof N.backgroundId=="string"){const ee=Zr.find(se=>se.id===N.backgroundId);k(ee)}if(N.classes&&Array.isArray(N.classes)){const ee=[];N.classes.forEach(se=>{const Se=In.find(Oe=>Oe.id===se.klassId);if(!Se)return;const Ae=Math.max(1,Math.min(20,Number(se.level)||1));let Ie;se.subclassId&&Se.subclasses&&(Ie=Se.subclasses.find(Oe=>Oe.id===se.subclassId)),ee.push({klass:Se,level:Ae,subclass:Ie})}),ee.length&&c(ee)}if(N.abilities&&typeof N.abilities=="object"&&d(N.abilities),N.loadoutIds&&Array.isArray(N.loadoutIds)){const ee=[];N.loadoutIds.forEach(se=>{const Se=rr.find(Ae=>Ae.id===se);Se&&ee.push(Se)}),p(ee)}N.skillProf&&typeof N.skillProf=="object"&&M(N.skillProf),N.skillSources&&typeof N.skillSources=="object"&&T(N.skillSources),typeof N.skillTab=="string"&&x(N.skillTab==="sources"?"sources":"list"),typeof N.skillLayout=="string"&&v(N.skillLayout),typeof N.skillSort=="string"&&m(N.skillSort),N.classSkillPicks&&typeof N.classSkillPicks=="object"&&I(N.classSkillPicks),Array.isArray(N.bgReplPicks)&&Y(N.bgReplPicks),Array.isArray(N.raceReplPicks)&&y(N.raceReplPicks),N.classFeatureChoices&&typeof N.classFeatureChoices=="object"&&_(N.classFeatureChoices),N.knownSpells&&typeof N.knownSpells=="object"&&je(N.knownSpells),N.preparedSpells&&typeof N.preparedSpells=="object"&&Ee(N.preparedSpells),N.asiAlloc&&typeof N.asiAlloc=="object"&&V(N.asiAlloc),Array.isArray(N.selectedFeats)&&re(N.selectedFeats),N.featChoices&&typeof N.featChoices=="object"&&le(N.featChoices),typeof N.showCompleted=="boolean"&&A(N.showCompleted),Array.isArray(N.catalogTags)&&ke(N.catalogTags),typeof N.catalogQuery=="string"&&Z(N.catalogQuery),typeof N.catalogFiltersOpen=="boolean"&&fe(N.catalogFiltersOpen),N.spellFilters&&typeof N.spellFilters=="object"&&rt(ee=>({levels:N.spellFilters.levels??ee.levels,selectedOnly:N.spellFilters.selectedOnly??ee.selectedOnly,schools:Array.isArray(N.spellFilters.schools)?N.spellFilters.schools:ee.schools,damage:Array.isArray(N.spellFilters.damage)?N.spellFilters.damage:ee.damage,saves:Array.isArray(N.spellFilters.saves)?N.spellFilters.saves:ee.saves}))}}}catch{}ge.current=!0}},[]),b.useEffect(()=>{if(ge.current)try{const R={mode:t,name:r,raceId:s==null?void 0:s.id,backgroundId:(h==null?void 0:h.id)||null,classes:a.map(N=>{var ee;return{klassId:N.klass.id,level:N.level,subclassId:((ee=N.subclass)==null?void 0:ee.id)||null}}),abilities:u,loadoutIds:f.map(N=>N.id),skillProf:S,skillSources:z,skillTab:P,skillLayout:w,skillSort:g,classSkillPicks:E,bgReplPicks:L,raceReplPicks:O,classFeatureChoices:C,knownSpells:te,preparedSpells:_e,asiAlloc:W,selectedFeats:ie,featChoices:xe,showCompleted:B,catalogQuery:oe,catalogTags:we,catalogFiltersOpen:$,spellFilters:ae,_ts:Date.now()};localStorage.setItem(ne,JSON.stringify(R))}catch{}},[t,r,s,h,JSON.stringify(a),JSON.stringify(u),JSON.stringify(f),JSON.stringify(S),JSON.stringify(z),P,w,g,JSON.stringify(E),JSON.stringify(L),JSON.stringify(O),JSON.stringify(C),JSON.stringify(te),JSON.stringify(_e),JSON.stringify(W),JSON.stringify(ie),JSON.stringify(xe),B,oe,JSON.stringify(we),$,JSON.stringify(ae)]);function ct(){return{$schema:"ttrpg-builder.v1",version:1,name:r,mode:t,raceId:s==null?void 0:s.id,backgroundId:(h==null?void 0:h.id)||null,classes:a.map(R=>{var N;return{klassId:R.klass.id,level:R.level,subclassId:((N=R.subclass)==null?void 0:N.id)||null}}),abilities:u,loadoutIds:f.map(R=>R.id),skillProf:S,skillSources:z,classSkillPicks:E,bgReplPicks:L,raceReplPicks:O,classFeatureChoices:C,knownSpells:te,preparedSpells:_e,asiAlloc:W,selectedFeats:ie,featChoices:xe,skillTab:P,skillLayout:w,skillSort:g,_exportedAt:new Date().toISOString()}}function xt(){try{const R=ct(),N=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),ee=URL.createObjectURL(N),se=document.createElement("a"),Se=(r||"character").replace(/[^a-z0-9\-_. ]/gi,"_");se.href=ee,se.download=`${Se}.json`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(ee)}catch(R){try{console.error(R)}catch{}window.alert("Failed to export JSON.")}}function ht(R){if(!R||typeof R!="object")throw new Error("Invalid JSON object");const N=(ee,se)=>R[ee]!==void 0?R[ee]:se;Kt();try{typeof N("mode")=="string"&&n(N("mode")==="guided"?"guided":"power"),typeof N("name")=="string"&&i(N("name"));const ee=N("raceId")||void 0,se=N("raceName")||N("race")||void 0;if(ee||se){const Ce=ee?$t.find(Te=>Te.id===ee):$t.find(Te=>Te.name.toLowerCase()===String(se).toLowerCase());Ce&&o(Ce)}const Se=N("backgroundId",null),Ae=N("backgroundName")||N("background")||void 0;if(Se!==void 0||Ae){const Ce=Se?Zr.find(Te=>Te.id===Se):Ae?Zr.find(Te=>Te.name.toLowerCase()===String(Ae).toLowerCase()):void 0;k(Ce)}const Ie=Array.isArray(N("classes"))?N("classes"):[];if(Ie.length){const Ce=[];Ie.forEach(Te=>{const Ue=Te.klassId||Te.classId||void 0,Xe=Te.klassName||Te.className||Te.klass||void 0,et=Ue?In.find(pn=>pn.id===Ue):Xe?In.find(pn=>pn.name.toLowerCase()===String(Xe).toLowerCase()):void 0;if(!et)return;const Ke=Math.max(1,Math.min(20,Number(Te.level)||1));let Jt;const yt=Te.subclassId,fn=Te.subclassName||Te.subclass;et.subclasses&&(yt||fn)&&(Jt=yt?et.subclasses.find(pn=>pn.id===yt):et.subclasses.find(pn=>pn.name.toLowerCase()===String(fn).toLowerCase())),Ce.push({klass:et,level:Ke,subclass:Jt})}),Ce.length&&c(Ce)}const Oe=N("abilities");Oe&&typeof Oe=="object"&&d(Oe);const qe=N("loadoutIds"),it=N("loadoutNames")||N("loadout");if(Array.isArray(qe)||Array.isArray(it)){const Ce=[];(Array.isArray(qe)?qe:Array.isArray(it)?it:[]).forEach(Ue=>{const Xe=rr.find(et=>et.id===Ue)||rr.find(et=>String(et.name).toLowerCase()===String(Ue).toLowerCase());Xe&&Ce.push(Xe)}),Ce.length&&p(Ce)}const q=N("skillProf");q&&typeof q=="object"&&M(q);const G=N("skillSources");G&&typeof G=="object"&&T(G);const Q=N("classSkillPicks");Q&&typeof Q=="object"&&I(Q);const J=N("bgReplPicks");Array.isArray(J)&&Y(J);const de=N("raceReplPicks");Array.isArray(de)&&y(de);const be=N("classFeatureChoices");be&&typeof be=="object"&&_(be);const he=N("knownSpells")||R.spells&&R.spells.known;he&&typeof he=="object"&&je(he);const ze=N("preparedSpells")||R.spells&&R.spells.prepared;ze&&typeof ze=="object"&&Ee(ze);const Fe=N("asiAlloc")||N("asi");Fe&&typeof Fe=="object"&&V(Fe);const He=N("selectedFeats")||N("feats");if(Array.isArray(He)){const Ce=He.map(Te=>{const Ue=qr.find(Xe=>Xe.id===Te||Xe.name.toLowerCase()===String(Te).toLowerCase());return Ue?Ue.id:String(Te)});re(Ce)}const We=N("featChoices");We&&typeof We=="object"&&le(We),typeof N("skillTab")=="string"&&x(N("skillTab")==="sources"?"sources":"list"),typeof N("skillLayout")=="string"&&v(N("skillLayout")),typeof N("skillSort")=="string"&&m(N("skillSort"))}catch(ee){throw ee}}function jt(R){var se;const N=(se=R.target.files)==null?void 0:se[0];if(!N)return;const ee=new FileReader;ee.onload=()=>{try{const Se=String(ee.result||""),Ae=JSON.parse(Se);ht(Ae),window.alert("Character imported.")}catch(Se){try{console.error(Se)}catch{}window.alert("Failed to import JSON. Please ensure the file matches the builder schema.")}finally{try{Be.current&&(Be.current.value="")}catch{}}},ee.onerror=()=>{window.alert("Failed to read file.");try{Be.current&&(Be.current.value="")}catch{}},ee.readAsText(N)}function Wt(R){const N=$t.find(q=>q.name===R.race)||s,ee=Zr.find(q=>q.name===R.background)||h,se=Array.isArray(R.levels)?R.levels:[],Se={};se.forEach(q=>{const G=String(q.className||"").trim();G&&(Se[G]=(Se[G]||0)+1)});const Ae=[];Object.entries(Se).forEach(([q,G])=>{const Q=In.find(J=>J.name===q);Q&&Ae.push({klass:Q,level:G})}),Ae.length||Ae.push({klass:In[0],level:1});const Ie=[];se.forEach(q=>{(Array.isArray(q.feats)?q.feats:[]).forEach(Q=>{if(Q&&typeof Q=="string"){const J=qr.find(de=>de.id===Q||de.name.toLowerCase()===Q.toLowerCase());Ie.push(J?J.id:Q)}})});const Oe={},qe={};return se.slice().sort((q,G)=>(Number(q.level)||0)-(Number(G.level)||0)).forEach(q=>{const G=Array.isArray(q.featureChoices)?q.featureChoices:[];if(!G.length)return;const Q=In.find(de=>de.name===q.className),J=Q==null?void 0:Q.id;G.forEach(de=>{var be;if(!(!de||!J)){if(de.kind==="fighting-style"){const ze=(Ni[J]||[]).find(He=>He.id==="fighting-style"),Fe=String(de.style||"").trim().toLowerCase();if(ze&&Fe){const He=ze.options.find(We=>We.id===Fe||We.name.toLowerCase()===Fe);if(He){const We=(be=Oe[J])==null?void 0:be[ze.id];if((ze.picks||1)>1){const Ce=Array.isArray(We)?We:We?[We]:[],Te=Array.from(new Set([...Ce,He.id]));Oe[J]={...Oe[J]||{},[ze.id]:Te}}else Oe[J]={...Oe[J]||{},[ze.id]:He.id}}}}else if(de.kind==="subclass"){const ze=(Ni[J]||[]).find(He=>["sacred-oath","divine-domain","bard-college","monastic-tradition","druid-circle","roguish-archetype","ranger-archetype","sorcerous-origin","otherworldly-patron"].includes(He.id)),Fe=String(de.subclass||"").trim().toLowerCase();if(ze&&Fe){const He=ze.options.find(We=>We.id===Fe||We.name.toLowerCase()===Fe||We.name.toLowerCase().includes(Fe));He&&(Oe[J]={...Oe[J]||{},[ze.id]:He.id})}}else if(de.kind==="skill-proficiency"){const he=Array.isArray(de.skills)?de.skills:[],ze=qe[J]||[];he.forEach(Fe=>{const He=hn.find(We=>We.name.toLowerCase()===String(Fe).toLowerCase()||We.id===String(Fe).toLowerCase());He&&!ze.includes(He.id)&&ze.push(He.id)}),qe[J]=ze}}})}),{nextRace:N,nextBg:ee,nextClasses:Ae,nextFeats:Ie,nextCfc:Oe,nextClassSkillPicks:qe}}function un(R){const N={};return R.forEach(se=>{N[se.klass.name]=(N[se.klass.name]||0)+(se.level||0)}),Object.entries(N).sort((se,Se)=>se[0].localeCompare(Se[0])).map(([se,Se])=>`${se} x${Se}`).join(", ")||"(none)"}function tn(R){var q,G,Q,J;const N=[];((q=R.nextRace)==null?void 0:q.id)!==(s==null?void 0:s.id)&&N.push({key:"race",label:"Race",before:(s==null?void 0:s.name)||"(none)",after:((G=R.nextRace)==null?void 0:G.name)||"(none)"}),(((Q=R.nextBg)==null?void 0:Q.id)||null)!==((h==null?void 0:h.id)||null)&&N.push({key:"background",label:"Background",before:(h==null?void 0:h.name)||"(none)",after:((J=R.nextBg)==null?void 0:J.name)||"(none)"});const ee=un(a),se=un(R.nextClasses);ee!==se&&N.push({key:"classes",label:"Classes",before:ee,after:se});const Se=(ie||[]).slice().sort(),Ae=(R.nextFeats||[]).slice().sort();if(JSON.stringify(Se)!==JSON.stringify(Ae)){const de=be=>{var he;return((he=qr.find(ze=>ze.id===be))==null?void 0:he.name)||be};N.push({key:"feats",label:"Feats",before:Se.map(de).join(", ")||"(none)",after:Ae.map(de).join(", ")||"(none)"})}const Ie=JSON.stringify(C||{}),Oe=JSON.stringify(R.nextCfc||{});Ie!==Oe&&N.push({key:"featureChoices",label:"Class feature decisions",before:"(current)",after:"(from planner)"});const qe=JSON.stringify(E||{}),it=JSON.stringify(R.nextClassSkillPicks||{});return qe!==it&&N.push({key:"classSkills",label:"Class skill picks",before:"(current)",after:"(from planner)"}),N}function dn(R){Kt(),o(R.nextRace),k(R.nextBg),c(R.nextClasses),re(R.nextFeats),R.nextCfc&&Object.keys(R.nextCfc).length&&_(R.nextCfc),R.nextClassSkillPicks&&Object.keys(R.nextClassSkillPicks).length&&(I(R.nextClassSkillPicks),Object.entries(R.nextClassSkillPicks).forEach(([N,ee])=>{ee.forEach(se=>{try{dt(se,`class:${N}`)}catch{}})}))}b.useEffect(()=>{const R=e.importPlan;if(!R)return;const N=typeof R._ts=="number"?R._ts:Date.now();if(!(Ye&&N===Ye))try{const ee=Wt(R);if(R._origin==="planner-passive"){const se=tn(ee);if(Ne(N),se.length===0){$e(null);return}$e({plan:R,diff:se,mapping:ee,ts:N});return}Ne(N),dn(ee)}catch{}},[JSON.stringify(e.importPlan),Ye]);function Kt(){D(R=>[...R,JSON.stringify(me)]),X([])}function ut(){if(!j.length)return;const R=j[j.length-1];X(ee=>[JSON.stringify(me),...ee]),D(ee=>ee.slice(0,-1));const N=JSON.parse(R);i(N.name),o(N.race),c(N.classes),d(N.abilities),p(N.loadout)}function Ut(){if(!H.length)return;const R=H[0];D(ee=>[...ee,JSON.stringify(me)]),X(ee=>ee.slice(1));const N=JSON.parse(R);i(N.name),o(N.race),c(N.classes),d(N.abilities),p(N.loadout)}return l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx(Ei,{size:18}),l.jsx("div",{style:{fontWeight:600},children:"Character Builder"}),l.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8,fontSize:12,color:"#64748b"},children:[l.jsx("span",{children:"Guided"}),l.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[l.jsx("input",{type:"checkbox",checked:t==="power",onChange:R=>n(R.target.checked?"power":"guided")}),l.jsx("span",{children:"Power"})]}),l.jsxs(ye,{size:"sm",variant:"outline",onClick:ut,children:[l.jsx(d1,{size:16,style:{marginRight:6}}),"Undo"]}),l.jsxs(ye,{size:"sm",variant:"outline",onClick:Ut,children:[l.jsx(n1,{size:16,style:{marginRight:6}}),"Redo"]}),l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>{if(window.confirm("Reset character to defaults? This clears saved Builder data.")){try{localStorage.removeItem(ne)}catch{}n("power"),i("New Hero"),o($t[0]),c([{klass:In[0],level:1}]),d({str:15,dex:14,con:14,int:10,wis:10,cha:8}),p([rr[0],rr[1]]),k(Zr[0]),M({}),T({}),x("list"),v("grid"),m("ability"),I({}),Y([]),y([]),_({}),je({}),Ee({}),V({str:0,dex:0,con:0,int:0,wis:0,cha:0}),re([]),le({}),A(!0),Z(""),ke([]),fe(!1),D([]),X([])}},children:"Reset Character"}),l.jsxs(ye,{size:"sm",onClick:Kt,children:[l.jsx(o1,{size:16,style:{marginRight:6}}),"Save Draft"]}),l.jsx(ye,{size:"sm",variant:"outline",onClick:xt,children:"Export JSON"}),l.jsx("input",{ref:Be,type:"file",accept:"application/json",style:{display:"none"},onChange:jt}),l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>{var R;return(R=Be.current)==null?void 0:R.click()},children:"Import JSON"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:16,width:"100%"},children:[l.jsxs("div",{style:{display:"grid",gap:12,minWidth:0,flex:"1 1 auto"},children:[l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs(br,{children:[l.jsx(mp,{size:16,style:{marginRight:6}}),"Basics"]})}),l.jsx(Cr,{children:l.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"2fr 1fr 1fr",alignItems:"start",alignContent:"start"},children:[l.jsx(zn,{label:"Character Name",children:l.jsx("input",{value:r,onChange:R=>i(R.target.value),style:nl})}),l.jsx(zn,{label:"Race",children:l.jsx(k1,{value:s,onChange:o})}),l.jsx(zn,{label:"Background",children:l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:Zr.map(R=>l.jsx(ye,{size:"sm",variant:(h==null?void 0:h.id)===R.id?"default":"outline",onClick:()=>k(R),children:R.name},R.id))})}),l.jsx("div",{style:{gridColumn:"1 / -1"},children:l.jsx(S1,{classes:a,onChange:c})}),l.jsx(v1,{abilities:u,onChange:d,race:s,asi:W})]})})]}),(()=>{const R=new Set(Object.keys(z)),N=(h==null?void 0:h.skills)??[],ee=N.filter(J=>!R.has(J)),se=N.filter(J=>R.has(J)),Se=((s==null?void 0:s.traits)||[]).flatMap(J=>na[J.id]||[]),Ae=Se.filter(J=>!(z[J]||[]).length),Ie=Se.filter(J=>(z[J]||[]).some(de=>de!=="race"&&de!=="race-pick"&&de!=="manual")),Oe=[];a.forEach(J=>{const de=Bs[J.klass.id];if(!de)return;const he=(E[J.klass.id]||[]).filter(Boolean),ze=Math.max(0,de.count-he.length),Fe=de.options;Oe.push({klassId:J.klass.id,klassName:J.klass.name,need:ze,count:de.count,options:Fe})});const qe=[];a.forEach(J=>{(Ni[J.klass.id]||[]).forEach(be=>{var he;if((J.level||0)>=be.level){const ze=(he=C[J.klass.id])==null?void 0:he[be.id];qe.push({klassId:J.klass.id,klassName:J.klass.name,decision:be,selected:ze})}})});const q=hn.map(J=>J.id),G=Math.max(0,Ie.length-O.length),Q=Oe.reduce((J,de)=>J+de.need,0)+G+qe.filter(J=>J.selected?Array.isArray(J.selected)?J.selected.length<(J.decision.picks||1):!1:!0).length>0;return l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsxs(br,{children:[l.jsx(Ei,{size:16,style:{marginRight:6}}),"Pending Choices"]}),l.jsx("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:l.jsx(ye,{size:"sm",variant:B?"default":"outline",onClick:()=>A(J=>!J),children:B?"Show Completed: On":"Show Completed: Off"})})]})}),l.jsx(Cr,{children:l.jsxs("div",{style:{display:"grid",gap:12},children:[!Q&&l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"No pending choices. You can still review selections here."}),B&&l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsxs("div",{style:{fontWeight:600},children:["Background: ",h==null?void 0:h.name]}),ee.length>0&&l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Grants: ",ee.map(J=>{var de;return((de=hn.find(be=>be.id===J))==null?void 0:de.name)||J}).join(", ")," (will be applied)"]}),se.length>0&&l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Conflicts detected: ",se.map(J=>{var de;return((de=hn.find(be=>be.id===J))==null?void 0:de.name)||J}).join(", "),". This background doesn't grant alternatives."]})]}),Se.length>0&&(B||Ae.length>0||Ie.length>0)&&l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsxs("div",{style:{fontWeight:600},children:["Race: ",s==null?void 0:s.name]}),Ae.length>0&&l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Grants: ",Ae.map(J=>{var de;return((de=hn.find(be=>be.id===J))==null?void 0:de.name)||J}).join(", ")," (will be applied)"]}),Ie.length>0&&l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Conflicts detected: ",Ie.map(J=>{var de;return((de=hn.find(be=>be.id===J))==null?void 0:de.name)||J}).join(", "),". Pick ",Ie.length," replacement",Ie.length>1?"s":"",":",l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:6},children:q.map(J=>{var Te;const de=O.includes(J),be=L.includes(J),he=O.length>=Ie.length,He=(z[J]||[]).some(Ue=>Ue!=="race"&&Ue!=="race-pick"&&Ue!=="manual")&&!de,We=He||be||he&&!de,Ce={};return He&&(Ce.style={background:"#f97316",color:"white",borderColor:"#f97316"}),l.jsx(ye,{size:"sm",variant:de?"default":"outline",disabled:We,onClick:()=>{He||be||(y(Ue=>de?Ue.filter(Xe=>Xe!==J):Ue.length<Ie.length?[...Ue,J]:Ue),de?lt(J,"race-pick"):dt(J,"race-pick"))},...Ce,children:((Te=hn.find(Ue=>Ue.id===J))==null?void 0:Te.name)||J},J)})}),l.jsxs("div",{style:{marginTop:6},children:["Selected ",O.length," / ",Ie.length]})]})]}),Oe.filter(J=>B||J.need>0).length>0&&l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsx("div",{style:{fontWeight:600},children:"Class Skills"}),Oe.filter(J=>B||J.need>0).map(({klassId:J,klassName:de,need:be,count:he,options:ze})=>l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:[de,": ",be>0?`pick ${be}`:B?"complete":null]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:ze.map(Fe=>{var Jt;const He=E[J]||[],We=He.includes(Fe),Ue=(z[Fe]||[]).some(yt=>yt!==`class:${J}`&&yt!=="manual")&&!We,Xe=He.length>=he,et=Ue||Xe&&!We,Ke={};return Ue&&(Ke.style={background:"#f97316",color:"white",borderColor:"#f97316"}),l.jsx(ye,{size:"sm",variant:We?"default":"outline",disabled:et,onClick:()=>{Ue||(I(yt=>{const fn=[...yt[J]||[]],pn=We?fn.filter(ws=>ws!==Fe):fn.length<he?[...fn,Fe]:fn;return{...yt,[J]:pn}}),We?lt(Fe,`class:${J}`):dt(Fe,`class:${J}`))},...Ke,children:((Jt=hn.find(yt=>yt.id===Fe))==null?void 0:Jt.name)||Fe},Fe)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Selected ",(E[J]||[]).length," / ",he]})]},J))]}),(()=>{const J=[];if(a.forEach(be=>{(Ni[be.klass.id]||[]).forEach(ze=>{var Fe;if((be.level||0)>=ze.level){const He=(Fe=C[be.klass.id])==null?void 0:Fe[ze.id];J.push({klassId:be.klass.id,klassName:be.klass.name,decision:ze,selected:He})}})}),!J.length)return null;const de=J.filter(({decision:be,selected:he})=>{const ze=be.picks||1,Fe=Array.isArray(he)?he.length:he?1:0;return B||Fe<ze});return de.length?l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsx("div",{style:{fontWeight:600},children:"Class Feature Decisions"}),de.map(({klassId:be,klassName:he,decision:ze,selected:Fe})=>l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:[he,": ",ze.name," ",(()=>{const He=ze.picks||1,We=Array.isArray(Fe)?Fe.length:Fe?1:0;return We>=He?B?"(complete)":"":`(pick ${He-We} more)`})()]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:ze.options.map(He=>{const We=ze.picks||1,Ce=Array.isArray(Fe)?Fe:Fe?[Fe]:[],Te=Ce.includes(He.id),Ue=Ce.length>=We;return l.jsx(ye,{size:"sm",variant:Te?"default":"outline",disabled:!Te&&Ue,onClick:()=>{_(Xe=>{const et={...Xe[be]||{}},Ke=et[ze.id],Jt=Array.isArray(Ke)?Ke:Ke?[Ke]:[];let yt;return Te?yt=Jt.filter(fn=>fn!==He.id):yt=Ue?Jt:[...Jt,He.id],et[ze.id]=We===1?yt[0]||"":yt,{...Xe,[be]:et}})},title:He.text,style:{opacity:!Te&&Ue?.6:1},children:He.name},He.id)})})]},`${be}:${ze.id}`))]}):null})(),l.jsx("div",{style:{display:"flex",gap:8},children:l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{Y([]),y([]),I({}),_({})},children:"Reset Selections"})})]})})]})})(),Ve.length?l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs(br,{children:[l.jsx(Ei,{size:16,style:{marginRight:6}}),"Class Feature Choices"]})}),l.jsxs(Cr,{children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"You have class choices to make."}),l.jsx("div",{style:{display:"grid",gap:8,marginTop:8},children:Ve.map(R=>l.jsxs("div",{style:{padding:8,borderRadius:10,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"grid",gap:8},children:[l.jsxs("div",{style:{fontWeight:600},children:[R.klass.name,": Choose a Subclass"]}),l.jsx("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:(R.klass.subclasses||[]).filter(N=>R.level>=N.unlockLevel).map(N=>{var ee;return l.jsx(ye,{size:"sm",variant:((ee=R.subclass)==null?void 0:ee.id)===N.id?"default":"outline",onClick:()=>Je(R.klass.id,N),children:N.name},N.id)})})]},R.klass.id))})]})]}):null,(()=>{var it;const R=new Set([4,8,12,16,19]),N=a.reduce((q,G)=>q+Array.from(R).filter(Q=>G.level>=Q).length,0),ee=N*2,se=["str","dex","con","int","wis","cha"].reduce((q,G)=>q+(W[G]||0),0)+ie.length*2,Se=Math.max(0,ee-se),Ae=Kn(u,s,W),Ie=q=>Se>0&&Ae[q]+1<=20,Oe=q=>(W[q]||0)>0,qe=q=>{re(G=>G.includes(q)?G.filter(J=>J!==q):Se<2?G:[...G,q])};return N===0?null:l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs(br,{children:[l.jsx(Ei,{size:16,style:{marginRight:6}}),"ASI & Feats"]})}),l.jsx(Cr,{children:l.jsxs("div",{style:{display:"grid",gap:12},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsxs(nn,{children:["ASI slots ",N]}),l.jsxs(nn,{children:["Points ",se," / ",ee]}),l.jsxs(nn,{children:["Remaining ",Se]})]}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:8},children:["str","dex","con","int","wis","cha"].map(q=>l.jsxs("div",{style:{padding:8,borderRadius:10,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"grid",gap:6},children:[l.jsx("div",{style:{fontSize:10,textTransform:"uppercase",color:"#64748b"},children:q}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx(ye,{size:"icon",variant:"outline",onClick:()=>V(G=>({...G,[q]:Math.max(0,(G[q]||0)-1)})),disabled:!Oe(q),children:""}),l.jsxs("div",{style:{fontWeight:600,minWidth:44,textAlign:"center"},children:[Ae[q],W[q]?` (+${W[q]})`:""]}),l.jsx(ye,{size:"icon",variant:"outline",onClick:()=>{Ie(q)&&V(G=>({...G,[q]:(G[q]||0)+1}))},disabled:!Ie(q),children:"+"})]}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["mod ",Ot(Ae[q])>=0?"+":"",Ot(Ae[q])]})]},q))}),l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Feats (each costs 2 points)"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:qr.map(q=>{const G=ie.includes(q.id),Q=Se<2;return l.jsx(ye,{size:"sm",variant:G?"default":"outline",disabled:!G&&Q,onClick:()=>qe(q.id),title:q.text,style:{opacity:!G&&Q?.6:1},children:q.name},q.id)})}),ie.includes("prodigy")?l.jsxs("div",{style:{marginTop:6,padding:8,borderRadius:8,border:"1px solid #e2e8f0",background:"#fff"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b",marginBottom:6},children:"Prodigy: choose a skill to gain proficiency (or expertise if already proficient)"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:hn.map(q=>{const G=xe.prodigySkill===q.id;return l.jsx(ye,{size:"sm",variant:G?"default":"outline",onClick:()=>le(Q=>({...Q,prodigySkill:q.id})),children:q.name},q.id)})}),xe.prodigySkill?l.jsxs("div",{style:{marginTop:6,fontSize:12,color:"#64748b"},children:["Selected: ",(it=hn.find(q=>q.id===xe.prodigySkill))==null?void 0:it.name]}):null]}):null]}),ie.length>0?l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Selected feats: ",ie.map(q=>{var G;return((G=qr.find(Q=>Q.id===q))==null?void 0:G.name)||q}).join(", ")]}):null,l.jsx("div",{style:{display:"flex",gap:8},children:l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{V({str:0,dex:0,con:0,int:0,wis:0,cha:0}),re([])},children:"Reset ASI/Feats"})})]})})]})})(),(()=>{var Ie,Oe,qe,it,q;const R=a.filter(G=>(G.level||0)>=1&&["bard","cleric","wizard","druid","warlock","paladin","sorcerer","ranger"].includes(G.klass.id));if(!R.length)return null;const N=G=>{const Q=Kn(u,s,W),J=G==="bard"?Q.cha:G==="cleric"||G==="druid"?Q.wis:G==="warlock"||G==="paladin"||G==="sorcerer"?Q.cha:G==="ranger"?Q.wis:Q.int;return{mod:Ot(J),score:J}},ee=Su(Le.totalLevel),se={bard:{l2:3,l3:5},cleric:{l2:3,l3:5},druid:{l2:3,l3:5},wizard:{l2:3,l3:5},sorcerer:{l2:3,l3:5},warlock:{l2:3,l3:5},paladin:{l2:5,l3:9},ranger:{l2:5,l3:9}},Se={bard:{cantrips:2,level1:2,level2:2,level3:2,prepared1:0,prepared2:0,prepared3:0},cleric:{cantrips:3,level1:0,level2:0,level3:0,prepared1:Math.max(1,N("cleric").mod+(((Ie=a.find(G=>G.klass.id==="cleric"))==null?void 0:Ie.level)||1)),prepared2:0,prepared3:0},wizard:{cantrips:3,level1:3,level2:2,level3:2,prepared1:0,prepared2:0,prepared3:0},druid:{cantrips:2,level1:0,level2:0,level3:0,prepared1:Math.max(1,N("druid").mod+(((Oe=a.find(G=>G.klass.id==="druid"))==null?void 0:Oe.level)||1)),prepared2:0,prepared3:0},warlock:{cantrips:2,level1:2,level2:2,level3:0,prepared1:0,prepared2:0,prepared3:0},paladin:{cantrips:0,level1:0,level2:0,level3:0,prepared1:Math.max(1,N("paladin").mod+(((qe=a.find(G=>G.klass.id==="paladin"))==null?void 0:qe.level)||1)),prepared2:0,prepared3:0},sorcerer:{cantrips:4,level1:2,level2:2,level3:2,prepared1:0,prepared2:0,prepared3:0},ranger:{cantrips:0,level1:0,level2:0,level3:0,prepared1:Math.max(1,N("ranger").mod+(((it=a.find(G=>G.klass.id==="ranger"))==null?void 0:it.level)||1)),prepared2:0,prepared3:0}},Ae=(G,Q,J=!1)=>{J?Ee(de=>{const be=de[G]||[],he=be.includes(Q);return{...de,[G]:he?be.filter(ze=>ze!==Q):[...be,Q]}}):je(de=>{const be=de[G]||[],he=be.includes(Q);return{...de,[G]:he?be.filter(ze=>ze!==Q):[...be,Q]}})};return l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsxs(br,{children:[l.jsx(Ei,{size:16,style:{marginRight:6}}),"Spells"]}),l.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:[(()=>{var Q,J,de;const G=!ae.levels[0]||!ae.levels[1]||!ae.levels[2]||!ae.levels[3]||ae.selectedOnly||(((Q=ae.schools)==null?void 0:Q.length)||0)>0||(((J=ae.damage)==null?void 0:J.length)||0)>0||(((de=ae.saves)==null?void 0:de.length)||0)>0;return l.jsx(ye,{size:"sm",variant:F||G?"default":"outline",onClick:()=>K(be=>!be),"aria-haspopup":"menu","aria-expanded":F,title:"Filters",children:"Filters"})})(),l.jsx("input",{value:ot,onChange:G=>nt(G.target.value),placeholder:"Search spells...",style:{...nl,width:240,padding:"6px 10px"},"aria-label":"Search spells"})]})]})}),F?l.jsxs("div",{style:{borderTop:"1px solid var(--muted-border)",background:"var(--card-bg)",padding:10,display:"grid",gap:8},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Levels"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[l.jsx(ye,{size:"sm",variant:ae.levels[0]?"default":"outline",onClick:()=>rt(G=>({...G,levels:{...G.levels,0:!G.levels[0]}})),children:"Cantrips"}),l.jsx(ye,{size:"sm",variant:ae.levels[1]?"default":"outline",onClick:()=>rt(G=>({...G,levels:{...G.levels,1:!G.levels[1]}})),children:"Level 1"}),l.jsx(ye,{size:"sm",variant:ae.levels[2]?"default":"outline",onClick:()=>rt(G=>({...G,levels:{...G.levels,2:!G.levels[2]}})),children:"Level 2"}),l.jsx(ye,{size:"sm",variant:ae.levels[3]?"default":"outline",onClick:()=>rt(G=>({...G,levels:{...G.levels,3:!G.levels[3]}})),children:"Level 3"}),l.jsx(ye,{size:"sm",variant:ae.selectedOnly?"default":"outline",onClick:()=>rt(G=>({...G,selectedOnly:!G.selectedOnly})),children:"Selected Only"})]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Schools"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[["abjuration","conjuration","divination","enchantment","evocation","illusion","necromancy","transmutation"].map(G=>{const Q=ae.schools.includes(G);return l.jsx(ye,{size:"sm",variant:Q?"default":"outline",onClick:()=>rt(J=>({...J,schools:Q?J.schools.filter(de=>de!==G):[...J.schools,G]})),children:G},G)}),ae.schools.length?l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>rt(G=>({...G,schools:[]})),children:"Clear"}):null]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Damage"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[["acid","bludgeoning","cold","fire","force","lightning","necrotic","piercing","poison","psychic","radiant","slashing","thunder"].map(G=>{const Q=ae.damage.includes(G);return l.jsx(ye,{size:"sm",variant:Q?"default":"outline",onClick:()=>rt(J=>({...J,damage:Q?J.damage.filter(de=>de!==G):[...J.damage,G]})),children:G},G)}),ae.damage.length?l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>rt(G=>({...G,damage:[]})),children:"Clear"}):null]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Saves"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[["str","dex","con","int","wis","cha"].map(G=>{const Q=ae.saves.includes(G);return l.jsx(ye,{size:"sm",variant:Q?"default":"outline",onClick:()=>rt(J=>({...J,saves:Q?J.saves.filter(de=>de!==G):[...J.saves,G]})),children:G.toUpperCase()},G)}),(()=>{const G=ae.saves.includes("none");return l.jsx(ye,{size:"sm",variant:G?"default":"outline",onClick:()=>rt(Q=>({...Q,saves:G?Q.saves.filter(J=>J!=="none"):[...Q.saves,"none"]})),children:"None"})})(),(q=ae.saves)!=null&&q.length?l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>rt(G=>({...G,saves:[]})),children:"Clear"}):null]})]})]}):null,l.jsx(Cr,{children:l.jsx("div",{style:{display:"grid",gap:12},children:R.map(G=>{var tf;const Q=G.klass.id,{mod:J,score:de}=N(Q),be=8+ee+J,he=ee+J,ze=ot.trim().toLowerCase(),Fe=ue=>!ze||ue.name.toLowerCase().includes(ze)||ue.text.toLowerCase().includes(ze),He=ue=>{var Et,xr,nf;const Ge=Da[ue.id]||{};if((((Et=ae.schools)==null?void 0:Et.length)||0)>0&&(!Ge.school||!ae.schools.includes(Ge.school))||(((xr=ae.damage)==null?void 0:xr.length)||0)>0&&!(Ge.damageTypes||[]).some(Ss=>ae.damage.includes(Ss)))return!1;if((((nf=ae.saves)==null?void 0:nf.length)||0)>0){const rf=ae.saves.includes("none"),Ss=Ge.save||"none";if(rf){if(Ss!=="none"){const sf=ae.saves.filter(hv=>hv!=="none");if(sf.length===0||!sf.includes(Ss))return!1}}else if(!ae.saves.includes(Ss))return!1}return!0},We=tl.filter(ue=>ue.level===0&&ue.classes.includes(Q)&&Fe(ue)&&He(ue)),Ce=tl.filter(ue=>ue.level===1&&ue.classes.includes(Q)&&Fe(ue)&&He(ue)),Te=tl.filter(ue=>ue.level===2&&ue.classes.includes(Q)&&Fe(ue)&&He(ue)),Ue=tl.filter(ue=>ue.level===3&&ue.classes.includes(Q)&&Fe(ue)&&He(ue)),Xe=te[Q]||[],et=_e[Q]||[],Ke=Se[Q]||{cantrips:0,level1:0,level2:0,level3:0,prepared1:0,prepared2:0,prepared3:0},Jt=Xe.filter(ue=>We.some(Ge=>Ge.id===ue)).length,yt=Xe.filter(ue=>Ce.some(Ge=>Ge.id===ue)).length,fn=Xe.filter(ue=>Te.some(Ge=>Ge.id===ue)).length,pn=Xe.filter(ue=>Ue.some(Ge=>Ge.id===ue)).length,ws=et.filter(ue=>Ce.some(Ge=>Ge.id===ue)).length,qd=et.filter(ue=>Te.some(Ge=>Ge.id===ue)).length,ef=et.filter(ue=>Ue.some(Ge=>Ge.id===ue)).length,$o=((tf=a.find(ue=>ue.klass.id===Q))==null?void 0:tf.level)||1;return l.jsxs("div",{style:{padding:8,borderRadius:12,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"grid",gap:8},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontWeight:600},children:G.klass.name}),l.jsxs(nn,{children:["Spell DC ",be]}),l.jsxs(nn,{children:["Spell Atk ",he>=0?`+${he}`:he]}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Casting stat ",Q==="bard"?"CHA":Q==="cleric"||Q==="druid"?"WIS":Q==="warlock"||Q==="paladin"||Q==="sorcerer"?"CHA":Q==="ranger"?"WIS":"INT"," (",de," | ",J>=0?`+${J}`:J,")"]})]}),!!Ke.cantrips&&ae.levels[0]&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Cantrips: pick ",Ke.cantrips-Jt," more"]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:We.filter(ue=>!ae.selectedOnly||Xe.includes(ue.id)).map(ue=>{const Ge=Xe.includes(ue.id),Et=Jt>=Ke.cantrips;return l.jsx(ye,{size:"sm",variant:Ge?"default":"outline",disabled:!Ge&&Et,onClick:()=>Ae(Q,ue.id),title:ue.text,style:{opacity:!Ge&&Et?.6:1},children:ue.name},ue.id)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Selected ",Jt," / ",Ke.cantrips]})]}),["bard","wizard","warlock","sorcerer"].includes(Q)&&!!Ke.level1&&ae.levels[1]&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Level 1 Spells: pick ",Ke.level1-yt," more"]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:Ce.filter(ue=>!ae.selectedOnly||Xe.includes(ue.id)).map(ue=>{const Ge=Xe.includes(ue.id),Et=yt>=Ke.level1;return l.jsx(ye,{size:"sm",variant:Ge?"default":"outline",disabled:!Ge&&Et,onClick:()=>Ae(Q,ue.id),title:ue.text,style:{opacity:!Ge&&Et?.6:1},children:ue.name},ue.id)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Selected ",yt," / ",Ke.level1]})]}),["bard","wizard","warlock","sorcerer"].includes(Q)&&!!Ke.level2&&ae.levels[2]&&$o>=se[Q].l2&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Level 2 Spells: pick ",Ke.level2-fn," more"]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:Te.filter(ue=>!ae.selectedOnly||Xe.includes(ue.id)).map(ue=>{const Ge=Xe.includes(ue.id),Et=fn>=Ke.level2;return l.jsx(ye,{size:"sm",variant:Ge?"default":"outline",disabled:!Ge&&Et,onClick:()=>Ae(Q,ue.id),title:ue.text,style:{opacity:!Ge&&Et?.6:1},children:ue.name},ue.id)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Selected ",fn," / ",Ke.level2]})]}),["bard","wizard","sorcerer"].includes(Q)&&!!Ke.level3&&ae.levels[3]&&$o>=se[Q].l3&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Level 3 Spells: pick ",Ke.level3-pn," more"]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:Ue.filter(ue=>!ae.selectedOnly||Xe.includes(ue.id)).map(ue=>{const Ge=Xe.includes(ue.id),Et=pn>=Ke.level3;return l.jsx(ye,{size:"sm",variant:Ge?"default":"outline",disabled:!Ge&&Et,onClick:()=>Ae(Q,ue.id),title:ue.text,style:{opacity:!Ge&&Et?.6:1},children:ue.name},ue.id)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Selected ",pn," / ",Ke.level3]})]}),["cleric","druid","paladin","ranger"].includes(Q)&&Ke.prepared1>0&&ae.levels[1]&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Prepared Level 1: pick ",Math.max(0,Ke.prepared1-ws)," more (limit ",Ke.prepared1,")"]}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:Ce.filter(ue=>!ae.selectedOnly||et.includes(ue.id)).map(ue=>{const Ge=et.includes(ue.id),Et=ws>=Ke.prepared1;return l.jsx(ye,{size:"sm",variant:Ge?"default":"outline",disabled:!Ge&&Et,onClick:()=>Ae(Q,ue.id,!0),title:ue.text,style:{opacity:!Ge&&Et?.6:1},children:ue.name},ue.id)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Prepared ",ws," / ",Ke.prepared1]})]}),["cleric","druid","paladin","ranger"].includes(Q)&&ae.levels[2]&&$o>=se[Q].l2&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Prepared Level 2"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:Te.filter(ue=>!ae.selectedOnly||et.includes(ue.id)).map(ue=>{const Ge=et.includes(ue.id),Et=Ke.prepared2||Ke.prepared1,xr=qd>=Et;return l.jsx(ye,{size:"sm",variant:Ge?"default":"outline",disabled:!Ge&&xr,onClick:()=>Ae(Q,ue.id,!0),title:ue.text,style:{opacity:!Ge&&xr?.6:1},children:ue.name},ue.id)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Prepared ",qd," / ",Ke.prepared2||Ke.prepared1]})]}),["cleric","druid","paladin","ranger"].includes(Q)&&ae.levels[3]&&$o>=se[Q].l3&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Prepared Level 3"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:Ue.filter(ue=>!ae.selectedOnly||et.includes(ue.id)).map(ue=>{const Ge=et.includes(ue.id),Et=Ke.prepared3||Ke.prepared1,xr=ef>=Et;return l.jsx(ye,{size:"sm",variant:Ge?"default":"outline",disabled:!Ge&&xr,onClick:()=>Ae(Q,ue.id,!0),title:ue.text,style:{opacity:!Ge&&xr?.6:1},children:ue.name},ue.id)})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["Prepared ",ef," / ",Ke.prepared3||Ke.prepared1]})]})]},Q)})})})]})})(),l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs(br,{children:[l.jsx(mp,{size:16,style:{marginRight:6}}),"Skills"]})}),l.jsxs(Cr,{children:[l.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[l.jsx(ye,{size:"sm",variant:P==="list"?"default":"outline",onClick:()=>x("list"),children:"List"}),l.jsx(ye,{size:"sm",variant:P==="sources"?"default":"outline",onClick:()=>x("sources"),children:"Sources"})]}),P==="list"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Sort By"}),l.jsxs("select",{value:g,onChange:R=>m(R.target.value),style:{...nl,width:240,padding:"6px 10px"},children:[l.jsx("option",{value:"ability",children:"Ability Score"}),l.jsx("option",{value:"alpha",children:"Alphabetical"}),l.jsx("option",{value:"bonus",children:"Highest Bonus"}),l.jsx("option",{value:"proftype",children:"Proficiency Type"})]}),l.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[l.jsx(ye,{size:"sm",variant:w==="single"?"default":"outline",onClick:()=>v("single"),"aria-label":"Single column",title:"Single column",children:l.jsx(Zx,{size:16})}),l.jsx(ye,{size:"sm",variant:w==="double"?"default":"outline",onClick:()=>v("double"),"aria-label":"Two columns",title:"Two columns",children:l.jsx(Gx,{size:16})}),l.jsx(ye,{size:"sm",variant:w==="grid"?"default":"outline",onClick:()=>v("grid"),"aria-label":"Grid",title:"Grid",children:l.jsx(Jx,{size:16})})]})]}),(()=>{const R=Kn(u,s,W),N=Su(Le.totalLevel),ee=["cha","con","dex","int","str","wis"],se=["expert","prof","half","none"],Se=hn.map(Ce=>{const Te=Ot(R[Ce.ability]);let Ue=S[Ce.id]??"none";ie.includes("prodigy")&&xe.prodigySkill===Ce.id&&(Ue==="none"?Ue="prof":Ue==="prof"&&(Ue="expert"));const Xe=Ue==="half"?Math.floor(N/2):Ue==="prof"?N:Ue==="expert"?N*2:0,et=Te+Xe;return{...Ce,base:Te,add:Xe,total:et,t:Ue}});Se.sort((Ce,Te)=>g==="alpha"?Ce.name.localeCompare(Te.name):g==="bonus"?Te.total-Ce.total||Ce.name.localeCompare(Te.name):g==="proftype"?se.indexOf(Ce.t)-se.indexOf(Te.t)||Ce.name.localeCompare(Te.name):ee.indexOf(Ce.ability)-ee.indexOf(Te.ability)||Ce.name.localeCompare(Te.name));const Ae=(Ce,Te)=>{try{const Xe=document.createElement("canvas").getContext("2d");return Xe?(Xe.font=Ce,Xe.measureText(Te).width):Te.length*8}catch{return Te.length*8}},Ie="system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",Oe=`600 14px ${Ie}`,qe=`12px ${Ie}`,it=`12px ${Ie}`,q=Math.max(...hn.map(Ce=>Ae(Oe,Ce.name))),G=Math.max(...Se.map(Ce=>Ae(qe,Ce.total>=0?`+${Ce.total}`:`${Ce.total}`))),Q=Math.ceil(G+16+2),de=Ae(it,"Expertise"),be=Math.ceil(de+20+2),he=Math.ceil(q),ze=Math.ceil(he+8+Q+8+be+16),Fe={display:"grid",gap:8,gridTemplateColumns:w==="single"?`repeat(1, minmax(${ze}px, 1fr))`:w==="double"?`repeat(2, minmax(${ze}px, 1fr))`:`repeat(auto-fill, ${ze}px)`},He={padding:8,borderRadius:10,border:"1px solid #e2e8f0",background:"var(--card-bg)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,...w==="grid"?{width:ze}:{}};let We=Se;if(w==="double"){const Ce=Math.ceil(Se.length/2),Te=Se.slice(0,Ce),Ue=Se.slice(Ce),Xe=[];for(let et=0;et<Ce;et++)Te[et]&&Xe.push(Te[et]),Ue[et]&&Xe.push(Ue[et]);We=Xe}return l.jsx("div",{style:Fe,children:We.map(Ce=>l.jsxs("div",{style:He,children:[l.jsxs("div",{style:{display:"grid",gap:2},children:[l.jsx("div",{style:{fontWeight:600,whiteSpace:"nowrap"},children:Ce.name}),l.jsx("div",{style:{fontSize:11,color:"#64748b",textTransform:"uppercase",whiteSpace:"nowrap"},children:Ce.ability})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,whiteSpace:"nowrap"},children:[l.jsx(nn,{children:Ce.total>=0?`+${Ce.total}`:Ce.total}),l.jsx(ye,{size:"sm",variant:Ce.t==="none"?"outline":"default",onClick:()=>{(z[Ce.id]||[]).includes("manual")?lt(Ce.id,"manual"):dt(Ce.id,"manual")},children:Ce.t==="none"?"None":Ce.t==="half"?"Half":Ce.t==="prof"?"Prof":"Expertise"})]})]},Ce.id))})})()]}):null,P==="sources"?l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Combined node graph showing all skills and their proficiency sources."}),l.jsx(b1,{skills:hn.map(R=>({id:R.id,name:R.name})),skillSources:z,race:s,raceReplPicks:O,classes:a,background:h})]}):null]})]}),l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs(br,{children:[l.jsx(Id,{size:16,style:{marginRight:6}}),"Equipment & Loadout"]})}),l.jsx(Cr,{children:l.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))"},children:[l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Catalog"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{placeholder:"Search catalog...",value:oe,onChange:R=>Z(R.target.value),style:{...nl,flex:1}}),l.jsxs(ye,{size:"sm",variant:$||we.length?"default":"outline",onClick:()=>fe(R=>!R),children:["Filters",we.length?` (${we.length})`:""]})]}),$?l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[ce.map(R=>l.jsx(ye,{size:"sm",variant:we.includes(R)?"default":"outline",onClick:()=>Pe(R),children:R},R)),we.length?l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>ke([]),children:"Clear filters"}):null]}):null,l.jsx("div",{style:{maxHeight:360,overflowY:"auto",paddingRight:4},children:l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:12},children:ve.length?ve.map(R=>l.jsx(x1,{item:R,onAdd:()=>p(N=>ra([...N,R]))},R.id)):l.jsx("div",{style:{gridColumn:"1 / -1",fontSize:12,color:"#94a3b8"},children:"No items match your search."})})})]}),l.jsxs("div",{style:{display:"grid",gap:8,background:"var(--card-bg)",padding:8,borderRadius:10,border:"1px solid var(--muted-border)"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Loadout"}),l.jsx("div",{style:{maxHeight:360,overflowY:"auto",paddingRight:4},children:l.jsxs("div",{style:{display:"grid",gap:6},children:[f.length===0&&l.jsx("div",{style:{fontSize:12,color:"#94a3b8"},children:"Nothing equipped."}),f.map(R=>l.jsx(w1,{item:R,onRemove:()=>p(N=>N.filter(ee=>ee.id!==R.id))},R.id))]})})]})]})})]})]}),l.jsx("aside",{style:{display:"grid",gap:12,position:"sticky",top:76,flex:"0 0 420px",width:420,minWidth:420,boxSizing:"border-box"},children:l.jsxs(Sr,{children:[l.jsx(kr,{children:l.jsxs(br,{children:[l.jsx(i1,{size:16,style:{marginRight:6}}),"Live Summary"]})}),l.jsxs(Cr,{children:[l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[l.jsx(zn,{label:"Race",children:l.jsx("div",{children:s.name})}),l.jsx(zn,{label:"Level",children:l.jsx(nn,{children:Le.totalLevel})}),l.jsx(zn,{label:"Classes",children:l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:a.map(R=>l.jsxs(nn,{children:[R.klass.name," ",R.level,R.subclass?` (${R.subclass.name})`:""]},R.klass.id))})}),l.jsx(zn,{label:"Speed",children:l.jsxs(nn,{children:[Le.speed," ft."]})}),l.jsx(zn,{label:"HP @lvl",children:l.jsx(nn,{children:Le.hp})}),l.jsx(zn,{label:"AC",children:l.jsx(nn,{children:Le.ac})}),l.jsx(zn,{label:"Initiative",children:l.jsx(nn,{children:Le.initiative>=0?`+${Le.initiative}`:Le.initiative})}),l.jsx(zn,{label:"Background",children:l.jsx("div",{children:(h==null?void 0:h.name)||""})})]}),l.jsxs("div",{style:{display:"grid",gap:8,marginTop:12},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Abilities & Saves"}),l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:["str","dex","con","int","wis","cha"].map(R=>l.jsxs("div",{style:{padding:8,borderRadius:12,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"grid",gap:6},children:[l.jsx("div",{style:{fontSize:10,textTransform:"uppercase",color:"#64748b"},children:R}),l.jsx("div",{style:{fontWeight:600},children:Kn(u,s,W)[R]}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["mod ",Ot(Kn(u,s,W)[R])>=0?"+":"",Ot(Kn(u,s,W)[R])]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[l.jsx("span",{style:{fontSize:11,color:"#64748b"},children:"Save"}),l.jsx(nn,{children:Le.saves[R]>=0?`+${Le.saves[R]}`:Le.saves[R]})]})]},R))})]}),l.jsxs("div",{style:{display:"grid",gap:8,marginTop:12},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Subactions Gained"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:Le.subactions.length?Le.subactions.map(R=>l.jsx("span",{style:g1,children:R},R)):l.jsx("div",{style:{color:"#94a3b8"},children:"None yet."})}),l.jsxs("div",{style:{fontSize:12,color:"#64748b",marginTop:8,display:"flex",alignItems:"center",gap:8},children:[l.jsx(Ei,{size:16,style:{marginRight:6}}),"Class Features"]}),l.jsx("div",{style:{display:"grid",gap:8,fontSize:14},children:(()=>{const R=[];return a.filter(N=>(N.level||0)>=1).forEach(N=>{var qe,it;const ee=N.level||1,se=N.klass.featuresByLevel,Se=Ni[N.klass.id]||[],Ae={},Ie={};Se.forEach(q=>{var G;if(ee>=q.level){const Q=(G=C[N.klass.id])==null?void 0:G[q.id],de=(Array.isArray(Q)?Q:Q?[Q]:[]).map(be=>q.options.find(he=>he.id===be)).filter(Boolean);if(de.length===1){const be=de[0];Ae[q.id]={name:be.name,text:be.text},Ie[q.name]={name:be.name,text:be.text}}else if(de.length>1){const be=de.map(he=>({name:he.name,text:he.text}));Ae[q.id]={multi:be},Ie[q.name]={multi:be}}}});const Oe=new Set;if(se?Object.keys(se).map(G=>parseInt(G,10)).filter(G=>G<=ee).sort((G,Q)=>G-Q).forEach(G=>{se[G].forEach(Q=>{const J=Ie[Q.name];if(J){const he=Se.find(ze=>ze.name===Q.name);he&&Oe.add(he.id)}const de=J?"multi"in J?`${Q.name}: ${J.multi.map(he=>he.name).join(", ")}`:`${Q.name}: ${J.name}`:Q.name,be=(()=>{if(Q.name.toLowerCase().includes("ability score improvement")){const ze=["str","dex","con","int","wis","cha"].filter(Ce=>(W[Ce]||0)>0),Fe=ze.length?`ASI: ${ze.map(Ce=>`${Ce.toUpperCase()} +${W[Ce]||0}`).join(", ")}`:"",He=ie.length?`Feats: ${ie.map(Ce=>{var Te;return((Te=qr.find(Ue=>Ue.id===Ce))==null?void 0:Te.name)||Ce}).join(", ")}`:"",We=[Fe,He].filter(Boolean);return We.length?We.join("  "):Q.text}return J?"multi"in J?J.multi.map(ze=>ze.text).join("  "):J.text:Q.text})();R.push({key:`${N.klass.id}-lvl${G}-${Q.name}`,name:de,text:be,source:`${N.klass.name}  L${G}`})})}):(N.klass.level1||[]).forEach(q=>{if(Ie[q.name]){const de=Se.find(be=>be.name===q.name);de&&Oe.add(de.id)}const Q=(()=>{const de=Ie[q.name];return de?"multi"in de?`${q.name}: ${de.multi.map(be=>be.name).join(", ")}`:`${q.name}: ${de.name}`:q.name})(),J=(()=>{if(q.name.toLowerCase().includes("ability score improvement")){const he=["str","dex","con","int","wis","cha"].filter(We=>(W[We]||0)>0),ze=he.length?`ASI: ${he.map(We=>`${We.toUpperCase()} +${W[We]||0}`).join(", ")}`:"",Fe=ie.length?`Feats: ${ie.map(We=>{var Ce;return((Ce=qr.find(Te=>Te.id===We))==null?void 0:Ce.name)||We}).join(", ")}`:"",He=[ze,Fe].filter(Boolean);return He.length?He.join("  "):q.text}const be=Ie[q.name];return be?"multi"in be?be.multi.map(he=>he.text).join("  "):be.text:q.text})();R.push({key:`${N.klass.id}-lvl1-${q.name}`,name:Q,text:J,source:N.klass.name})}),Se.forEach(q=>{if(ee>=q.level&&!Oe.has(q.id)){const G=Ae[q.id];G&&("multi"in G?R.push({key:`${N.klass.id}-dec-${q.id}`,name:`${q.name}: ${G.multi.map(Q=>Q.name).join(", ")}`,text:G.multi.map(Q=>Q.text).join("  "),source:N.klass.name}):R.push({key:`${N.klass.id}-dec-${q.id}`,name:`${q.name}: ${G.name}`,text:G.text,source:N.klass.name}))}}),N.subclass&&ee>=(N.subclass.unlockLevel||1/0)){const q=(it=(qe=N.subclass.grants)==null?void 0:qe.subactions)!=null&&it.length?`Grants: ${N.subclass.grants.subactions.join(", ")}`:"Subclass features unlocked.";R.push({key:`${N.klass.id}-sub-${N.subclass.id}`,name:N.subclass.name,text:q,source:N.klass.name})}}),R.length?R.map(N=>l.jsxs("div",{style:{padding:8,borderRadius:12,border:"1px solid var(--muted-border)",background:"var(--card-bg)"},children:[l.jsxs("div",{style:{fontWeight:600},children:[N.name," ",l.jsxs("span",{style:{color:"#64748b",fontWeight:400},children:["(",N.source,")"]})]}),l.jsx("div",{style:{color:"#64748b"},children:N.text})]},N.key)):l.jsx("div",{style:{color:"#94a3b8"},children:"No class features."})})()})]}),l.jsxs("div",{style:{display:"grid",gap:8,marginTop:12},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Racial Features"}),l.jsx("div",{style:{display:"grid",gap:8,fontSize:14},children:(s.traits||[]).length?(s.traits||[]).map(R=>l.jsxs("div",{style:{padding:8,borderRadius:12,border:"1px solid var(--muted-border)",background:"var(--card-bg)"},children:[l.jsx("div",{style:{fontWeight:600},children:R.name}),l.jsx("div",{style:{color:"#64748b"},children:R.text})]},R.id)):l.jsx("div",{style:{color:"#94a3b8"},children:"No racial features."})})]})]})]})})]}),l.jsx("div",{style:{fontSize:12,color:"#64748b",padding:"8px 0"},children:"Demo only. Replace permit/reward stubs with your engine calls to power full validation, previews, and MCSTdriven simulations."}),De?l.jsx("div",{style:{position:"fixed",left:12,right:12,bottom:12,display:"flex",justifyContent:"center",pointerEvents:"none",zIndex:50},children:l.jsxs("div",{style:{pointerEvents:"auto",maxWidth:720,width:"100%",background:"var(--card-bg)",border:"1px solid var(--muted-border)",borderRadius:12,boxShadow:"0 6px 20px rgba(0,0,0,0.18)",padding:12,display:"grid",gap:10},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("div",{style:{fontWeight:600},children:"Planner changes available"}),l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>{$e(null)},children:"Dismiss"})]}),l.jsx("div",{style:{fontSize:13,color:"#475569"},children:"We found differences between Builder and the active plan. Apply these updates?"}),l.jsxs("ul",{style:{margin:0,paddingLeft:18,fontSize:13,color:"#334155"},children:[De.diff.slice(0,8).map(R=>l.jsxs("li",{children:[l.jsxs("strong",{children:[R.label,":"]})," ",R.before||""," ",R.after?" "+R.after:""]},R.key)),De.diff.length>8?l.jsxs("li",{children:["and ",De.diff.length-8," more"]}):null]}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>{$e(null)},children:"Not now"}),l.jsx(ye,{size:"sm",onClick:()=>{De&&(dn(De.mapping),$e(null))},children:"Apply changes"})]})]})}):null]})}function v1(e){const t=Kn(e.abilities,e.race,e.asi),n=["str","dex","con","int","wis","cha"],[r,i]=b.useState([]),[s,o]=b.useState({}),a=()=>Math.random().toString(36).slice(2,9),[c,u]=b.useState(!1),[d,f]=b.useState(!1),p=27;function h(C){switch(C){case 8:return 0;case 9:return 1;case 10:return 2;case 11:return 3;case 12:return 4;case 13:return 5;case 14:return 7;case 15:return 9;default:return Number.POSITIVE_INFINITY}}function k(C){return["str","dex","con","int","wis","cha"].reduce((_,B)=>{const A=Math.max(8,Math.min(15,C[B]||8));return _+h(A)},0)}const S=k(e.abilities),M=Math.max(0,p-S);function g(C,_){return Array.from({length:C},()=>1+Math.floor(Math.random()*_))}function m(){const C=g(4,6).sort((_,B)=>B-_);return C[0]+C[1]+C[2]}function w(){return g(3,6).reduce((C,_)=>C+_,0)}function v(C){return C.map(_=>({id:a(),value:_}))}function z(){const C=Array.from({length:6},()=>m());i(v(C)),o({}),u(!1)}function T(){const C=Array.from({length:6},()=>w());i(v(C)),o({}),u(!1)}function P(){const C=Array.from({length:6},()=>1+Math.floor(Math.random()*20));i(v(C)),o({}),u(!1)}function x(C){const _=[...C].sort((A,j)=>j-A),B={...e.abilities};n.forEach((A,j)=>{B[A]=si(_[j]??10,3,20)}),e.onChange(B)}function E(){r.length&&(x(r.map(C=>C.value)),i([]),o({}))}function I(){i([]),o({})}function L(C,_){C.dataTransfer.setData("text/plain",_),C.dataTransfer.effectAllowed="move"}function Y(C){C.preventDefault(),C.dataTransfer.dropEffect="move"}function O(C,_){_.preventDefault();const B=_.dataTransfer.getData("text/plain");if(!B)return;const A=r.findIndex(oe=>oe.id===B);if(A===-1)return;const j=r[A],D=r.filter((oe,Z)=>Z!==A),H=s[C],X=[...D];typeof H=="number"&&X.push({id:a(),value:H}),o({...s,[C]:j.value}),i(X),e.onChange({...e.abilities,[C]:si(j.value,3,20)})}function y(C,_){if(!c){e.onChange({...e.abilities,[C]:si((e.abilities[C]||10)+_,3,20)});return}const B=si(e.abilities[C]||8,8,15),A=si(B+_,8,15);if(A===B)return;const j=h(A)-h(B);(j<=0||M-j>=0)&&e.onChange({...e.abilities,[C]:A})}return l.jsxs("div",{style:{gridColumn:"1 / -1",display:"grid",gap:8},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Abilities"}),l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:8},children:[l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>f(C=>!C),children:"Generate"}),l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>{e.onChange({str:10,dex:10,con:10,int:10,wis:10,cha:10}),I(),u(!1)},children:"Reset"}),d?l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:8},children:[l.jsx(ye,{size:"sm",variant:"outline",onClick:z,children:" 4d6 (drop lowest)"}),l.jsx(ye,{size:"sm",variant:"outline",onClick:T,children:" 3d6"}),l.jsx(ye,{size:"sm",variant:"outline",onClick:P,children:" 1d20"}),l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>{x([15,14,13,12,10,8]),I(),u(!1)},children:"Standard Array"}),c?l.jsxs(l.Fragment,{children:[l.jsxs("span",{style:{fontSize:12,color:"#64748b"},children:["Remaining: ",l.jsx("strong",{children:M})]}),l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>u(!1),children:"Exit Point Buy"})]}):l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>{u(!0),I(),e.onChange({str:8,dex:8,con:8,int:8,wis:8,cha:8})},children:"Point Buy (27)"}),r.length?l.jsxs(l.Fragment,{children:[l.jsx(ye,{size:"sm",variant:"outline",onClick:E,children:"Auto-assign highlow"}),l.jsx(ye,{size:"sm",variant:"ghost",onClick:I,children:"Clear Rolls"})]}):null]}):null]}),r.length?l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8,justifyContent:"center"},children:r.map(C=>l.jsx("div",{draggable:!0,onDragStart:_=>L(_,C.id),title:`Drag ${C.value} onto a stat`,style:{width:36,height:36,borderRadius:8,border:"1px solid #ef4444",background:"#ef4444",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:600},children:C.value},C.id))}):null,l.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:8},children:n.map(C=>l.jsxs("div",{onDragOver:Y,onDrop:_=>O(C,_),style:{padding:8,borderRadius:12,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"grid",gap:6},children:[l.jsx("div",{style:{fontSize:10,textTransform:"uppercase",color:"#64748b"},children:C}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx(ye,{size:"icon",variant:"outline",onClick:()=>y(C,-1),children:""}),l.jsx("div",{style:{fontWeight:600,width:24,textAlign:"center"},children:c?Math.max(8,Math.min(15,e.abilities[C]||8)):e.abilities[C]||10}),l.jsx(ye,{size:"icon",variant:"outline",onClick:()=>y(C,1),children:"+"})]}),l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:["mod ",Ot(t[C])>=0?"+":"",Ot(t[C])]}),typeof s[C]=="number"?l.jsxs("div",{style:{fontSize:11,color:"#64748b"},children:["Assigned: ",s[C]]}):r.length?l.jsx("div",{style:{fontSize:11,color:"#94a3b8"},children:"Drop a roll here"}):null]},C))})]})}function Kn(e,t,n){const r={str:10,dex:10,con:10,int:10,wis:10,cha:10,...e};return Object.entries((t==null?void 0:t.asis)||{}).forEach(([i,s])=>{const o=i;r[o]=(r[o]||10)+(s||0)}),n&&["str","dex","con","int","wis","cha"].forEach(i=>{const s=Math.max(0,Math.floor(n[i]||0));r[i]=(r[i]||10)+s}),r}function x1({item:e,onAdd:t}){const n=e.tags;return l.jsxs("div",{style:{padding:10,borderRadius:10,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"grid",gap:6,minHeight:96},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.type==="weapon"&&l.jsx(Id,{size:16}),e.type==="shield"&&l.jsx(Am,{size:16}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flex:1,minWidth:0},children:[l.jsx("span",{style:{fontWeight:600,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name}),l.jsxs("span",{style:{fontSize:12,color:"#64748b",whiteSpace:"nowrap"},children:[e.type==="weapon"&&e.dmg,e.type==="armor"&&l.jsxs(l.Fragment,{children:["AC ",e.ac,typeof e.dexMax<"u"?`, Dex cap ${e.dexMax===1/0?"":e.dexMax}`:""]}),e.type==="shield"&&`+${e.ac||2} AC`]})]}),l.jsx(ye,{size:"icon",onClick:t,"aria-label":"Add",children:l.jsx(e1,{size:16})})]}),n!=null&&n.length?l.jsx("div",{style:{fontSize:11,color:"#64748b",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.join("  ")}):null]})}function w1({item:e,onRemove:t}){var n;return l.jsxs("div",{style:{padding:6,borderRadius:10,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:0},children:[e.type==="weapon"&&l.jsx(Id,{size:16}),e.type==="shield"&&l.jsx(Am,{size:16}),l.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontWeight:600,fontSize:13},children:e.name}),l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:e.type==="weapon"?e.dmg:e.type==="armor"?`AC ${e.ac}`:e.type}),e.type==="armor"&&((n=e.tags)!=null&&n.length)?l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:e.tags.map(r=>l.jsx("span",{style:{padding:"1px 6px",borderRadius:999,border:"1px solid #e2e8f0",fontSize:10},children:r},r))}):null]})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap",justifyContent:"flex-end"},children:[(_m[e.id]||[]).map(r=>l.jsx("span",{style:{padding:"1px 6px",borderRadius:999,background:"var(--pill-bg)",border:"1px solid var(--muted-border)",fontSize:11},children:r},r)),l.jsx(ye,{size:"sm",variant:"ghost",onClick:t,style:{padding:"4px 6px"},children:"Remove"})]})]})}function S1(e){const[t,n]=b.useState(!1),r=b.useRef(null),i=e.classes.reduce((p,h)=>p+h.level,0),s=20,o=In.filter(p=>!e.classes.some(h=>h.klass.id===p.id)).slice().sort((p,h)=>p.name.localeCompare(h.name)),a=i<s&&o.length>0;b.useEffect(()=>{if(!t)return;const p=k=>{r.current&&!r.current.contains(k.target)&&n(!1)},h=k=>{k.key==="Escape"&&n(!1)};return document.addEventListener("mousedown",p),document.addEventListener("touchstart",p),window.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("touchstart",p),window.removeEventListener("keydown",h)}},[t]);function c(p,h){const k=i-e.classes[p].level,S=si(h,1,Math.max(1,Math.min(s-k,20))),M=e.classes.map((g,m)=>{var w;return m===p?{...g,level:S,subclass:g.subclass&&S<(((w=g.subclass)==null?void 0:w.unlockLevel)||1/0)?void 0:g.subclass}:g});e.onChange(M)}function u(p){const h=e.classes.filter((k,S)=>S!==p);e.onChange(h.length?h:[{klass:In[0],level:1}])}function d(p){e.classes.some(k=>k.klass.id===p.id)||i>=s||(e.onChange([...e.classes,{klass:p,level:1}]),n(!1))}function f(p,h){const k=e.classes.map((S,M)=>M===p?{...S,subclass:h}:S);e.onChange(k)}return l.jsxs("div",{style:{display:"grid",gap:8},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsxs("div",{style:{fontSize:12,color:"#64748b",display:"flex",alignItems:"center"},children:["Classes (Total Level: ",l.jsx("strong",{children:i}),")"]}),l.jsxs("div",{style:{position:"relative"},ref:r,children:[l.jsx(ye,{size:"sm",variant:"outline",onClick:()=>n(p=>!p),disabled:!a,children:"Add Class"}),t?l.jsx("div",{style:{position:"absolute",right:0,top:"100%",marginTop:6,background:"var(--card-bg)",border:"1px solid var(--muted-border)",borderRadius:8,boxShadow:"0 8px 16px rgba(15,23,42,0.25)",zIndex:20,minWidth:220},children:l.jsx("div",{style:{maxHeight:240,overflowY:"auto",display:"grid"},children:o.map(p=>l.jsx(ye,{size:"sm",variant:"ghost",style:{width:"100%",justifyContent:"flex-start"},onClick:()=>d(p),children:p.name},p.id))})}):null]})]}),l.jsxs("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))"},children:[e.classes.map((p,h)=>{var k,S;return l.jsxs("div",{style:{padding:8,borderRadius:12,border:"1px solid var(--muted-border)",background:"var(--card-bg)",display:"grid",gap:6},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("div",{style:{fontWeight:600},children:p.klass.name}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[l.jsx(ye,{size:"icon",variant:"outline",onClick:()=>c(h,p.level-1),children:""}),l.jsx(nn,{children:p.level}),l.jsx(ye,{size:"icon",variant:"outline",onClick:()=>c(h,p.level+1),children:"+"})]})]}),l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>u(h),children:"Remove"})]}),(k=p.klass.subclasses)!=null&&k.length?l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Subclass"}),p.level<(((S=p.klass.subclasses[0])==null?void 0:S.unlockLevel)||1/0)?l.jsxs("span",{style:{fontSize:12,color:"#94a3b8"},children:["Unlocks at level ",Math.min(...p.klass.subclasses.map(M=>M.unlockLevel))]}):l.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[p.klass.subclasses.map(M=>{var g;return l.jsx(ye,{size:"sm",variant:((g=p.subclass)==null?void 0:g.id)===M.id?"default":"outline",onClick:()=>f(h,M),children:M.name},M.id)}),p.subclass?l.jsx(ye,{size:"sm",variant:"ghost",onClick:()=>f(h,void 0),children:"Clear"}):null]})]}):null]},p.klass.id)}),e.classes.length===0&&l.jsx("div",{style:{gridColumn:"1 / -1",padding:8,borderRadius:12,border:"1px solid var(--muted-border)",background:"var(--card-bg)",textAlign:"center",color:"var(--muted-fg)"},children:'No classes added yet. Use "Add Class" to start building your character.'})]})]})}function k1(e){const[t,n]=b.useState(!1),[r,i]=b.useState(!1),[s,o]=b.useState(!1),[a,c]=b.useState(!1),[u,d]=b.useState(!1),f=y=>y?{background:"#4f46e5",color:"white",borderColor:"#4f46e5"}:{borderColor:"#4f46e5",color:"#4f46e5"},p=$t.find(y=>y.id==="human"),h=$t.find(y=>y.id==="human-variant"),k=$t.find(y=>y.id==="elf-wood"),S=$t.find(y=>y.id==="elf-high"),M=$t.find(y=>y.id==="dwarf-hill"),g=$t.find(y=>y.id==="dwarf-mountain"),m=$t.find(y=>y.id==="halfling-lightfoot"),w=$t.find(y=>y.id==="halfling-stout"),v=$t.find(y=>y.id==="dragonborn"),z=$t.filter(y=>y.id.startsWith("dragonborn-")),T=new Set(z.map(y=>y.id)),P=new Set(["human","human-variant","elf-wood","elf-high","dwarf-hill","dwarf-mountain","halfling-lightfoot","halfling-stout","dragonborn",...Array.from(T)]),x=$t.filter(y=>!P.has(y.id)),E=e.value.id==="human"||e.value.id==="human-variant",I=e.value.id==="elf-wood"||e.value.id==="elf-high",L=e.value.id==="dwarf-hill"||e.value.id==="dwarf-mountain",Y=e.value.id==="halfling-lightfoot"||e.value.id==="halfling-stout",O=e.value.id==="dragonborn"||e.value.id.startsWith("dragonborn-");return l.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[l.jsx(ye,{size:"sm",variant:E?"default":"outline",onClick:()=>n(y=>!y),children:"Human"}),t&&l.jsxs(l.Fragment,{children:[l.jsx(ye,{size:"sm",variant:e.value.id==="human"?"default":"outline",onClick:()=>e.onChange(p),style:f(e.value.id==="human"),children:"Base"}),l.jsx(ye,{size:"sm",variant:e.value.id==="human-variant"?"default":"outline",onClick:()=>e.onChange(h),style:f(e.value.id==="human-variant"),children:"Variant"})]}),l.jsx(ye,{size:"sm",variant:I?"default":"outline",onClick:()=>i(y=>!y),children:"Elf"}),r&&l.jsxs(l.Fragment,{children:[l.jsx(ye,{size:"sm",variant:e.value.id==="elf-wood"?"default":"outline",onClick:()=>e.onChange(k),style:f(e.value.id==="elf-wood"),children:"Wood"}),l.jsx(ye,{size:"sm",variant:e.value.id==="elf-high"?"default":"outline",onClick:()=>e.onChange(S),style:f(e.value.id==="elf-high"),children:"High"})]}),l.jsx(ye,{size:"sm",variant:L?"default":"outline",onClick:()=>o(y=>!y),children:"Dwarf"}),s&&l.jsxs(l.Fragment,{children:[l.jsx(ye,{size:"sm",variant:e.value.id==="dwarf-hill"?"default":"outline",onClick:()=>e.onChange(M),style:f(e.value.id==="dwarf-hill"),children:"Hill"}),l.jsx(ye,{size:"sm",variant:e.value.id==="dwarf-mountain"?"default":"outline",onClick:()=>e.onChange(g),style:f(e.value.id==="dwarf-mountain"),children:"Mountain"})]}),l.jsx(ye,{size:"sm",variant:Y?"default":"outline",onClick:()=>c(y=>!y),children:"Halfling"}),a&&l.jsxs(l.Fragment,{children:[l.jsx(ye,{size:"sm",variant:e.value.id==="halfling-lightfoot"?"default":"outline",onClick:()=>e.onChange(m),style:f(e.value.id==="halfling-lightfoot"),children:"Lightfoot"}),l.jsx(ye,{size:"sm",variant:e.value.id==="halfling-stout"?"default":"outline",onClick:()=>e.onChange(w),style:f(e.value.id==="halfling-stout"),children:"Stout"})]}),l.jsx(ye,{size:"sm",variant:O?"default":"outline",onClick:()=>d(y=>!y),children:"Dragonborn"}),u&&l.jsxs(l.Fragment,{children:[l.jsx(ye,{size:"sm",variant:e.value.id==="dragonborn"?"default":"outline",onClick:()=>e.onChange(v),style:f(e.value.id==="dragonborn"),children:"Base"}),z.map(y=>{const C=y.name.replace(/^Dragonborn\s*\(/,"").replace(/\)$/,"");return l.jsx(ye,{size:"sm",variant:e.value.id===y.id?"default":"outline",onClick:()=>e.onChange(y),style:f(e.value.id===y.id),children:C},y.id)})]}),x.map(y=>l.jsx(ye,{size:"sm",variant:e.value.id===y.id?"default":"outline",onClick:()=>e.onChange(y),children:y.name},y.id))]})}function b1({skills:e,skillSources:t,race:n,raceReplPicks:r,classes:i,background:s}){const o=new Set((i||[]).flatMap($=>{var fe;return((fe=Bs[$.klass.id])==null?void 0:fe.options)||[]})),a=$=>(t[$]||[]).length>0,u=(n?(n.traits||[]).flatMap($=>na[$.id]||[]):[]).filter($=>(t[$]||[]).some(fe=>fe!=="race"&&fe!=="race-pick"&&fe!=="manual")),d=$=>!n||u.length===0?!1:!(t[$]||[]).some(ve=>ve!=="race"&&ve!=="race-pick"&&ve!=="manual"),f=new Set;if(e.forEach($=>{(a($.id)||o.has($.id)||d($.id))&&f.add($.id)}),f.size===0)return l.jsx("div",{style:{fontSize:12,color:"#94a3b8"},children:"No skills currently have sources or availability."});const p=$=>$==="manual"||$==="race-pick"||$.startsWith("class:"),h=Array.from(new Set(e.filter($=>a($.id)).flatMap($=>t[$.id]||[]))),k=h.filter($=>!p($)),S=h.filter($=>p($)),M=$=>{var fe;if($==="bg")return`Background${s!=null&&s.name?`: ${s.name}`:""}`;if($==="race")return`Race${n!=null&&n.name?`: ${n.name}`:""}`;if($==="race-pick")return"Race (replacement)";if($==="manual")return"Manual";if($.startsWith("class:")){const ce=$.split(":")[1];return`Class: ${((fe=In.find(Pe=>Pe.id===ce))==null?void 0:fe.name)||ce}`}return $},g=16,m=256,w=32,v=160,z=160,T=g+v/2,P=T+m,x=P+m,E=[...k];n&&u.length>0&&!E.includes("race")&&E.push("race");const I=E.map(($,fe)=>({id:$,label:M($),x:T,y:g+fe*w})),Y=(i||[]).filter($=>Bs[$.klass.id]).map($=>`class:${$.klass.id}`).map(($,fe)=>({id:$,label:M($),x:T,y:g+(I.length+fe)*w})),O=[...I,...Y],y={};O.forEach(($,fe)=>{y[$.id]=fe});const C=e.filter($=>f.has($.id)),_=$=>{const fe=[];return(t[$]||[]).forEach(ce=>{p(ce)||fe.push(ce)}),(i||[]).forEach(ce=>{const ve=Bs[ce.klass.id];ve&&ve.options.includes($)&&fe.push(`class:${ce.klass.id}`)}),d($)&&fe.push("race"),Array.from(new Set(fe))},B=C.map(($,fe)=>{const ce=_($.id).map(Pe=>y[Pe]).filter(Pe=>typeof Pe=="number"),ve=ce.length?ce.reduce((Pe,te)=>Pe+te,0)/ce.length:fe;return{s:$,key:ve}});B.sort(($,fe)=>$.key-fe.key||$.s.name.localeCompare(fe.s.name));const A=B.map(($,fe)=>({id:$.s.id,label:$.s.name,x:P,y:g+fe*w})),j={};A.forEach(($,fe)=>{j[$.id]=fe});const D=S.map(($,fe)=>{const ce=A.filter(Pe=>(t[Pe.id]||[]).includes($)).map(Pe=>j[Pe.id]),ve=ce.length?ce.reduce((Pe,te)=>Pe+te,0)/ce.length:fe;return{key:$,avg:ve}});D.sort(($,fe)=>$.avg-fe.avg||M($.key).localeCompare(M(fe.key)));const H=D.map(($,fe)=>({id:$.key,label:M($.key),x,y:g+fe*w})),X=[],oe=[];A.forEach($=>{(t[$.id]||[]).forEach(ce=>{if(k.includes(ce)){const ve=O.find(Pe=>Pe.id===ce);ve&&X.push({sx:ve.x+v/2,sy:ve.y,tx:$.x-z/2,ty:$.y,key:`${ce}->${$.id}`})}else if(S.includes(ce)){const ve=H.find(Pe=>Pe.id===ce);ve&&oe.push({sx:$.x+z/2,sy:$.y,tx:ve.x-v/2,ty:ve.y,key:`${$.id}->${ce}`})}})});const Z=x+v/2+g,we=Math.max(O.length?O[O.length-1].y:0,A.length?A[A.length-1].y:0,H.length?H[H.length-1].y:0)+g,ke=[];if(n){const fe=(n.traits||[]).flatMap(ve=>na[ve.id]||[]).filter(ve=>(t[ve]||[]).some(Pe=>Pe!=="race"&&Pe!=="race-pick"&&Pe!=="manual")),ce=O.find(ve=>ve.id==="race");ce&&fe.length>0&&A.forEach(ve=>{(t[ve.id]||[]).some(je=>je!=="race"&&je!=="race-pick"&&je!=="manual")||ke.push({sx:ce.x+v/2,sy:ce.y,tx:ve.x-z/2,ty:ve.y,key:`race~avail->${ve.id}`})})}return i&&i.length&&i.forEach($=>{const fe=`class:${$.klass.id}`,ce=O.find(Pe=>Pe.id===fe),ve=Bs[$.klass.id];!ce||!ve||ve.options.forEach(Pe=>{const te=A.find(je=>je.id===Pe);te&&ke.push({sx:ce.x+v/2,sy:ce.y,tx:te.x-z/2,ty:te.y,key:`${fe}~avail->${Pe}`})})}),l.jsx("div",{style:{width:"100%",overflowX:"auto"},children:l.jsxs("svg",{viewBox:`0 0 ${Z} ${we}`,width:Z,height:we,style:{display:"block",background:"#ffffff"},children:[X.map($=>l.jsx("path",{d:`M ${$.sx} ${$.sy} C ${$.sx+24} ${$.sy}, ${$.tx-24} ${$.ty}, ${$.tx} ${$.ty}`,stroke:"#94a3b8",strokeWidth:1.5,fill:"none"},$.key)),ke.map($=>l.jsx("path",{d:`M ${$.sx} ${$.sy} C ${$.sx+24} ${$.sy}, ${$.tx-24} ${$.ty}, ${$.tx} ${$.ty}`,stroke:"#cbd5e1",strokeWidth:1.5,fill:"none",strokeDasharray:"4,4"},$.key)),oe.map($=>l.jsx("path",{d:`M ${$.sx} ${$.sy} C ${$.sx+24} ${$.sy}, ${$.tx-24} ${$.ty}, ${$.tx} ${$.ty}`,stroke:"#94a3b8",strokeWidth:1.5,fill:"none"},$.key)),O.map($=>l.jsxs("g",{children:[l.jsx("rect",{x:$.x-v/2,y:$.y-12,width:v,height:24,rx:6,ry:6,fill:"#f1f5f9",stroke:"#e2e8f0"}),l.jsx("text",{x:$.x,y:$.y+4,textAnchor:"middle",fontSize:"11",fill:"#0f172a",children:$.label})]},$.id)),A.map($=>{const fe=(t[$.id]||[]).length,ce=fe>0,ve=9,Pe=$.x-z/2-ve-6,te=$.y,je=ce?"#0ea5e9":"#f1f5f9",_e=ce?"#0284c7":"#e2e8f0",Ee=ce?"#ffffff":"#0f172a";return l.jsxs("g",{children:[l.jsx("circle",{cx:Pe,cy:te,r:ve,fill:"#e2e8f0",stroke:"#cbd5e1"}),l.jsx("text",{x:Pe,y:te+3,textAnchor:"middle",fontSize:"10",fill:"#0f172a",fontWeight:"600",children:fe}),l.jsx("rect",{x:$.x-z/2,y:$.y-12,width:z,height:24,rx:6,ry:6,fill:je,stroke:_e}),l.jsx("text",{x:$.x,y:$.y+4,textAnchor:"middle",fontSize:"11",fill:Ee,children:$.label})]},$.id)}),H.map($=>l.jsxs("g",{children:[l.jsx("rect",{x:$.x-v/2,y:$.y-12,width:v,height:24,rx:6,ry:6,fill:"#f1f5f9",stroke:"#e2e8f0"}),l.jsx("text",{x:$.x,y:$.y+4,textAnchor:"middle",fontSize:"11",fill:"#0f172a",children:$.label})]},$.id))]})})}function Ht(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ht(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Dm={exports:{}},Mm={},zm={exports:{}},Rm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ds=b;function C1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var j1=typeof Object.is=="function"?Object.is:C1,E1=ds.useState,N1=ds.useEffect,A1=ds.useLayoutEffect,_1=ds.useDebugValue;function D1(e,t){var n=t(),r=E1({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return A1(function(){i.value=n,i.getSnapshot=t,dc(i)&&s({inst:i})},[e,n,t]),N1(function(){return dc(i)&&s({inst:i}),e(function(){dc(i)&&s({inst:i})})},[e]),_1(n),n}function dc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!j1(e,n)}catch{return!0}}function M1(e,t){return t()}var z1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?M1:D1;Rm.useSyncExternalStore=ds.useSyncExternalStore!==void 0?ds.useSyncExternalStore:z1;zm.exports=Rm;var R1=zm.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=b,I1=R1;function T1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P1=typeof Object.is=="function"?Object.is:T1,$1=I1.useSyncExternalStore,L1=Ma.useRef,O1=Ma.useEffect,F1=Ma.useMemo,B1=Ma.useDebugValue;Mm.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=L1(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=F1(function(){function c(h){if(!u){if(u=!0,d=h,h=r(h),i!==void 0&&o.hasValue){var k=o.value;if(i(k,h))return f=k}return f=h}if(k=f,P1(d,h))return k;var S=r(h);return i!==void 0&&i(k,S)?(d=h,k):(d=h,f=S)}var u=!1,d,f,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,r,i]);var a=$1(e,s[0],s[1]);return O1(function(){o.hasValue=!0,o.value=a},[a]),B1(a),a};Dm.exports=Mm;var H1=Dm.exports;const W1=ph(H1),U1={},yp=e=>{let t;const n=new Set,r=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const h=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(k=>k(t,h))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(U1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,i,c);return c},V1=e=>e?yp(e):yp,{useDebugValue:Y1}=U,{useSyncExternalStoreWithSelector:G1}=W1,X1=e=>e;function Im(e,t=X1,n){const r=G1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Y1(r),r}const vp=(e,t)=>{const n=V1(e),r=(i,s=t)=>Im(n,i,s);return Object.assign(r,n),r},K1=(e,t)=>e?vp(e,t):vp;function Tt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var J1={value:()=>{}};function za(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Al(n)}function Al(e){this._=e}function Q1(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Al.prototype=za.prototype={constructor:Al,on:function(e,t){var n=this._,r=Q1(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Z1(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=xp(n[i],e.name,t);else if(t==null)for(i in n)n[i]=xp(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Al(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Z1(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function xp(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=J1,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ku="http://www.w3.org/1999/xhtml";const wp={svg:"http://www.w3.org/2000/svg",xhtml:ku,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ra(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),wp.hasOwnProperty(t)?{space:wp[t],local:e}:e}function q1(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ku&&t.documentElement.namespaceURI===ku?t.createElement(e):t.createElementNS(n,e)}}function ew(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Tm(e){var t=Ra(e);return(t.local?ew:q1)(t)}function tw(){}function Td(e){return e==null?tw:function(){return this.querySelector(e)}}function nw(e){typeof e!="function"&&(e=Td(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new xn(r,this._parents)}function rw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function iw(){return[]}function Pm(e){return e==null?iw:function(){return this.querySelectorAll(e)}}function sw(e){return function(){return rw(e.apply(this,arguments))}}function ow(e){typeof e=="function"?e=sw(e):e=Pm(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),i.push(c));return new xn(r,i)}function $m(e){return function(){return this.matches(e)}}function Lm(e){return function(t){return t.matches(e)}}var lw=Array.prototype.find;function aw(e){return function(){return lw.call(this.children,e)}}function cw(){return this.firstElementChild}function uw(e){return this.select(e==null?cw:aw(typeof e=="function"?e:Lm(e)))}var dw=Array.prototype.filter;function fw(){return Array.from(this.children)}function pw(e){return function(){return dw.call(this.children,e)}}function hw(e){return this.selectAll(e==null?fw:pw(typeof e=="function"?e:Lm(e)))}function gw(e){typeof e!="function"&&(e=$m(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new xn(r,this._parents)}function Om(e){return new Array(e.length)}function mw(){return new xn(this._enter||this._groups.map(Om),this._parents)}function ia(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ia.prototype={constructor:ia,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function yw(e){return function(){return e}}function vw(e,t,n,r,i,s){for(var o=0,a,c=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new ia(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function xw(e,t,n,r,i,s,o){var a,c,u=new Map,d=t.length,f=s.length,p=new Array(d),h;for(a=0;a<d;++a)(c=t[a])&&(p[a]=h=o.call(c,c.__data__,a,t)+"",u.has(h)?i[a]=c:u.set(h,c));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(c=u.get(h))?(r[a]=c,c.__data__=s[a],u.delete(h)):n[a]=new ia(e,s[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(p[a])===c&&(i[a]=c)}function ww(e){return e.__data__}function Sw(e,t){if(!arguments.length)return Array.from(this,ww);var n=t?xw:vw,r=this._parents,i=this._groups;typeof e!="function"&&(e=yw(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var d=r[u],f=i[u],p=f.length,h=kw(e.call(d,d&&d.__data__,u,r)),k=h.length,S=a[u]=new Array(k),M=o[u]=new Array(k),g=c[u]=new Array(p);n(d,f,S,M,g,h,t);for(var m=0,w=0,v,z;m<k;++m)if(v=S[m]){for(m>=w&&(w=m+1);!(z=M[w])&&++w<k;);v._next=z||null}}return o=new xn(o,r),o._enter=a,o._exit=c,o}function kw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bw(){return new xn(this._exit||this._groups.map(Om),this._parents)}function Cw(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function jw(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var u=n[c],d=r[c],f=u.length,p=a[c]=new Array(f),h,k=0;k<f;++k)(h=u[k]||d[k])&&(p[k]=h);for(;c<i;++c)a[c]=n[c];return new xn(a,this._parents)}function Ew(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Nw(e){e||(e=Aw);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),u,d=0;d<a;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new xn(i,this._parents).order()}function Aw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _w(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Dw(){return Array.from(this)}function Mw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function zw(){let e=0;for(const t of this)++e;return e}function Rw(){return!this.node()}function Iw(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Tw(e){return function(){this.removeAttribute(e)}}function Pw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $w(e,t){return function(){this.setAttribute(e,t)}}function Lw(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ow(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Fw(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Bw(e,t){var n=Ra(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Pw:Tw:typeof t=="function"?n.local?Fw:Ow:n.local?Lw:$w)(n,t))}function Fm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hw(e){return function(){this.style.removeProperty(e)}}function Ww(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Uw(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Vw(e,t,n){return arguments.length>1?this.each((t==null?Hw:typeof t=="function"?Uw:Ww)(e,t,n??"")):fs(this.node(),e)}function fs(e,t){return e.style.getPropertyValue(t)||Fm(e).getComputedStyle(e,null).getPropertyValue(t)}function Yw(e){return function(){delete this[e]}}function Gw(e,t){return function(){this[e]=t}}function Xw(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Kw(e,t){return arguments.length>1?this.each((t==null?Yw:typeof t=="function"?Xw:Gw)(e,t)):this.node()[e]}function Bm(e){return e.trim().split(/^|\s+/)}function Pd(e){return e.classList||new Hm(e)}function Hm(e){this._node=e,this._names=Bm(e.getAttribute("class")||"")}Hm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wm(e,t){for(var n=Pd(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Um(e,t){for(var n=Pd(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Jw(e){return function(){Wm(this,e)}}function Qw(e){return function(){Um(this,e)}}function Zw(e,t){return function(){(t.apply(this,arguments)?Wm:Um)(this,e)}}function qw(e,t){var n=Bm(e+"");if(arguments.length<2){for(var r=Pd(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Zw:t?Jw:Qw)(n,t))}function eS(){this.textContent=""}function tS(e){return function(){this.textContent=e}}function nS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function rS(e){return arguments.length?this.each(e==null?eS:(typeof e=="function"?nS:tS)(e)):this.node().textContent}function iS(){this.innerHTML=""}function sS(e){return function(){this.innerHTML=e}}function oS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function lS(e){return arguments.length?this.each(e==null?iS:(typeof e=="function"?oS:sS)(e)):this.node().innerHTML}function aS(){this.nextSibling&&this.parentNode.appendChild(this)}function cS(){return this.each(aS)}function uS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dS(){return this.each(uS)}function fS(e){var t=typeof e=="function"?e:Tm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function pS(){return null}function hS(e,t){var n=typeof e=="function"?e:Tm(e),r=t==null?pS:typeof t=="function"?t:Td(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gS(){var e=this.parentNode;e&&e.removeChild(this)}function mS(){return this.each(gS)}function yS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xS(e){return this.select(e?vS:yS)}function wS(e){return arguments.length?this.property("__data__",e):this.node().__data__}function SS(e){return function(t){e.call(this,t,this.__data__)}}function kS(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function bS(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function CS(e,t,n){return function(){var r=this.__on,i,s=SS(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function jS(e,t,n){var r=kS(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(i=0,d=a[c];i<s;++i)if((o=r[i]).type===d.type&&o.name===d.name)return d.value}return}for(a=t?CS:bS,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Vm(e,t,n){var r=Fm(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ES(e,t){return function(){return Vm(this,e,t)}}function NS(e,t){return function(){return Vm(this,e,t.apply(this,arguments))}}function AS(e,t){return this.each((typeof t=="function"?NS:ES)(e,t))}function*_S(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Ym=[null];function xn(e,t){this._groups=e,this._parents=t}function Io(){return new xn([[document.documentElement]],Ym)}function DS(){return this}xn.prototype=Io.prototype={constructor:xn,select:nw,selectAll:ow,selectChild:uw,selectChildren:hw,filter:gw,data:Sw,enter:mw,exit:bw,join:Cw,merge:jw,selection:DS,order:Ew,sort:Nw,call:_w,nodes:Dw,node:Mw,size:zw,empty:Rw,each:Iw,attr:Bw,style:Vw,property:Kw,classed:qw,text:rS,html:lS,raise:cS,lower:dS,append:fS,insert:hS,remove:mS,clone:xS,datum:wS,on:jS,dispatch:AS,[Symbol.iterator]:_S};function Cn(e){return typeof e=="string"?new xn([[document.querySelector(e)]],[document.documentElement]):new xn([[e]],Ym)}function MS(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Pn(e,t){if(e=MS(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const zS={passive:!1},wo={capture:!0,passive:!1};function fc(e){e.stopImmediatePropagation()}function es(e){e.preventDefault(),e.stopImmediatePropagation()}function Gm(e){var t=e.document.documentElement,n=Cn(e).on("dragstart.drag",es,wo);"onselectstart"in t?n.on("selectstart.drag",es,wo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xm(e,t){var n=e.document.documentElement,r=Cn(e).on("dragstart.drag",null);t&&(r.on("click.drag",es,wo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const rl=e=>()=>e;function bu(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}bu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function RS(e){return!e.ctrlKey&&!e.button}function IS(){return this.parentNode}function TS(e,t){return t??{x:e.x,y:e.y}}function PS(){return navigator.maxTouchPoints||"ontouchstart"in this}function $S(){var e=RS,t=IS,n=TS,r=PS,i={},s=za("start","drag","end"),o=0,a,c,u,d,f=0;function p(v){v.on("mousedown.drag",h).filter(r).on("touchstart.drag",M).on("touchmove.drag",g,zS).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,z){if(!(d||!e.call(this,v,z))){var T=w(this,t.call(this,v,z),v,z,"mouse");T&&(Cn(v.view).on("mousemove.drag",k,wo).on("mouseup.drag",S,wo),Gm(v.view),fc(v),u=!1,a=v.clientX,c=v.clientY,T("start",v))}}function k(v){if(es(v),!u){var z=v.clientX-a,T=v.clientY-c;u=z*z+T*T>f}i.mouse("drag",v)}function S(v){Cn(v.view).on("mousemove.drag mouseup.drag",null),Xm(v.view,u),es(v),i.mouse("end",v)}function M(v,z){if(e.call(this,v,z)){var T=v.changedTouches,P=t.call(this,v,z),x=T.length,E,I;for(E=0;E<x;++E)(I=w(this,P,v,z,T[E].identifier,T[E]))&&(fc(v),I("start",v,T[E]))}}function g(v){var z=v.changedTouches,T=z.length,P,x;for(P=0;P<T;++P)(x=i[z[P].identifier])&&(es(v),x("drag",v,z[P]))}function m(v){var z=v.changedTouches,T=z.length,P,x;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),P=0;P<T;++P)(x=i[z[P].identifier])&&(fc(v),x("end",v,z[P]))}function w(v,z,T,P,x,E){var I=s.copy(),L=Pn(E||T,z),Y,O,y;if((y=n.call(v,new bu("beforestart",{sourceEvent:T,target:p,identifier:x,active:o,x:L[0],y:L[1],dx:0,dy:0,dispatch:I}),P))!=null)return Y=y.x-L[0]||0,O=y.y-L[1]||0,function C(_,B,A){var j=L,D;switch(_){case"start":i[x]=C,D=o++;break;case"end":delete i[x],--o;case"drag":L=Pn(A||B,z),D=o;break}I.call(_,v,new bu(_,{sourceEvent:B,subject:y,target:p,identifier:x,active:D,x:L[0]+Y,y:L[1]+O,dx:L[0]-j[0],dy:L[1]-j[1],dispatch:I}),P)}}return p.filter=function(v){return arguments.length?(e=typeof v=="function"?v:rl(!!v),p):e},p.container=function(v){return arguments.length?(t=typeof v=="function"?v:rl(v),p):t},p.subject=function(v){return arguments.length?(n=typeof v=="function"?v:rl(v),p):n},p.touchable=function(v){return arguments.length?(r=typeof v=="function"?v:rl(!!v),p):r},p.on=function(){var v=s.on.apply(s,arguments);return v===s?p:v},p.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,p):Math.sqrt(f)},p}function $d(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Km(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function To(){}var So=.7,sa=1/So,ts="\\s*([+-]?\\d+)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",LS=/^#([0-9a-f]{3,8})$/,OS=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),FS=new RegExp(`^rgb\\(${tr},${tr},${tr}\\)$`),BS=new RegExp(`^rgba\\(${ts},${ts},${ts},${ko}\\)$`),HS=new RegExp(`^rgba\\(${tr},${tr},${tr},${ko}\\)$`),WS=new RegExp(`^hsl\\(${ko},${tr},${tr}\\)$`),US=new RegExp(`^hsla\\(${ko},${tr},${tr},${ko}\\)$`),Sp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$d(To,bo,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kp,formatHex:kp,formatHex8:VS,formatHsl:YS,formatRgb:bp,toString:bp});function kp(){return this.rgb().formatHex()}function VS(){return this.rgb().formatHex8()}function YS(){return Jm(this).formatHsl()}function bp(){return this.rgb().formatRgb()}function bo(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=LS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Cp(t):n===3?new on(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?il(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?il(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=OS.exec(e))?new on(t[1],t[2],t[3],1):(t=FS.exec(e))?new on(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BS.exec(e))?il(t[1],t[2],t[3],t[4]):(t=HS.exec(e))?il(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WS.exec(e))?Np(t[1],t[2]/100,t[3]/100,1):(t=US.exec(e))?Np(t[1],t[2]/100,t[3]/100,t[4]):Sp.hasOwnProperty(e)?Cp(Sp[e]):e==="transparent"?new on(NaN,NaN,NaN,0):null}function Cp(e){return new on(e>>16&255,e>>8&255,e&255,1)}function il(e,t,n,r){return r<=0&&(e=t=n=NaN),new on(e,t,n,r)}function GS(e){return e instanceof To||(e=bo(e)),e?(e=e.rgb(),new on(e.r,e.g,e.b,e.opacity)):new on}function Cu(e,t,n,r){return arguments.length===1?GS(e):new on(e,t,n,r??1)}function on(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$d(on,Cu,Km(To,{brighter(e){return e=e==null?sa:Math.pow(sa,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new on(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new on(hi(this.r),hi(this.g),hi(this.b),oa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jp,formatHex:jp,formatHex8:XS,formatRgb:Ep,toString:Ep}));function jp(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}`}function XS(){return`#${ui(this.r)}${ui(this.g)}${ui(this.b)}${ui((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ep(){const e=oa(this.opacity);return`${e===1?"rgb(":"rgba("}${hi(this.r)}, ${hi(this.g)}, ${hi(this.b)}${e===1?")":`, ${e})`}`}function oa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ui(e){return e=hi(e),(e<16?"0":"")+e.toString(16)}function Np(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ln(e,t,n,r)}function Jm(e){if(e instanceof Ln)return new Ln(e.h,e.s,e.l,e.opacity);if(e instanceof To||(e=bo(e)),!e)return new Ln;if(e instanceof Ln)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Ln(o,a,c,e.opacity)}function KS(e,t,n,r){return arguments.length===1?Jm(e):new Ln(e,t,n,r??1)}function Ln(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$d(Ln,KS,Km(To,{brighter(e){return e=e==null?sa:Math.pow(sa,e),new Ln(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?So:Math.pow(So,e),new Ln(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new on(pc(e>=240?e-240:e+120,i,r),pc(e,i,r),pc(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ln(Ap(this.h),sl(this.s),sl(this.l),oa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=oa(this.opacity);return`${e===1?"hsl(":"hsla("}${Ap(this.h)}, ${sl(this.s)*100}%, ${sl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ap(e){return e=(e||0)%360,e<0?e+360:e}function sl(e){return Math.max(0,Math.min(1,e||0))}function pc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Qm=e=>()=>e;function JS(e,t){return function(n){return e+n*t}}function QS(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ZS(e){return(e=+e)==1?Zm:function(t,n){return n-t?QS(t,n,e):Qm(isNaN(t)?n:t)}}function Zm(e,t){var n=t-e;return n?JS(e,n):Qm(isNaN(e)?t:e)}const _p=function e(t){var n=ZS(t);function r(i,s){var o=n((i=Cu(i)).r,(s=Cu(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),u=Zm(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=a(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=e,r}(1);function _r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ju=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hc=new RegExp(ju.source,"g");function qS(e){return function(){return e}}function ek(e){return function(t){return e(t)+""}}function tk(e,t){var n=ju.lastIndex=hc.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=ju.exec(e))&&(i=hc.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:_r(r,i)})),n=hc.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?ek(c[0].x):qS(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)a[(f=c[d]).i]=f.x(u);return a.join("")})}var Dp=180/Math.PI,Eu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qm(e,t,n,r,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Dp,skewX:Math.atan(c)*Dp,scaleX:o,scaleY:a}}var ol;function nk(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Eu:qm(t.a,t.b,t.c,t.d,t.e,t.f)}function rk(e){return e==null||(ol||(ol=document.createElementNS("http://www.w3.org/2000/svg","g")),ol.setAttribute("transform",e),!(e=ol.transform.baseVal.consolidate()))?Eu:(e=e.matrix,qm(e.a,e.b,e.c,e.d,e.e,e.f))}function ey(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,d,f,p,h,k){if(u!==f||d!==p){var S=h.push("translate(",null,t,null,n);k.push({i:S-4,x:_r(u,f)},{i:S-2,x:_r(d,p)})}else(f||p)&&h.push("translate("+f+t+p+n)}function o(u,d,f,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:f.push(i(f)+"rotate(",null,r)-2,x:_r(u,d)})):d&&f.push(i(f)+"rotate("+d+r)}function a(u,d,f,p){u!==d?p.push({i:f.push(i(f)+"skewX(",null,r)-2,x:_r(u,d)}):d&&f.push(i(f)+"skewX("+d+r)}function c(u,d,f,p,h,k){if(u!==f||d!==p){var S=h.push(i(h)+"scale(",null,",",null,")");k.push({i:S-4,x:_r(u,f)},{i:S-2,x:_r(d,p)})}else(f!==1||p!==1)&&h.push(i(h)+"scale("+f+","+p+")")}return function(u,d){var f=[],p=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,p),o(u.rotate,d.rotate,f,p),a(u.skewX,d.skewX,f,p),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,p),u=d=null,function(h){for(var k=-1,S=p.length,M;++k<S;)f[(M=p[k]).i]=M.x(h);return f.join("")}}}var ik=ey(nk,"px, ","px)","deg)"),sk=ey(rk,", ",")",")"),ok=1e-12;function Mp(e){return((e=Math.exp(e))+1/e)/2}function lk(e){return((e=Math.exp(e))-1/e)/2}function ak(e){return((e=Math.exp(2*e))-1)/(e+1)}const ck=function e(t,n,r){function i(s,o){var a=s[0],c=s[1],u=s[2],d=o[0],f=o[1],p=o[2],h=d-a,k=f-c,S=h*h+k*k,M,g;if(S<ok)g=Math.log(p/u)/t,M=function(P){return[a+P*h,c+P*k,u*Math.exp(t*P*g)]};else{var m=Math.sqrt(S),w=(p*p-u*u+r*S)/(2*u*n*m),v=(p*p-u*u-r*S)/(2*p*n*m),z=Math.log(Math.sqrt(w*w+1)-w),T=Math.log(Math.sqrt(v*v+1)-v);g=(T-z)/t,M=function(P){var x=P*g,E=Mp(z),I=u/(n*m)*(E*ak(t*x+z)-lk(z));return[a+I*h,c+I*k,u*E/Mp(t*x+z)]}}return M.duration=g*1e3*t/Math.SQRT2,M}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},i}(Math.SQRT2,2,4);var ps=0,Hs=0,Ds=0,ty=1e3,la,Ws,aa=0,Si=0,Ia=0,Co=typeof performance=="object"&&performance.now?performance:Date,ny=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ld(){return Si||(ny(uk),Si=Co.now()+Ia)}function uk(){Si=0}function ca(){this._call=this._time=this._next=null}ca.prototype=ry.prototype={constructor:ca,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ld():+n)+(t==null?0:+t),!this._next&&Ws!==this&&(Ws?Ws._next=this:la=this,Ws=this),this._call=e,this._time=n,Nu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nu())}};function ry(e,t,n){var r=new ca;return r.restart(e,t,n),r}function dk(){Ld(),++ps;for(var e=la,t;e;)(t=Si-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ps}function zp(){Si=(aa=Co.now())+Ia,ps=Hs=0;try{dk()}finally{ps=0,pk(),Si=0}}function fk(){var e=Co.now(),t=e-aa;t>ty&&(Ia-=t,aa=e)}function pk(){for(var e,t=la,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:la=n);Ws=e,Nu(r)}function Nu(e){if(!ps){Hs&&(Hs=clearTimeout(Hs));var t=e-Si;t>24?(e<1/0&&(Hs=setTimeout(zp,e-Co.now()-Ia)),Ds&&(Ds=clearInterval(Ds))):(Ds||(aa=Co.now(),Ds=setInterval(fk,ty)),ps=1,ny(zp))}}function Rp(e,t,n){var r=new ca;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var hk=za("start","end","cancel","interrupt"),gk=[],iy=0,Ip=1,Au=2,_l=3,Tp=4,_u=5,Dl=6;function Ta(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;mk(e,n,{name:t,index:r,group:i,on:hk,tween:gk,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:iy})}function Od(e,t){var n=Un(e,t);if(n.state>iy)throw new Error("too late; already scheduled");return n}function nr(e,t){var n=Un(e,t);if(n.state>_l)throw new Error("too late; already running");return n}function Un(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function mk(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ry(s,0,n.time);function s(u){n.state=Ip,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,f,p,h;if(n.state!==Ip)return c();for(d in r)if(h=r[d],h.name===n.name){if(h.state===_l)return Rp(o);h.state===Tp?(h.state=Dl,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[d]):+d<t&&(h.state=Dl,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[d])}if(Rp(function(){n.state===_l&&(n.state=Tp,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Au,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Au){for(n.state=_l,i=new Array(p=n.tween.length),d=0,f=-1;d<p;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=_u,1),f=-1,p=i.length;++f<p;)i[f].call(e,d);n.state===_u&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Dl,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ml(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Au&&r.state<_u,r.state=Dl,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function yk(e){return this.each(function(){Ml(this,e)})}function vk(e,t){var n,r;return function(){var i=nr(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function xk(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=nr(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=a;break}c===u&&i.push(a)}s.tween=i}}function wk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Un(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?vk:xk)(n,e,t))}function Fd(e,t,n){var r=e._id;return e.each(function(){var i=nr(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Un(i,r).value[t]}}function sy(e,t){var n;return(typeof t=="number"?_r:t instanceof bo?_p:(n=bo(t))?(t=n,_p):tk)(e,t)}function Sk(e){return function(){this.removeAttribute(e)}}function kk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bk(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Ck(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function jk(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Ek(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Nk(e,t){var n=Ra(e),r=n==="transform"?sk:sy;return this.attrTween(e,typeof t=="function"?(n.local?Ek:jk)(n,r,Fd(this,"attr."+e,t)):t==null?(n.local?kk:Sk)(n):(n.local?Ck:bk)(n,r,t))}function Ak(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _k(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Dk(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_k(e,s)),n}return i._value=t,i}function Mk(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ak(e,s)),n}return i._value=t,i}function zk(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ra(e);return this.tween(n,(r.local?Dk:Mk)(r,t))}function Rk(e,t){return function(){Od(this,e).delay=+t.apply(this,arguments)}}function Ik(e,t){return t=+t,function(){Od(this,e).delay=t}}function Tk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rk:Ik)(t,e)):Un(this.node(),t).delay}function Pk(e,t){return function(){nr(this,e).duration=+t.apply(this,arguments)}}function $k(e,t){return t=+t,function(){nr(this,e).duration=t}}function Lk(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pk:$k)(t,e)):Un(this.node(),t).duration}function Ok(e,t){if(typeof t!="function")throw new Error;return function(){nr(this,e).ease=t}}function Fk(e){var t=this._id;return arguments.length?this.each(Ok(t,e)):Un(this.node(),t).ease}function Bk(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;nr(this,e).ease=n}}function Hk(e){if(typeof e!="function")throw new Error;return this.each(Bk(this._id,e))}function Wk(e){typeof e!="function"&&(e=$m(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new mr(r,this._parents,this._name,this._id)}function Uk(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],u=n[a],d=c.length,f=o[a]=new Array(d),p,h=0;h<d;++h)(p=c[h]||u[h])&&(f[h]=p);for(;a<r;++a)o[a]=t[a];return new mr(o,this._parents,this._name,this._id)}function Vk(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Yk(e,t,n){var r,i,s=Vk(t)?Od:nr;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Gk(e,t){var n=this._id;return arguments.length<2?Un(this.node(),n).on.on(e):this.each(Yk(n,e,t))}function Xk(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Kk(){return this.on("end.remove",Xk(this._id))}function Jk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Td(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,u=s[o]=new Array(c),d,f,p=0;p<c;++p)(d=a[p])&&(f=e.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),u[p]=f,Ta(u[p],t,n,p,u,Un(d,n)));return new mr(s,this._parents,t,n)}function Qk(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pm(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var p=e.call(d,d.__data__,f,c),h,k=Un(d,n),S=0,M=p.length;S<M;++S)(h=p[S])&&Ta(h,t,n,S,p,k);s.push(p),o.push(d)}return new mr(s,o,t,n)}var Zk=Io.prototype.constructor;function qk(){return new Zk(this._groups,this._parents)}function eb(e,t){var n,r,i;return function(){var s=fs(this,e),o=(this.style.removeProperty(e),fs(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function oy(e){return function(){this.style.removeProperty(e)}}function tb(e,t,n){var r,i=n+"",s;return function(){var o=fs(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function nb(e,t,n){var r,i,s;return function(){var o=fs(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),fs(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function rb(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=nr(this,e),u=c.on,d=c.value[s]==null?a||(a=oy(t)):void 0;(u!==n||i!==d)&&(r=(n=u).copy()).on(o,i=d),c.on=r}}function ib(e,t,n){var r=(e+="")=="transform"?ik:sy;return t==null?this.styleTween(e,eb(e,r)).on("end.style."+e,oy(e)):typeof t=="function"?this.styleTween(e,nb(e,r,Fd(this,"style."+e,t))).each(rb(this._id,e)):this.styleTween(e,tb(e,r,t),n).on("end.style."+e,null)}function sb(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function ob(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&sb(e,o,n)),r}return s._value=t,s}function lb(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,ob(e,t,n??""))}function ab(e){return function(){this.textContent=e}}function cb(e){return function(){var t=e(this);this.textContent=t??""}}function ub(e){return this.tween("text",typeof e=="function"?cb(Fd(this,"text",e)):ab(e==null?"":e+""))}function db(e){return function(t){this.textContent=e.call(this,t)}}function fb(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&db(i)),t}return r._value=e,r}function pb(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,fb(e))}function hb(){for(var e=this._name,t=this._id,n=ly(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var d=Un(c,t);Ta(c,e,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new mr(r,this._parents,e,n)}function gb(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var u=nr(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),i===0&&s()})}var mb=0;function mr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ly(){return++mb}var ir=Io.prototype;mr.prototype={constructor:mr,select:Jk,selectAll:Qk,selectChild:ir.selectChild,selectChildren:ir.selectChildren,filter:Wk,merge:Uk,selection:qk,transition:hb,call:ir.call,nodes:ir.nodes,node:ir.node,size:ir.size,empty:ir.empty,each:ir.each,on:Gk,attr:Nk,attrTween:zk,style:ib,styleTween:lb,text:ub,textTween:pb,remove:Kk,tween:wk,delay:Tk,duration:Lk,ease:Fk,easeVarying:Hk,end:gb,[Symbol.iterator]:ir[Symbol.iterator]};function yb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var vb={time:null,delay:0,duration:250,ease:yb};function xb(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function wb(e){var t,n;e instanceof mr?(t=e._id,e=e._name):(t=ly(),(n=vb).time=Ld(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&Ta(c,e,t,u,o,n||xb(c,t));return new mr(r,this._parents,e,t)}Io.prototype.interrupt=yk;Io.prototype.transition=wb;const ll=e=>()=>e;function Sb(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function cr(e,t,n){this.k=e,this.x=t,this.y=n}cr.prototype={constructor:cr,scale:function(e){return e===1?this:new cr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new cr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dr=new cr(1,0,0);cr.prototype;function gc(e){e.stopImmediatePropagation()}function Ms(e){e.preventDefault(),e.stopImmediatePropagation()}function kb(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function bb(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Pp(){return this.__zoom||dr}function Cb(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function jb(){return navigator.maxTouchPoints||"ontouchstart"in this}function Eb(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function ay(){var e=kb,t=bb,n=Eb,r=Cb,i=jb,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=ck,u=za("start","zoom","end"),d,f,p,h=500,k=150,S=0,M=10;function g(y){y.property("__zoom",Pp).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",L).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(y,C,_,B){var A=y.selection?y.selection():y;A.property("__zoom",Pp),y!==A?z(y,C,_,B):A.interrupt().each(function(){T(this,arguments).event(B).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},g.scaleBy=function(y,C,_,B){g.scaleTo(y,function(){var A=this.__zoom.k,j=typeof C=="function"?C.apply(this,arguments):C;return A*j},_,B)},g.scaleTo=function(y,C,_,B){g.transform(y,function(){var A=t.apply(this,arguments),j=this.__zoom,D=_==null?v(A):typeof _=="function"?_.apply(this,arguments):_,H=j.invert(D),X=typeof C=="function"?C.apply(this,arguments):C;return n(w(m(j,X),D,H),A,o)},_,B)},g.translateBy=function(y,C,_,B){g.transform(y,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof _=="function"?_.apply(this,arguments):_),t.apply(this,arguments),o)},null,B)},g.translateTo=function(y,C,_,B,A){g.transform(y,function(){var j=t.apply(this,arguments),D=this.__zoom,H=B==null?v(j):typeof B=="function"?B.apply(this,arguments):B;return n(dr.translate(H[0],H[1]).scale(D.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof _=="function"?-_.apply(this,arguments):-_),j,o)},B,A)};function m(y,C){return C=Math.max(s[0],Math.min(s[1],C)),C===y.k?y:new cr(C,y.x,y.y)}function w(y,C,_){var B=C[0]-_[0]*y.k,A=C[1]-_[1]*y.k;return B===y.x&&A===y.y?y:new cr(y.k,B,A)}function v(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function z(y,C,_,B){y.on("start.zoom",function(){T(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(B).end()}).tween("zoom",function(){var A=this,j=arguments,D=T(A,j).event(B),H=t.apply(A,j),X=_==null?v(H):typeof _=="function"?_.apply(A,j):_,oe=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),Z=A.__zoom,we=typeof C=="function"?C.apply(A,j):C,ke=c(Z.invert(X).concat(oe/Z.k),we.invert(X).concat(oe/we.k));return function($){if($===1)$=we;else{var fe=ke($),ce=oe/fe[2];$=new cr(ce,X[0]-fe[0]*ce,X[1]-fe[1]*ce)}D.zoom(null,$)}})}function T(y,C,_){return!_&&y.__zooming||new P(y,C)}function P(y,C){this.that=y,this.args=C,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,C),this.taps=0}P.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,C){return this.mouse&&y!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var C=Cn(this.that).datum();u.call(y,this.that,new Sb(y,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:u}),C)}};function x(y,...C){if(!e.apply(this,arguments))return;var _=T(this,C).event(y),B=this.__zoom,A=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,r.apply(this,arguments)))),j=Pn(y);if(_.wheel)(_.mouse[0][0]!==j[0]||_.mouse[0][1]!==j[1])&&(_.mouse[1]=B.invert(_.mouse[0]=j)),clearTimeout(_.wheel);else{if(B.k===A)return;_.mouse=[j,B.invert(j)],Ml(this),_.start()}Ms(y),_.wheel=setTimeout(D,k),_.zoom("mouse",n(w(m(B,A),_.mouse[0],_.mouse[1]),_.extent,o));function D(){_.wheel=null,_.end()}}function E(y,...C){if(p||!e.apply(this,arguments))return;var _=y.currentTarget,B=T(this,C,!0).event(y),A=Cn(y.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",oe,!0),j=Pn(y,_),D=y.clientX,H=y.clientY;Gm(y.view),gc(y),B.mouse=[j,this.__zoom.invert(j)],Ml(this),B.start();function X(Z){if(Ms(Z),!B.moved){var we=Z.clientX-D,ke=Z.clientY-H;B.moved=we*we+ke*ke>S}B.event(Z).zoom("mouse",n(w(B.that.__zoom,B.mouse[0]=Pn(Z,_),B.mouse[1]),B.extent,o))}function oe(Z){A.on("mousemove.zoom mouseup.zoom",null),Xm(Z.view,B.moved),Ms(Z),B.event(Z).end()}}function I(y,...C){if(e.apply(this,arguments)){var _=this.__zoom,B=Pn(y.changedTouches?y.changedTouches[0]:y,this),A=_.invert(B),j=_.k*(y.shiftKey?.5:2),D=n(w(m(_,j),B,A),t.apply(this,C),o);Ms(y),a>0?Cn(this).transition().duration(a).call(z,D,B,y):Cn(this).call(g.transform,D,B,y)}}function L(y,...C){if(e.apply(this,arguments)){var _=y.touches,B=_.length,A=T(this,C,y.changedTouches.length===B).event(y),j,D,H,X;for(gc(y),D=0;D<B;++D)H=_[D],X=Pn(H,this),X=[X,this.__zoom.invert(X),H.identifier],A.touch0?!A.touch1&&A.touch0[2]!==X[2]&&(A.touch1=X,A.taps=0):(A.touch0=X,j=!0,A.taps=1+!!d);d&&(d=clearTimeout(d)),j&&(A.taps<2&&(f=X[0],d=setTimeout(function(){d=null},h)),Ml(this),A.start())}}function Y(y,...C){if(this.__zooming){var _=T(this,C).event(y),B=y.changedTouches,A=B.length,j,D,H,X;for(Ms(y),j=0;j<A;++j)D=B[j],H=Pn(D,this),_.touch0&&_.touch0[2]===D.identifier?_.touch0[0]=H:_.touch1&&_.touch1[2]===D.identifier&&(_.touch1[0]=H);if(D=_.that.__zoom,_.touch1){var oe=_.touch0[0],Z=_.touch0[1],we=_.touch1[0],ke=_.touch1[1],$=($=we[0]-oe[0])*$+($=we[1]-oe[1])*$,fe=(fe=ke[0]-Z[0])*fe+(fe=ke[1]-Z[1])*fe;D=m(D,Math.sqrt($/fe)),H=[(oe[0]+we[0])/2,(oe[1]+we[1])/2],X=[(Z[0]+ke[0])/2,(Z[1]+ke[1])/2]}else if(_.touch0)H=_.touch0[0],X=_.touch0[1];else return;_.zoom("touch",n(w(D,H,X),_.extent,o))}}function O(y,...C){if(this.__zooming){var _=T(this,C).event(y),B=y.changedTouches,A=B.length,j,D;for(gc(y),p&&clearTimeout(p),p=setTimeout(function(){p=null},h),j=0;j<A;++j)D=B[j],_.touch0&&_.touch0[2]===D.identifier?delete _.touch0:_.touch1&&_.touch1[2]===D.identifier&&delete _.touch1;if(_.touch1&&!_.touch0&&(_.touch0=_.touch1,delete _.touch1),_.touch0)_.touch0[1]=this.__zoom.invert(_.touch0[0]);else if(_.end(),_.taps===2&&(D=Pn(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<M)){var H=Cn(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return g.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:ll(+y),g):r},g.filter=function(y){return arguments.length?(e=typeof y=="function"?y:ll(!!y),g):e},g.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:ll(!!y),g):i},g.extent=function(y){return arguments.length?(t=typeof y=="function"?y:ll([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),g):t},g.scaleExtent=function(y){return arguments.length?(s[0]=+y[0],s[1]=+y[1],g):[s[0],s[1]]},g.translateExtent=function(y){return arguments.length?(o[0][0]=+y[0][0],o[1][0]=+y[1][0],o[0][1]=+y[0][1],o[1][1]=+y[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(y){return arguments.length?(n=y,g):n},g.duration=function(y){return arguments.length?(a=+y,g):a},g.interpolate=function(y){return arguments.length?(c=y,g):c},g.on=function(){var y=u.on.apply(u,arguments);return y===u?g:y},g.clickDistance=function(y){return arguments.length?(S=(y=+y)*y,g):Math.sqrt(S)},g.tapDistance=function(y){return arguments.length?(M=+y,g):M},g}const Pa=b.createContext(null),Nb=Pa.Provider,yr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},cy=yr.error001();function pt(e,t){const n=b.useContext(Pa);if(n===null)throw new Error(cy);return Im(n,e,t)}const zt=()=>{const e=b.useContext(Pa);if(e===null)throw new Error(cy);return b.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Ab=e=>e.userSelectionActive?"none":"all";function Bd({position:e,children:t,className:n,style:r,...i}){const s=pt(Ab),o=`${e}`.split("-");return U.createElement("div",{className:Ht(["react-flow__panel",n,...o]),style:{...r,pointerEvents:s},...i},t)}function _b({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:U.createElement(Bd,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},U.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Db=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d})=>{const f=b.useRef(null),[p,h]=b.useState({x:0,y:0,width:0,height:0}),k=Ht(["react-flow__edge-textwrapper",u]);return b.useEffect(()=>{if(f.current){const S=f.current.getBBox();h({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),typeof n>"u"||!n?null:U.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:k,visibility:p.width?"visible":"hidden",...d},i&&U.createElement("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),U.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:r},n),c)};var Mb=b.memo(Db);const Hd=e=>({width:e.offsetWidth,height:e.offsetHeight}),hs=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wd=(e={x:0,y:0},t)=>({x:hs(e.x,t[0][0],t[1][0]),y:hs(e.y,t[0][1],t[1][1])}),$p=(e,t,n)=>e<t?hs(Math.abs(e-t),1,50)/50:e>n?-hs(Math.abs(e-n),1,50)/50:0,uy=(e,t)=>{const n=$p(e.x,35,t.width-35)*20,r=$p(e.y,35,t.height-35)*20;return[n,r]},dy=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},fy=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),py=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Lp=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),zb=(e,t)=>py(fy(jo(e),jo(t))),Du=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Rb=e=>En(e.width)&&En(e.height)&&En(e.x)&&En(e.y),En=e=>!isNaN(e)&&isFinite(e),Ct=Symbol.for("internals"),hy=["Enter"," ","Escape"],Ib=(e,t)=>{},Tb=e=>"nativeEvent"in e;function Mu(e){var i,s;const t=Tb(e)?e.nativeEvent:e,n=((s=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const gy=e=>"clientX"in e,Yr=(e,t)=>{var s,o;const n=gy(e),r=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,i=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},ua=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Po=({id:e,path:t,labelX:n,labelY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h=20})=>U.createElement(U.Fragment,null,U.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),h&&U.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),i&&En(n)&&En(r)?U.createElement(Mb,{x:n,y:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Po.displayName="BaseEdge";function zs(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(s=>s.id===e);i&&n(r,{...i})}}function my({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function yy({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const c=e*.125+i*.375+o*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var ki;(function(e){e.Strict="strict",e.Loose="loose"})(ki||(ki={}));var di;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(di||(di={}));var Eo;(function(e){e.Partial="partial",e.Full="full"})(Eo||(Eo={}));var Tr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Tr||(Tr={}));var da;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(da||(da={}));var Me;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Me||(Me={}));function Op({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Me.Left||e===Me.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function vy({sourceX:e,sourceY:t,sourcePosition:n=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top}){const[o,a]=Op({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,u]=Op({pos:s,x1:r,y1:i,x2:e,y2:t}),[d,f,p,h]=yy({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${a} ${c},${u} ${r},${i}`,d,f,p,h]}const Ud=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Me.Bottom,targetPosition:s=Me.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:k,interactionWidth:S})=>{const[M,g,m]=vy({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s});return U.createElement(Po,{path:M,labelX:g,labelY:m,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:k,interactionWidth:S})});Ud.displayName="SimpleBezierEdge";const Fp={[Me.Left]:{x:-1,y:0},[Me.Right]:{x:1,y:0},[Me.Top]:{x:0,y:-1},[Me.Bottom]:{x:0,y:1}},Pb=({source:e,sourcePosition:t=Me.Bottom,target:n})=>t===Me.Left||t===Me.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Bp=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function $b({source:e,sourcePosition:t=Me.Bottom,target:n,targetPosition:r=Me.Top,center:i,offset:s}){const o=Fp[t],a=Fp[r],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},d=Pb({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",p=d[f];let h=[],k,S;const M={x:0,y:0},g={x:0,y:0},[m,w,v,z]=my({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*a[f]===-1){k=i.x??m,S=i.y??w;const P=[{x:k,y:c.y},{x:k,y:u.y}],x=[{x:c.x,y:S},{x:u.x,y:S}];o[f]===p?h=f==="x"?P:x:h=f==="x"?x:P}else{const P=[{x:c.x,y:u.y}],x=[{x:u.x,y:c.y}];if(f==="x"?h=o.x===p?x:P:h=o.y===p?P:x,t===r){const O=Math.abs(e[f]-n[f]);if(O<=s){const y=Math.min(s-1,s-O);o[f]===p?M[f]=(c[f]>e[f]?-1:1)*y:g[f]=(u[f]>n[f]?-1:1)*y}}if(t!==r){const O=f==="x"?"y":"x",y=o[f]===a[O],C=c[O]>u[O],_=c[O]<u[O];(o[f]===1&&(!y&&C||y&&_)||o[f]!==1&&(!y&&_||y&&C))&&(h=f==="x"?P:x)}const E={x:c.x+M.x,y:c.y+M.y},I={x:u.x+g.x,y:u.y+g.y},L=Math.max(Math.abs(E.x-h[0].x),Math.abs(I.x-h[0].x)),Y=Math.max(Math.abs(E.y-h[0].y),Math.abs(I.y-h[0].y));L>=Y?(k=(E.x+I.x)/2,S=h[0].y):(k=h[0].x,S=(E.y+I.y)/2)}return[[e,{x:c.x+M.x,y:c.y+M.y},...h,{x:u.x+g.x,y:u.y+g.y},n],k,S,v,z]}function Lb(e,t,n,r){const i=Math.min(Bp(e,t)/2,Bp(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*a},${o}`}function zu({sourceX:e,sourceY:t,sourcePosition:n=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20}){const[d,f,p,h,k]=$b({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:c},offset:u});return[d.reduce((M,g,m)=>{let w="";return m>0&&m<d.length-1?w=Lb(d[m-1],g,d[m+1],o):w=`${m===0?"M":"L"}${g.x} ${g.y}`,M+=w,M},""),f,p,h,k]}const $a=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Me.Bottom,targetPosition:p=Me.Top,markerEnd:h,markerStart:k,pathOptions:S,interactionWidth:M})=>{const[g,m,w]=zu({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:p,borderRadius:S==null?void 0:S.borderRadius,offset:S==null?void 0:S.offset});return U.createElement(Po,{path:g,labelX:m,labelY:w,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:k,interactionWidth:M})});$a.displayName="SmoothStepEdge";const Vd=b.memo(e=>{var t;return U.createElement($a,{...e,pathOptions:b.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Vd.displayName="StepEdge";function Ob({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=my({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const Yd=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h})=>{const[k,S,M]=Ob({sourceX:e,sourceY:t,targetX:n,targetY:r});return U.createElement(Po,{path:k,labelX:S,labelY:M,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h})});Yd.displayName="StraightEdge";function al(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Hp({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Me.Left:return[t-al(t-r,s),n];case Me.Right:return[t+al(r-t,s),n];case Me.Top:return[t,n-al(n-i,s)];case Me.Bottom:return[t,n+al(i-n,s)]}}function xy({sourceX:e,sourceY:t,sourcePosition:n=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top,curvature:o=.25}){const[a,c]=Hp({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[u,d]=Hp({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[f,p,h,k]=yy({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${r},${i}`,f,p,h,k]}const fa=b.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Me.Bottom,targetPosition:s=Me.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:k,pathOptions:S,interactionWidth:M})=>{const[g,m,w]=xy({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:s,curvature:S==null?void 0:S.curvature});return U.createElement(Po,{path:g,labelX:m,labelY:w,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:k,interactionWidth:M})});fa.displayName="BezierEdge";const Gd=b.createContext(null),Fb=Gd.Provider;Gd.Consumer;const Bb=()=>b.useContext(Gd),Hb=e=>"id"in e&&"source"in e&&"target"in e,Wb=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Ru=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,Ub=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Xd=(e,t)=>{if(!e.source||!e.target)return t;let n;return Hb(e)?n={...e}:n={...e,id:Wb(e)},Ub(n,t)?t:t.concat(n)},Iu=({x:e,y:t},[n,r,i],s,[o,a])=>{const c={x:(e-n)/i,y:(t-r)/i};return s?{x:o*Math.round(c.x/o),y:a*Math.round(c.y/a)}:c},wy=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),gi=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},La=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:s,y:o}=gi(i,t).positionAbsolute;return fy(r,jo({x:s,y:o,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return py(n)},Sy=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const c={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(d=>{const{width:f,height:p,selectable:h=!0,hidden:k=!1}=d;if(o&&!h||k)return!1;const{positionAbsolute:S}=gi(d,a),M={x:S.x,y:S.y,width:f||0,height:p||0},g=Du(c,M),m=typeof f>"u"||typeof p>"u"||f===null||p===null,w=s&&g>0,v=(f||0)*(p||0);(m||w||g>=v||d.dragging)&&u.push(d)}),u},ky=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},by=(e,t,n,r,i,s=.1)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(o,a),u=hs(c,r,i),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*u,h=n/2-f*u;return{x:p,y:h,zoom:u}},ri=(e,t=0)=>e.transition().duration(t);function Wp(e,t,n,r){return(t[n]||[]).reduce((i,s)=>{var o,a;return`${e.id}-${s.id}-${n}`!==r&&i.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),i},[])}function Vb(e,t,n,r,i,s){const{x:o,y:a}=Yr(e),u=t.elementsFromPoint(o,a).find(k=>k.classList.contains("react-flow__handle"));if(u){const k=u.getAttribute("data-nodeid");if(k){const S=Kd(void 0,u),M=u.getAttribute("data-handleid"),g=s({nodeId:k,id:M,type:S});if(g){const m=i.find(w=>w.nodeId===k&&w.type===S&&w.id===M);return{handle:{id:M,type:S,nodeId:k,x:(m==null?void 0:m.x)||n.x,y:(m==null?void 0:m.y)||n.y},validHandleResult:g}}}}let d=[],f=1/0;if(i.forEach(k=>{const S=Math.sqrt((k.x-n.x)**2+(k.y-n.y)**2);if(S<=r){const M=s(k);S<=f&&(S<f?d=[{handle:k,validHandleResult:M}]:S===f&&d.push({handle:k,validHandleResult:M}),f=S)}}),!d.length)return{handle:null,validHandleResult:Cy()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:k})=>k.isValid),h=d.some(({handle:k})=>k.type==="target");return d.find(({handle:k,validHandleResult:S})=>h?k.type==="target":p?S.isValid:!0)||d[0]}const Yb={source:null,target:null,sourceHandle:null,targetHandle:null},Cy=()=>({handleDomNode:null,isValid:!1,connection:Yb,endHandle:null});function jy(e,t,n,r,i,s,o){const a=i==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Cy(),handleDomNode:c};if(c){const d=Kd(void 0,c),f=c.getAttribute("data-nodeid"),p=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),k=c.classList.contains("connectableend"),S={source:a?f:n,sourceHandle:a?p:r,target:a?n:f,targetHandle:a?r:p};u.connection=S,h&&k&&(t===ki.Strict?a&&d==="source"||!a&&d==="target":f!==n||p!==r)&&(u.endHandle={nodeId:f,handleId:p,type:d},u.isValid=s(S))}return u}function Gb({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,s)=>{if(s[Ct]){const{handleBounds:o}=s[Ct];let a=[],c=[];o&&(a=Wp(s,o,"source",`${t}-${n}-${r}`),c=Wp(s,o,"target",`${t}-${n}-${r}`)),i.push(...a,...c)}return i},[])}function Kd(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function mc(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Xb(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Ey({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const d=dy(e.target),{connectionMode:f,domNode:p,autoPanOnConnect:h,connectionRadius:k,onConnectStart:S,panBy:M,getNodes:g,cancelConnection:m}=s();let w=0,v;const{x:z,y:T}=Yr(e),P=d==null?void 0:d.elementFromPoint(z,T),x=Kd(c,P),E=p==null?void 0:p.getBoundingClientRect();if(!E||!x)return;let I,L=Yr(e,E),Y=!1,O=null,y=!1,C=null;const _=Gb({nodes:g(),nodeId:n,handleId:t,handleType:x}),B=()=>{if(!h)return;const[D,H]=uy(L,E);M({x:D,y:H}),w=requestAnimationFrame(B)};o({connectionPosition:L,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:x,connectionStartHandle:{nodeId:n,handleId:t,type:x},connectionEndHandle:null}),S==null||S(e,{nodeId:n,handleId:t,handleType:x});function A(D){const{transform:H}=s();L=Yr(D,E);const{handle:X,validHandleResult:oe}=Vb(D,d,Iu(L,H,!1,[1,1]),k,_,Z=>jy(Z,f,n,t,i?"target":"source",a,d));if(v=X,Y||(B(),Y=!0),C=oe.handleDomNode,O=oe.connection,y=oe.isValid,o({connectionPosition:v&&y?wy({x:v.x,y:v.y},H):L,connectionStatus:Xb(!!v,y),connectionEndHandle:oe.endHandle}),!v&&!y&&!C)return mc(I);O.source!==O.target&&C&&(mc(I),I=C,C.classList.add("connecting","react-flow__handle-connecting"),C.classList.toggle("valid",y),C.classList.toggle("react-flow__handle-valid",y))}function j(D){var H,X;(v||C)&&O&&y&&(r==null||r(O)),(X=(H=s()).onConnectEnd)==null||X.call(H,D),c&&(u==null||u(D)),mc(I),m(),cancelAnimationFrame(w),Y=!1,y=!1,O=null,C=null,d.removeEventListener("mousemove",A),d.removeEventListener("mouseup",j),d.removeEventListener("touchmove",A),d.removeEventListener("touchend",j)}d.addEventListener("mousemove",A),d.addEventListener("mouseup",j),d.addEventListener("touchmove",A),d.addEventListener("touchend",j)}const Up=()=>!0,Kb=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Jb=(e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:s,connectionClickStartHandle:o}=r;return{connecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},Ny=b.forwardRef(({type:e="source",position:t=Me.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:f,...p},h)=>{var E,I;const k=o||null,S=e==="target",M=zt(),g=Bb(),{connectOnClick:m,noPanClassName:w}=pt(Kb,Tt),{connecting:v,clickConnecting:z}=pt(Jb(g,k,e),Tt);g||(I=(E=M.getState()).onError)==null||I.call(E,"010",yr.error010());const T=L=>{const{defaultEdgeOptions:Y,onConnect:O,hasDefaultEdges:y}=M.getState(),C={...Y,...L};if(y){const{edges:_,setEdges:B}=M.getState();B(Xd(C,_))}O==null||O(C),a==null||a(C)},P=L=>{if(!g)return;const Y=gy(L);i&&(Y&&L.button===0||!Y)&&Ey({event:L,handleId:k,nodeId:g,onConnect:T,isTarget:S,getState:M.getState,setState:M.setState,isValidConnection:n||M.getState().isValidConnection||Up}),Y?d==null||d(L):f==null||f(L)},x=L=>{const{onClickConnectStart:Y,onClickConnectEnd:O,connectionClickStartHandle:y,connectionMode:C,isValidConnection:_}=M.getState();if(!g||!y&&!i)return;if(!y){Y==null||Y(L,{nodeId:g,handleId:k,handleType:e}),M.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:k}});return}const B=dy(L.target),A=n||_||Up,{connection:j,isValid:D}=jy({nodeId:g,id:k,type:e},C,y.nodeId,y.handleId||null,y.type,A,B);D&&T(j),O==null||O(L),M.setState({connectionClickStartHandle:null})};return U.createElement("div",{"data-handleid":k,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${k}-${e}`,className:Ht(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,u,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,connecting:z,connectionindicator:r&&(i&&!v||s&&v)}]),onMouseDown:P,onTouchStart:P,onClick:m?x:void 0,ref:h,...p},c)});Ny.displayName="Handle";var At=b.memo(Ny);const Ay=({data:e,isConnectable:t,targetPosition:n=Me.Top,sourcePosition:r=Me.Bottom})=>U.createElement(U.Fragment,null,U.createElement(At,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,U.createElement(At,{type:"source",position:r,isConnectable:t}));Ay.displayName="DefaultNode";var Tu=b.memo(Ay);const _y=({data:e,isConnectable:t,sourcePosition:n=Me.Bottom})=>U.createElement(U.Fragment,null,e==null?void 0:e.label,U.createElement(At,{type:"source",position:n,isConnectable:t}));_y.displayName="InputNode";var Dy=b.memo(_y);const My=({data:e,isConnectable:t,targetPosition:n=Me.Top})=>U.createElement(U.Fragment,null,U.createElement(At,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);My.displayName="OutputNode";var zy=b.memo(My);const Jd=()=>null;Jd.displayName="GroupNode";const Qb=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),cl=e=>e.id;function Zb(e,t){return Tt(e.selectedNodes.map(cl),t.selectedNodes.map(cl))&&Tt(e.selectedEdges.map(cl),t.selectedEdges.map(cl))}const Ry=b.memo(({onSelectionChange:e})=>{const t=zt(),{selectedNodes:n,selectedEdges:r}=pt(Qb,Zb);return b.useEffect(()=>{const i={nodes:n,edges:r};e==null||e(i),t.getState().onSelectionChange.forEach(s=>s(i))},[n,r,e]),null});Ry.displayName="SelectionListener";const qb=e=>!!e.onSelectionChange;function e2({onSelectionChange:e}){const t=pt(qb);return e||t?U.createElement(Ry,{onSelectionChange:e}):null}const t2=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ai(e,t){b.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ze(e,t,n){b.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const n2=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:h,elevateNodesOnSelect:k,minZoom:S,maxZoom:M,nodeExtent:g,onNodesChange:m,onEdgesChange:w,elementsSelectable:v,connectionMode:z,snapGrid:T,snapToGrid:P,translateExtent:x,connectOnClick:E,defaultEdgeOptions:I,fitView:L,fitViewOptions:Y,onNodesDelete:O,onEdgesDelete:y,onNodeDrag:C,onNodeDragStart:_,onNodeDragStop:B,onSelectionDrag:A,onSelectionDragStart:j,onSelectionDragStop:D,noPanClassName:H,nodeOrigin:X,rfId:oe,autoPanOnConnect:Z,autoPanOnNodeDrag:we,onError:ke,connectionRadius:$,isValidConnection:fe,nodeDragThreshold:ce})=>{const{setNodes:ve,setEdges:Pe,setDefaultNodesAndEdges:te,setMinZoom:je,setMaxZoom:_e,setTranslateExtent:Ee,setNodeExtent:ot,reset:nt}=pt(t2,Tt),ae=zt();return b.useEffect(()=>{const rt=r==null?void 0:r.map(F=>({...F,...I}));return te(n,rt),()=>{nt()}},[]),Ze("defaultEdgeOptions",I,ae.setState),Ze("connectionMode",z,ae.setState),Ze("onConnect",i,ae.setState),Ze("onConnectStart",s,ae.setState),Ze("onConnectEnd",o,ae.setState),Ze("onClickConnectStart",a,ae.setState),Ze("onClickConnectEnd",c,ae.setState),Ze("nodesDraggable",u,ae.setState),Ze("nodesConnectable",d,ae.setState),Ze("nodesFocusable",f,ae.setState),Ze("edgesFocusable",p,ae.setState),Ze("edgesUpdatable",h,ae.setState),Ze("elementsSelectable",v,ae.setState),Ze("elevateNodesOnSelect",k,ae.setState),Ze("snapToGrid",P,ae.setState),Ze("snapGrid",T,ae.setState),Ze("onNodesChange",m,ae.setState),Ze("onEdgesChange",w,ae.setState),Ze("connectOnClick",E,ae.setState),Ze("fitViewOnInit",L,ae.setState),Ze("fitViewOnInitOptions",Y,ae.setState),Ze("onNodesDelete",O,ae.setState),Ze("onEdgesDelete",y,ae.setState),Ze("onNodeDrag",C,ae.setState),Ze("onNodeDragStart",_,ae.setState),Ze("onNodeDragStop",B,ae.setState),Ze("onSelectionDrag",A,ae.setState),Ze("onSelectionDragStart",j,ae.setState),Ze("onSelectionDragStop",D,ae.setState),Ze("noPanClassName",H,ae.setState),Ze("nodeOrigin",X,ae.setState),Ze("rfId",oe,ae.setState),Ze("autoPanOnConnect",Z,ae.setState),Ze("autoPanOnNodeDrag",we,ae.setState),Ze("onError",ke,ae.setState),Ze("connectionRadius",$,ae.setState),Ze("isValidConnection",fe,ae.setState),Ze("nodeDragThreshold",ce,ae.setState),Ai(e,ve),Ai(t,Pe),Ai(S,je),Ai(M,_e),Ai(x,Ee),Ai(g,ot),null},Vp={display:"none"},r2={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Iy="react-flow__node-desc",Ty="react-flow__edge-desc",i2="react-flow__aria-live",s2=e=>e.ariaLiveMessage;function o2({rfId:e}){const t=pt(s2);return U.createElement("div",{id:`${i2}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:r2},t)}function l2({rfId:e,disableKeyboardA11y:t}){return U.createElement(U.Fragment,null,U.createElement("div",{id:`${Iy}-${e}`,style:Vp},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),U.createElement("div",{id:`${Ty}-${e}`,style:Vp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&U.createElement(o2,{rfId:e}))}var No=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,r]=b.useState(!1),i=b.useRef(!1),s=b.useRef(new Set([])),[o,a]=b.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,p)=>f.concat(...p),[]);return[u,d]}return[[],[]]},[e]);return b.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey,(!i.current||i.current&&!t.actInsideInputWithModifier)&&Mu(h))return!1;const S=Gp(h.code,a);s.current.add(h[S]),Yp(o,s.current,!1)&&(h.preventDefault(),r(!0))},f=h=>{if((!i.current||i.current&&!t.actInsideInputWithModifier)&&Mu(h))return!1;const S=Gp(h.code,a);Yp(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(h[S]),h.key==="Meta"&&s.current.clear(),i.current=!1},p=()=>{s.current.clear(),r(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[e,r]),n};function Yp(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Gp(e,t){return t.includes(e)?"code":"key"}function Py(e,t,n,r){var a,c;const i=e.parentNode||e.parentId;if(!i)return n;const s=t.get(i),o=gi(s,r);return Py(s,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[Ct])==null?void 0:a.z)??0)>(n.z??0)?((c=s[Ct])==null?void 0:c.z)??0:n.z??0},r)}function $y(e,t,n){e.forEach(r=>{var s;const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n!=null&&n[r.id]){const{x:o,y:a,z:c}=Py(r,e,{...r.position,z:((s=r[Ct])==null?void 0:s.z)??0},t);r.positionAbsolute={x:o,y:a},r[Ct].z=c,n!=null&&n[r.id]&&(r[Ct].isParent=!0)}})}function yc(e,t,n,r){const i=new Map,s={},o=r?1e3:0;return e.forEach(a=>{var h;const c=(En(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=t.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(s[f]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,Ct,{enumerable:!1,value:{handleBounds:p||(h=u==null?void 0:u[Ct])==null?void 0:h.handleBounds,z:c}}),i.set(a.id,d)}),$y(i,n,s),i}function Ly(e,t={}){const{getNodes:n,width:r,height:i,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),p=t.initial&&!u&&d;if(a&&c&&(p||!t.initial)){const k=n().filter(M=>{var m;const g=t.includeHiddenNodes?M.width&&M.height:!M.hidden;return(m=t.nodes)!=null&&m.length?g&&t.nodes.some(w=>w.id===M.id):g}),S=k.every(M=>M.width&&M.height);if(k.length>0&&S){const M=La(k,f),{x:g,y:m,zoom:w}=by(M,r,i,t.minZoom??s,t.maxZoom??o,t.padding??.1),v=dr.translate(g,m).scale(w);return typeof t.duration=="number"&&t.duration>0?a.transform(ri(c,t.duration),v):a.transform(c,v),!0}}return!1}function a2(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ct]:r[Ct],selected:n.selected})}),new Map(t)}function c2(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function ul({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&r({nodeInternals:a2(e,i)}),o==null||o(e)),t!=null&&t.length&&(u&&r({edges:c2(t,s)}),a==null||a(t))}const _i=()=>{},u2={zoomIn:_i,zoomOut:_i,zoomTo:_i,getZoom:()=>1,setViewport:_i,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:_i,fitBounds:_i,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},d2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),f2=()=>{const e=zt(),{d3Zoom:t,d3Selection:n}=pt(d2,Tt);return b.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(ri(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(ri(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,s)=>t.scaleTo(ri(n,s==null?void 0:s.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,s)=>{const[o,a,c]=e.getState().transform,u=dr.translate(i.x??o,i.y??a).scale(i.zoom??c);t.transform(ri(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[i,s,o]=e.getState().transform;return{x:i,y:s,zoom:o}},fitView:i=>Ly(e.getState,i),setCenter:(i,s,o)=>{const{width:a,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=a/2-i*d,p=c/2-s*d,h=dr.translate(f,p).scale(d);t.transform(ri(n,o==null?void 0:o.duration),h)},fitBounds:(i,s)=>{const{width:o,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:p}=by(i,o,a,c,u,(s==null?void 0:s.padding)??.1),h=dr.translate(d,f).scale(p);t.transform(ri(n,s==null?void 0:s.duration),h)},project:i=>{const{transform:s,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Iu(i,s,o,a)},screenToFlowPosition:i=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:c}=e.getState();if(!c)return i;const{x:u,y:d}=c.getBoundingClientRect(),f={x:i.x-u,y:i.y-d};return Iu(f,s,o,a)},flowToScreenPosition:i=>{const{transform:s,domNode:o}=e.getState();if(!o)return i;const{x:a,y:c}=o.getBoundingClientRect(),u=wy(i,s);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:u2,[t,n])};function Vn(){const e=f2(),t=zt(),n=b.useCallback(()=>t.getState().getNodes().map(S=>({...S})),[]),r=b.useCallback(S=>t.getState().nodeInternals.get(S),[]),i=b.useCallback(()=>{const{edges:S=[]}=t.getState();return S.map(M=>({...M}))},[]),s=b.useCallback(S=>{const{edges:M=[]}=t.getState();return M.find(g=>g.id===S)},[]),o=b.useCallback(S=>{const{getNodes:M,setNodes:g,hasDefaultNodes:m,onNodesChange:w}=t.getState(),v=M(),z=typeof S=="function"?S(v):S;if(m)g(z);else if(w){const T=z.length===0?v.map(P=>({type:"remove",id:P.id})):z.map(P=>({item:P,type:"reset"}));w(T)}},[]),a=b.useCallback(S=>{const{edges:M=[],setEdges:g,hasDefaultEdges:m,onEdgesChange:w}=t.getState(),v=typeof S=="function"?S(M):S;if(m)g(v);else if(w){const z=v.length===0?M.map(T=>({type:"remove",id:T.id})):v.map(T=>({item:T,type:"reset"}));w(z)}},[]),c=b.useCallback(S=>{const M=Array.isArray(S)?S:[S],{getNodes:g,setNodes:m,hasDefaultNodes:w,onNodesChange:v}=t.getState();if(w){const T=[...g(),...M];m(T)}else if(v){const z=M.map(T=>({item:T,type:"add"}));v(z)}},[]),u=b.useCallback(S=>{const M=Array.isArray(S)?S:[S],{edges:g=[],setEdges:m,hasDefaultEdges:w,onEdgesChange:v}=t.getState();if(w)m([...g,...M]);else if(v){const z=M.map(T=>({item:T,type:"add"}));v(z)}},[]),d=b.useCallback(()=>{const{getNodes:S,edges:M=[],transform:g}=t.getState(),[m,w,v]=g;return{nodes:S().map(z=>({...z})),edges:M.map(z=>({...z})),viewport:{x:m,y:w,zoom:v}}},[]),f=b.useCallback(({nodes:S,edges:M})=>{const{nodeInternals:g,getNodes:m,edges:w,hasDefaultNodes:v,hasDefaultEdges:z,onNodesDelete:T,onEdgesDelete:P,onNodesChange:x,onEdgesChange:E}=t.getState(),I=(S||[]).map(C=>C.id),L=(M||[]).map(C=>C.id),Y=m().reduce((C,_)=>{const B=_.parentNode||_.parentId,A=!I.includes(_.id)&&B&&C.find(D=>D.id===B);return(typeof _.deletable=="boolean"?_.deletable:!0)&&(I.includes(_.id)||A)&&C.push(_),C},[]),O=w.filter(C=>typeof C.deletable=="boolean"?C.deletable:!0),y=O.filter(C=>L.includes(C.id));if(Y||y){const C=ky(Y,O),_=[...y,...C],B=_.reduce((A,j)=>(A.includes(j.id)||A.push(j.id),A),[]);if((z||v)&&(z&&t.setState({edges:w.filter(A=>!B.includes(A.id))}),v&&(Y.forEach(A=>{g.delete(A.id)}),t.setState({nodeInternals:new Map(g)}))),B.length>0&&(P==null||P(_),E&&E(B.map(A=>({id:A,type:"remove"})))),Y.length>0&&(T==null||T(Y),x)){const A=Y.map(j=>({id:j.id,type:"remove"}));x(A)}}},[]),p=b.useCallback(S=>{const M=Rb(S),g=M?null:t.getState().nodeInternals.get(S.id);return!M&&!g?[null,null,M]:[M?S:Lp(g),g,M]},[]),h=b.useCallback((S,M=!0,g)=>{const[m,w,v]=p(S);return m?(g||t.getState().getNodes()).filter(z=>{if(!v&&(z.id===w.id||!z.positionAbsolute))return!1;const T=Lp(z),P=Du(T,m);return M&&P>0||P>=m.width*m.height}):[]},[]),k=b.useCallback((S,M,g=!0)=>{const[m]=p(S);if(!m)return!1;const w=Du(m,M);return g&&w>0||w>=m.width*m.height},[]);return b.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:s,setNodes:o,setEdges:a,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:k}),[e,n,r,i,s,o,a,c,u,d,f,h,k])}const p2={actInsideInputWithModifier:!1};var h2=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=zt(),{deleteElements:r}=Vn(),i=No(e,p2),s=No(t);b.useEffect(()=>{if(i){const{edges:o,getNodes:a}=n.getState(),c=a().filter(d=>d.selected),u=o.filter(d=>d.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),b.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function g2(e){const t=zt();b.useEffect(()=>{let n;const r=()=>{var s,o;if(!e.current)return;const i=Hd(e.current);(i.height===0||i.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",yr.error004())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Qd={position:"absolute",width:"100%",height:"100%",top:0,left:0},m2=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,dl=e=>({x:e.x,y:e.y,zoom:e.k}),Di=(e,t)=>e.target.closest(`.${t}`),Xp=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Kp=e=>{const t=e.ctrlKey&&ua()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},y2=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),v2=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=di.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:p,translateExtent:h,minZoom:k,maxZoom:S,zoomActivationKeyCode:M,preventScrolling:g=!0,children:m,noWheelClassName:w,noPanClassName:v})=>{const z=b.useRef(),T=zt(),P=b.useRef(!1),x=b.useRef(!1),E=b.useRef(null),I=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:L,d3Selection:Y,d3ZoomHandler:O,userSelectionActive:y}=pt(y2,Tt),C=No(M),_=b.useRef(0),B=b.useRef(!1),A=b.useRef();return g2(E),b.useEffect(()=>{if(E.current){const j=E.current.getBoundingClientRect(),D=ay().scaleExtent([k,S]).translateExtent(h),H=Cn(E.current).call(D),X=dr.translate(p.x,p.y).scale(hs(p.zoom,k,S)),oe=[[0,0],[j.width,j.height]],Z=D.constrain()(X,oe,h);D.transform(H,Z),D.wheelDelta(Kp),T.setState({d3Zoom:D,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[Z.x,Z.y,Z.k],domNode:E.current.closest(".react-flow")})}},[]),b.useEffect(()=>{Y&&L&&(o&&!C&&!y?Y.on("wheel.zoom",j=>{if(Di(j,w))return!1;j.preventDefault(),j.stopImmediatePropagation();const D=Y.property("__zoom").k||1;if(j.ctrlKey&&s){const fe=Pn(j),ce=Kp(j),ve=D*Math.pow(2,ce);L.scaleTo(Y,ve,fe,j);return}const H=j.deltaMode===1?20:1;let X=c===di.Vertical?0:j.deltaX*H,oe=c===di.Horizontal?0:j.deltaY*H;!ua()&&j.shiftKey&&c!==di.Vertical&&(X=j.deltaY*H,oe=0),L.translateBy(Y,-(X/D)*a,-(oe/D)*a,{internal:!0});const Z=dl(Y.property("__zoom")),{onViewportChangeStart:we,onViewportChange:ke,onViewportChangeEnd:$}=T.getState();clearTimeout(A.current),B.current||(B.current=!0,t==null||t(j,Z),we==null||we(Z)),B.current&&(e==null||e(j,Z),ke==null||ke(Z),A.current=setTimeout(()=>{n==null||n(j,Z),$==null||$(Z),B.current=!1},150))},{passive:!1}):typeof O<"u"&&Y.on("wheel.zoom",function(j,D){if(!g&&j.type==="wheel"&&!j.ctrlKey||Di(j,w))return null;j.preventDefault(),O.call(this,j,D)},{passive:!1}))},[y,o,c,Y,L,O,C,s,g,w,t,e,n]),b.useEffect(()=>{L&&L.on("start",j=>{var X,oe;if(!j.sourceEvent||j.sourceEvent.internal)return null;_.current=(X=j.sourceEvent)==null?void 0:X.button;const{onViewportChangeStart:D}=T.getState(),H=dl(j.transform);P.current=!0,I.current=H,((oe=j.sourceEvent)==null?void 0:oe.type)==="mousedown"&&T.setState({paneDragging:!0}),D==null||D(H),t==null||t(j.sourceEvent,H)})},[L,t]),b.useEffect(()=>{L&&(y&&!P.current?L.on("zoom",null):y||L.on("zoom",j=>{var H;const{onViewportChange:D}=T.getState();if(T.setState({transform:[j.transform.x,j.transform.y,j.transform.k]}),x.current=!!(r&&Xp(f,_.current??0)),(e||D)&&!((H=j.sourceEvent)!=null&&H.internal)){const X=dl(j.transform);D==null||D(X),e==null||e(j.sourceEvent,X)}}))},[y,L,e,f,r]),b.useEffect(()=>{L&&L.on("end",j=>{if(!j.sourceEvent||j.sourceEvent.internal)return null;const{onViewportChangeEnd:D}=T.getState();if(P.current=!1,T.setState({paneDragging:!1}),r&&Xp(f,_.current??0)&&!x.current&&r(j.sourceEvent),x.current=!1,(n||D)&&m2(I.current,j.transform)){const H=dl(j.transform);I.current=H,clearTimeout(z.current),z.current=setTimeout(()=>{D==null||D(H),n==null||n(j.sourceEvent,H)},o?150:0)}})},[L,o,f,n,r]),b.useEffect(()=>{L&&L.filter(j=>{const D=C||i,H=s&&j.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&j.button===1&&j.type==="mousedown"&&(Di(j,"react-flow__node")||Di(j,"react-flow__edge")))return!0;if(!f&&!D&&!o&&!u&&!s||y||!u&&j.type==="dblclick"||Di(j,w)&&j.type==="wheel"||Di(j,v)&&(j.type!=="wheel"||o&&j.type==="wheel"&&!C)||!s&&j.ctrlKey&&j.type==="wheel"||!D&&!o&&!H&&j.type==="wheel"||!f&&(j.type==="mousedown"||j.type==="touchstart")||Array.isArray(f)&&!f.includes(j.button)&&j.type==="mousedown")return!1;const X=Array.isArray(f)&&f.includes(j.button)||!j.button||j.button<=1;return(!j.ctrlKey||j.type==="wheel")&&X})},[y,L,i,s,o,u,f,d,C]),U.createElement("div",{className:"react-flow__renderer",ref:E,style:Qd},m)},x2=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function w2(){const{userSelectionActive:e,userSelectionRect:t}=pt(x2,Tt);return e&&t?U.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Jp(e,t){const n=t.parentNode||t.parentId,r=e.find(i=>i.id===n);if(r){const i=t.position.x+t.width-r.width,s=t.position.y+t.height-r.height;if(i>0||s>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,i>0&&(r.style.width+=i),s>0&&(r.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);r.position.x=r.position.x-o,r.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);r.position.y=r.position.y-o,r.style.height+=o,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Oy(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const s=e.filter(a=>a.id===i.id);if(s.length===0)return r.push(i),r;const o={...i};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&Jp(r,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&Jp(r,o);break}case"remove":return r}return r.push(o),r},n)}function Fy(e,t){return Oy(e,t)}function S2(e,t){return Oy(e,t)}const Dr=(e,t)=>({id:e,type:"select",selected:t});function Yi(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Dr(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Dr(r.id,!1))),n},[])}const vc=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},k2=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),By=b.memo(({isSelecting:e,selectionMode:t=Eo.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const p=b.useRef(null),h=zt(),k=b.useRef(0),S=b.useRef(0),M=b.useRef(),{userSelectionActive:g,elementsSelectable:m,dragging:w}=pt(k2,Tt),v=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),k.current=0,S.current=0},z=O=>{s==null||s(O),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},T=O=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){O.preventDefault();return}o==null||o(O)},P=a?O=>a(O):void 0,x=O=>{const{resetSelectedElements:y,domNode:C}=h.getState();if(M.current=C==null?void 0:C.getBoundingClientRect(),!m||!e||O.button!==0||O.target!==p.current||!M.current)return;const{x:_,y:B}=Yr(O,M.current);y(),h.setState({userSelectionRect:{width:0,height:0,startX:_,startY:B,x:_,y:B}}),r==null||r(O)},E=O=>{const{userSelectionRect:y,nodeInternals:C,edges:_,transform:B,onNodesChange:A,onEdgesChange:j,nodeOrigin:D,getNodes:H}=h.getState();if(!e||!M.current||!y)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const X=Yr(O,M.current),oe=y.startX??0,Z=y.startY??0,we={...y,x:X.x<oe?X.x:oe,y:X.y<Z?X.y:Z,width:Math.abs(X.x-oe),height:Math.abs(X.y-Z)},ke=H(),$=Sy(C,we,B,t===Eo.Partial,!0,D),fe=ky($,_).map(ve=>ve.id),ce=$.map(ve=>ve.id);if(k.current!==ce.length){k.current=ce.length;const ve=Yi(ke,ce);ve.length&&(A==null||A(ve))}if(S.current!==fe.length){S.current=fe.length;const ve=Yi(_,fe);ve.length&&(j==null||j(ve))}h.setState({userSelectionRect:we})},I=O=>{if(O.button!==0)return;const{userSelectionRect:y}=h.getState();!g&&y&&O.target===p.current&&(z==null||z(O)),h.setState({nodesSelectionActive:k.current>0}),v(),i==null||i(O)},L=O=>{g&&(h.setState({nodesSelectionActive:k.current>0}),i==null||i(O)),v()},Y=m&&(e||g);return U.createElement("div",{className:Ht(["react-flow__pane",{dragging:w,selection:e}]),onClick:Y?void 0:vc(z,p),onContextMenu:vc(T,p),onWheel:vc(P,p),onMouseEnter:Y?void 0:c,onMouseDown:Y?x:void 0,onMouseMove:Y?E:u,onMouseUp:Y?I:void 0,onMouseLeave:Y?L:d,ref:p,style:Qd},f,U.createElement(w2,null))});By.displayName="Pane";function Hy(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return r?r.selected?!0:Hy(r,t):!1}function Qp(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function b2(e,t,n,r){return Array.from(e.values()).filter(i=>(i.selected||i.id===r)&&(!i.parentNode||i.parentId||!Hy(i,e))&&(i.draggable||t&&typeof i.draggable>"u")).map(i=>{var s,o;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=i.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=i.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode||i.parentId,parentId:i.parentNode||i.parentId,width:i.width,height:i.height,expandParent:i.expandParent}})}function C2(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Wy(e,t,n,r,i=[0,0],s){const o=C2(e,e.extent||r);let a=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:p,y:h}=gi(f,i).positionAbsolute;a=f&&En(p)&&En(h)&&En(f.width)&&En(f.height)?[[p+e.width*i[0],h+e.height*i[1]],[p+f.width-e.width+e.width*i[0],h+f.height-e.height+e.height*i[1]]]:a}else s==null||s("005",yr.error005()),a=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:p,y:h}=gi(f,i).positionAbsolute;a=[[e.extent[0][0]+p,e.extent[0][1]+h],[e.extent[1][0]+p,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=gi(f,i).positionAbsolute}const d=a&&a!=="parent"?Wd(t,a):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function xc({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Zp=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const s=Array.from(i),o=t.getBoundingClientRect(),a={x:o.width*r[0],y:o.height*r[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...Hd(c)}})};function Rs(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function Pu({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",yr.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):i([e])}function j2(){const e=zt();return b.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:s?i[0]*Math.round(c.x/i[0]):c.x,ySnapped:s?i[1]*Math.round(c.y/i[1]):c.y,...c}},[])}function wc(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Uy({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,selectNodesOnDrag:o}){const a=zt(),[c,u]=b.useState(!1),d=b.useRef([]),f=b.useRef({x:null,y:null}),p=b.useRef(0),h=b.useRef(null),k=b.useRef({x:0,y:0}),S=b.useRef(null),M=b.useRef(!1),g=b.useRef(!1),m=b.useRef(!1),w=j2();return b.useEffect(()=>{if(e!=null&&e.current){const v=Cn(e.current),z=({x,y:E})=>{const{nodeInternals:I,onNodeDrag:L,onSelectionDrag:Y,updateNodePositions:O,nodeExtent:y,snapGrid:C,snapToGrid:_,nodeOrigin:B,onError:A}=a.getState();f.current={x,y:E};let j=!1,D={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&y){const X=La(d.current,B);D=jo(X)}if(d.current=d.current.map(X=>{const oe={x:x-X.distance.x,y:E-X.distance.y};_&&(oe.x=C[0]*Math.round(oe.x/C[0]),oe.y=C[1]*Math.round(oe.y/C[1]));const Z=[[y[0][0],y[0][1]],[y[1][0],y[1][1]]];d.current.length>1&&y&&!X.extent&&(Z[0][0]=X.positionAbsolute.x-D.x+y[0][0],Z[1][0]=X.positionAbsolute.x+(X.width??0)-D.x2+y[1][0],Z[0][1]=X.positionAbsolute.y-D.y+y[0][1],Z[1][1]=X.positionAbsolute.y+(X.height??0)-D.y2+y[1][1]);const we=Wy(X,oe,I,Z,B,A);return j=j||X.position.x!==we.position.x||X.position.y!==we.position.y,X.position=we.position,X.positionAbsolute=we.positionAbsolute,X}),!j)return;O(d.current,!0,!0),u(!0);const H=i?L:wc(Y);if(H&&S.current){const[X,oe]=xc({nodeId:i,dragItems:d.current,nodeInternals:I});H(S.current,X,oe)}},T=()=>{if(!h.current)return;const[x,E]=uy(k.current,h.current);if(x!==0||E!==0){const{transform:I,panBy:L}=a.getState();f.current.x=(f.current.x??0)-x/I[2],f.current.y=(f.current.y??0)-E/I[2],L({x,y:E})&&z(f.current)}p.current=requestAnimationFrame(T)},P=x=>{var B;const{nodeInternals:E,multiSelectionActive:I,nodesDraggable:L,unselectNodesAndEdges:Y,onNodeDragStart:O,onSelectionDragStart:y}=a.getState();g.current=!0;const C=i?O:wc(y);(!o||!s)&&!I&&i&&((B=E.get(i))!=null&&B.selected||Y()),i&&s&&o&&Pu({id:i,store:a,nodeRef:e});const _=w(x);if(f.current=_,d.current=b2(E,L,_,i),C&&d.current){const[A,j]=xc({nodeId:i,dragItems:d.current,nodeInternals:E});C(x.sourceEvent,A,j)}};if(t)v.on(".drag",null);else{const x=$S().on("start",E=>{const{domNode:I,nodeDragThreshold:L}=a.getState();L===0&&P(E),m.current=!1;const Y=w(E);f.current=Y,h.current=(I==null?void 0:I.getBoundingClientRect())||null,k.current=Yr(E.sourceEvent,h.current)}).on("drag",E=>{var O,y;const I=w(E),{autoPanOnNodeDrag:L,nodeDragThreshold:Y}=a.getState();if(E.sourceEvent.type==="touchmove"&&E.sourceEvent.touches.length>1&&(m.current=!0),!m.current){if(!M.current&&g.current&&L&&(M.current=!0,T()),!g.current){const C=I.xSnapped-(((O=f==null?void 0:f.current)==null?void 0:O.x)??0),_=I.ySnapped-(((y=f==null?void 0:f.current)==null?void 0:y.y)??0);Math.sqrt(C*C+_*_)>Y&&P(E)}(f.current.x!==I.xSnapped||f.current.y!==I.ySnapped)&&d.current&&g.current&&(S.current=E.sourceEvent,k.current=Yr(E.sourceEvent,h.current),z(I))}}).on("end",E=>{if(!(!g.current||m.current)&&(u(!1),M.current=!1,g.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:I,nodeInternals:L,onNodeDragStop:Y,onSelectionDragStop:O}=a.getState(),y=i?Y:wc(O);if(I(d.current,!1,!1),y){const[C,_]=xc({nodeId:i,dragItems:d.current,nodeInternals:L});y(E.sourceEvent,C,_)}}}).filter(E=>{const I=E.target;return!E.button&&(!n||!Qp(I,`.${n}`,e))&&(!r||Qp(I,r,e))});return v.call(x),()=>{v.on(".drag",null)}}}},[e,t,n,r,s,a,i,o,w]),c}function Vy(){const e=zt();return b.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(m=>m.selected&&(m.draggable||d&&typeof m.draggable>"u")),p=a?c[0]:5,h=a?c[1]:5,k=n.isShiftPressed?4:1,S=n.x*p*k,M=n.y*h*k,g=f.map(m=>{if(m.positionAbsolute){const w={x:m.positionAbsolute.x+S,y:m.positionAbsolute.y+M};a&&(w.x=c[0]*Math.round(w.x/c[0]),w.y=c[1]*Math.round(w.y/c[1]));const{positionAbsolute:v,position:z}=Wy(m,w,r,i,void 0,u);m.position=z,m.positionAbsolute=v}return m});s(g,!0,!1)},[])}const ns={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Is=e=>{const t=({id:n,type:r,data:i,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:p,onMouseLeave:h,onContextMenu:k,onDoubleClick:S,style:M,className:g,isDraggable:m,isSelectable:w,isConnectable:v,isFocusable:z,selectNodesOnDrag:T,sourcePosition:P,targetPosition:x,hidden:E,resizeObserver:I,dragHandle:L,zIndex:Y,isParent:O,noDragClassName:y,noPanClassName:C,initialized:_,disableKeyboardA11y:B,ariaLabel:A,rfId:j,hasHandleBounds:D})=>{const H=zt(),X=b.useRef(null),oe=b.useRef(null),Z=b.useRef(P),we=b.useRef(x),ke=b.useRef(r),$=w||m||d||f||p||h,fe=Vy(),ce=Rs(n,H.getState,f),ve=Rs(n,H.getState,p),Pe=Rs(n,H.getState,h),te=Rs(n,H.getState,k),je=Rs(n,H.getState,S),_e=nt=>{const{nodeDragThreshold:ae}=H.getState();if(w&&(!T||!m||ae>0)&&Pu({id:n,store:H,nodeRef:X}),d){const rt=H.getState().nodeInternals.get(n);rt&&d(nt,{...rt})}},Ee=nt=>{if(!Mu(nt)&&!B)if(hy.includes(nt.key)&&w){const ae=nt.key==="Escape";Pu({id:n,store:H,unselect:ae,nodeRef:X})}else m&&u&&Object.prototype.hasOwnProperty.call(ns,nt.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${nt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),fe({x:ns[nt.key].x,y:ns[nt.key].y,isShiftPressed:nt.shiftKey}))};b.useEffect(()=>()=>{oe.current&&(I==null||I.unobserve(oe.current),oe.current=null)},[]),b.useEffect(()=>{if(X.current&&!E){const nt=X.current;(!_||!D||oe.current!==nt)&&(oe.current&&(I==null||I.unobserve(oe.current)),I==null||I.observe(nt),oe.current=nt)}},[E,_,D]),b.useEffect(()=>{const nt=ke.current!==r,ae=Z.current!==P,rt=we.current!==x;X.current&&(nt||ae||rt)&&(nt&&(ke.current=r),ae&&(Z.current=P),rt&&(we.current=x),H.getState().updateNodeDimensions([{id:n,nodeElement:X.current,forceUpdate:!0}]))},[n,r,P,x]);const ot=Uy({nodeRef:X,disabled:E||!m,noDragClassName:y,handleSelector:L,nodeId:n,isSelectable:w,selectNodesOnDrag:T});return E?null:U.createElement("div",{className:Ht(["react-flow__node",`react-flow__node-${r}`,{[C]:m},g,{selected:u,selectable:w,parent:O,dragging:ot}]),ref:X,style:{zIndex:Y,transform:`translate(${a}px,${c}px)`,pointerEvents:$?"all":"none",visibility:_?"visible":"hidden",...M},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ce,onMouseMove:ve,onMouseLeave:Pe,onContextMenu:te,onClick:_e,onDoubleClick:je,onKeyDown:z?Ee:void 0,tabIndex:z?0:void 0,role:z?"button":void 0,"aria-describedby":B?void 0:`${Iy}-${j}`,"aria-label":A},U.createElement(Fb,{value:n},U.createElement(e,{id:n,data:i,type:r,xPos:s,yPos:o,selected:u,isConnectable:v,sourcePosition:P,targetPosition:x,dragging:ot,dragHandle:L,zIndex:Y})))};return t.displayName="NodeWrapper",b.memo(t)};const E2=e=>{const t=e.getNodes().filter(n=>n.selected);return{...La(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function N2({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=zt(),{width:i,height:s,x:o,y:a,transformString:c,userSelectionActive:u}=pt(E2,Tt),d=Vy(),f=b.useRef(null);if(b.useEffect(()=>{var k;n||(k=f.current)==null||k.focus({preventScroll:!0})},[n]),Uy({nodeRef:f}),u||!i||!s)return null;const p=e?k=>{const S=r.getState().getNodes().filter(M=>M.selected);e(k,S)}:void 0,h=k=>{Object.prototype.hasOwnProperty.call(ns,k.key)&&d({x:ns[k.key].x,y:ns[k.key].y,isShiftPressed:k.shiftKey})};return U.createElement("div",{className:Ht(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},U.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:i,height:s,top:a,left:o}}))}var A2=b.memo(N2);const _2=e=>e.nodesSelectionActive,Yy=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:k,onSelectionEnd:S,multiSelectionKeyCode:M,panActivationKeyCode:g,zoomActivationKeyCode:m,elementsSelectable:w,zoomOnScroll:v,zoomOnPinch:z,panOnScroll:T,panOnScrollSpeed:P,panOnScrollMode:x,zoomOnDoubleClick:E,panOnDrag:I,defaultViewport:L,translateExtent:Y,minZoom:O,maxZoom:y,preventScrolling:C,onSelectionContextMenu:_,noWheelClassName:B,noPanClassName:A,disableKeyboardA11y:j})=>{const D=pt(_2),H=No(f),X=No(g),oe=X||I,Z=X||T,we=H||p&&oe!==!0;return h2({deleteKeyCode:a,multiSelectionKeyCode:M}),U.createElement(v2,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:v,zoomOnPinch:z,panOnScroll:Z,panOnScrollSpeed:P,panOnScrollMode:x,zoomOnDoubleClick:E,panOnDrag:!H&&oe,defaultViewport:L,translateExtent:Y,minZoom:O,maxZoom:y,zoomActivationKeyCode:m,preventScrolling:C,noWheelClassName:B,noPanClassName:A},U.createElement(By,{onSelectionStart:k,onSelectionEnd:S,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:oe,isSelecting:!!we,selectionMode:h},e,D&&U.createElement(A2,{onSelectionContextMenu:_,noPanClassName:A,disableKeyboardA11y:j})))};Yy.displayName="FlowRenderer";var D2=b.memo(Yy);function M2(e){return pt(b.useCallback(n=>e?Sy(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function z2(e){const t={input:Is(e.input||Dy),default:Is(e.default||Tu),output:Is(e.output||zy),group:Is(e.group||Jd)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,s)=>(i[s]=Is(e[s]||Tu),i),n);return{...t,...r}}const R2=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},I2=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Gy=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:s,onError:o}=pt(I2,Tt),a=M2(e.onlyRenderVisibleElements),c=b.useRef(),u=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const p=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(p)});return c.current=d,d},[]);return b.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),U.createElement("div",{className:"react-flow__nodes",style:Qd},a.map(d=>{var z,T,P;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",yr.error003(f)),f="default");const p=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),k=!!(d.selectable||i&&typeof d.selectable>"u"),S=!!(d.connectable||n&&typeof d.connectable>"u"),M=!!(d.focusable||r&&typeof d.focusable>"u"),g=e.nodeExtent?Wd(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,m=(g==null?void 0:g.x)??0,w=(g==null?void 0:g.y)??0,v=R2({x:m,y:w,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return U.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Me.Bottom,targetPosition:d.targetPosition||Me.Top,hidden:d.hidden,xPos:m,yPos:w,xPosOrigin:v.x,yPosOrigin:v.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:k,isConnectable:S,isFocusable:M,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((z=d[Ct])==null?void 0:z.z)??0,isParent:!!((T=d[Ct])!=null&&T.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((P=d[Ct])!=null&&P.handleBounds)})}))};Gy.displayName="NodeRenderer";var T2=b.memo(Gy);const P2=(e,t,n)=>n===Me.Left?e-t:n===Me.Right?e+t:e,$2=(e,t,n)=>n===Me.Top?e-t:n===Me.Bottom?e+t:e,qp="react-flow__edgeupdater",eh=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:a})=>U.createElement("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Ht([qp,`${qp}-${a}`]),cx:P2(t,r,e),cy:$2(n,r,e),r,stroke:"transparent",fill:"transparent"}),L2=()=>!0;var Mi=e=>{const t=({id:n,className:r,type:i,data:s,onClick:o,onEdgeDoubleClick:a,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:k,labelBgBorderRadius:S,style:M,source:g,target:m,sourceX:w,sourceY:v,targetX:z,targetY:T,sourcePosition:P,targetPosition:x,elementsSelectable:E,hidden:I,sourceHandleId:L,targetHandleId:Y,onContextMenu:O,onMouseEnter:y,onMouseMove:C,onMouseLeave:_,reconnectRadius:B,onReconnect:A,onReconnectStart:j,onReconnectEnd:D,markerEnd:H,markerStart:X,rfId:oe,ariaLabel:Z,isFocusable:we,isReconnectable:ke,pathOptions:$,interactionWidth:fe,disableKeyboardA11y:ce})=>{const ve=b.useRef(null),[Pe,te]=b.useState(!1),[je,_e]=b.useState(!1),Ee=zt(),ot=b.useMemo(()=>`url('#${Ru(X,oe)}')`,[X,oe]),nt=b.useMemo(()=>`url('#${Ru(H,oe)}')`,[H,oe]);if(I)return null;const ae=De=>{var Ve;const{edges:$e,addSelectedEdges:Ye,unselectNodesAndEdges:Ne,multiSelectionActive:me}=Ee.getState(),Le=$e.find(Je=>Je.id===n);Le&&(E&&(Ee.setState({nodesSelectionActive:!1}),Le.selected&&me?(Ne({nodes:[],edges:[Le]}),(Ve=ve.current)==null||Ve.blur()):Ye([n])),o&&o(De,Le))},rt=zs(n,Ee.getState,a),F=zs(n,Ee.getState,O),K=zs(n,Ee.getState,y),W=zs(n,Ee.getState,C),V=zs(n,Ee.getState,_),ie=(De,$e)=>{if(De.button!==0)return;const{edges:Ye,isValidConnection:Ne}=Ee.getState(),me=$e?m:g,Le=($e?Y:L)||null,Ve=$e?"target":"source",Je=Ne||L2,dt=$e,lt=Ye.find(ht=>ht.id===n);_e(!0),j==null||j(De,lt,Ve);const ct=ht=>{_e(!1),D==null||D(ht,lt,Ve)};Ey({event:De,handleId:Le,nodeId:me,onConnect:ht=>A==null?void 0:A(lt,ht),isTarget:dt,getState:Ee.getState,setState:Ee.setState,isValidConnection:Je,edgeUpdaterType:Ve,onReconnectEnd:ct})},re=De=>ie(De,!0),xe=De=>ie(De,!1),le=()=>te(!0),ne=()=>te(!1),ge=!E&&!o,Be=De=>{var $e;if(!ce&&hy.includes(De.key)&&E){const{unselectNodesAndEdges:Ye,addSelectedEdges:Ne,edges:me}=Ee.getState();De.key==="Escape"?(($e=ve.current)==null||$e.blur(),Ye({edges:[me.find(Ve=>Ve.id===n)]})):Ne([n])}};return U.createElement("g",{className:Ht(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:u,inactive:ge,updating:Pe}]),onClick:ae,onDoubleClick:rt,onContextMenu:F,onMouseEnter:K,onMouseMove:W,onMouseLeave:V,onKeyDown:we?Be:void 0,tabIndex:we?0:void 0,role:we?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":Z===null?void 0:Z||`Edge from ${g} to ${m}`,"aria-describedby":we?`${Ty}-${oe}`:void 0,ref:ve},!je&&U.createElement(e,{id:n,source:g,target:m,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:k,labelBgBorderRadius:S,data:s,style:M,sourceX:w,sourceY:v,targetX:z,targetY:T,sourcePosition:P,targetPosition:x,sourceHandleId:L,targetHandleId:Y,markerStart:ot,markerEnd:nt,pathOptions:$,interactionWidth:fe}),ke&&U.createElement(U.Fragment,null,(ke==="source"||ke===!0)&&U.createElement(eh,{position:P,centerX:w,centerY:v,radius:B,onMouseDown:re,onMouseEnter:le,onMouseOut:ne,type:"source"}),(ke==="target"||ke===!0)&&U.createElement(eh,{position:x,centerX:z,centerY:T,radius:B,onMouseDown:xe,onMouseEnter:le,onMouseOut:ne,type:"target"})))};return t.displayName="EdgeWrapper",b.memo(t)};function O2(e){const t={default:Mi(e.default||fa),straight:Mi(e.bezier||Yd),step:Mi(e.step||Vd),smoothstep:Mi(e.step||$a),simplebezier:Mi(e.simplebezier||Ud)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,s)=>(i[s]=Mi(e[s]||fa),i),n);return{...t,...r}}function th(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case Me.Top:return{x:r+s/2,y:i};case Me.Right:return{x:r+s,y:i+o/2};case Me.Bottom:return{x:r+s/2,y:i+o};case Me.Left:return{x:r,y:i+o/2}}}function nh(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const F2=(e,t,n,r,i,s)=>{const o=th(n,e,t),a=th(s,r,i);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function B2({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:s,width:o,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=jo({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:a/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*p)>0}function rh(e){var r,i,s,o,a;const t=((r=e==null?void 0:e[Ct])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const H2=[{level:0,isMaxLevel:!0,edges:[]}];function W2(e,t,n=!1){let r=-1;const i=e.reduce((o,a)=>{var d,f;const c=En(a.zIndex);let u=c?a.zIndex:0;if(n){const p=t.get(a.target),h=t.get(a.source),k=a.selected||(p==null?void 0:p.selected)||(h==null?void 0:h.selected),S=Math.max(((d=h==null?void 0:h[Ct])==null?void 0:d.z)||0,((f=p==null?void 0:p[Ct])==null?void 0:f.z)||0,1e3);u=(c?a.zIndex:0)+(k?S:0)}return o[u]?o[u].push(a):o[u]=[a],r=u>r?u:r,o},{}),s=Object.entries(i).map(([o,a])=>{const c=+o;return{edges:a,level:c,isMaxLevel:c===r}});return s.length===0?H2:s}function U2(e,t,n){const r=pt(b.useCallback(i=>e?i.edges.filter(s=>{const o=t.get(s.source),a=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&B2({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return W2(r,t,n)}const V2=({color:e="none",strokeWidth:t=1})=>U.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Y2=({color:e="none",strokeWidth:t=1})=>U.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),ih={[da.Arrow]:V2,[da.ArrowClosed]:Y2};function G2(e){const t=zt();return b.useMemo(()=>{var i,s;return Object.prototype.hasOwnProperty.call(ih,e)?ih[e]:((s=(i=t.getState()).onError)==null||s.call(i,"009",yr.error009(e)),null)},[e])}const X2=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=G2(t);return c?U.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},U.createElement(c,{color:n,strokeWidth:o})):null},K2=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Ru(o,t);r.includes(a)||(i.push({id:a,color:o.color||e,...o}),r.push(a))}}),i),[]).sort((i,s)=>i.id.localeCompare(s.id))},Xy=({defaultColor:e,rfId:t})=>{const n=pt(b.useCallback(K2({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((s,o)=>s.id!==i[o].id)));return U.createElement("defs",null,n.map(r=>U.createElement(X2,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};Xy.displayName="MarkerDefinitions";var J2=b.memo(Xy);const Q2=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Ky=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:k,reconnectRadius:S,children:M,disableKeyboardA11y:g})=>{const{edgesFocusable:m,edgesUpdatable:w,elementsSelectable:v,width:z,height:T,connectionMode:P,nodeInternals:x,onError:E}=pt(Q2,Tt),I=U2(t,x,n);return z?U.createElement(U.Fragment,null,I.map(({level:L,edges:Y,isMaxLevel:O})=>U.createElement("svg",{key:L,style:{zIndex:L},width:z,height:T,className:"react-flow__edges react-flow__container"},O&&U.createElement(J2,{defaultColor:e,rfId:r}),U.createElement("g",null,Y.map(y=>{const[C,_,B]=rh(x.get(y.source)),[A,j,D]=rh(x.get(y.target));if(!B||!D)return null;let H=y.type||"default";i[H]||(E==null||E("011",yr.error011(H)),H="default");const X=i[H]||i.default,oe=P===ki.Strict?j.target:(j.target??[]).concat(j.source??[]),Z=nh(_.source,y.sourceHandle),we=nh(oe,y.targetHandle),ke=(Z==null?void 0:Z.position)||Me.Bottom,$=(we==null?void 0:we.position)||Me.Top,fe=!!(y.focusable||m&&typeof y.focusable>"u"),ce=y.reconnectable||y.updatable,ve=typeof p<"u"&&(ce||w&&typeof ce>"u");if(!Z||!we)return E==null||E("008",yr.error008(Z,y)),null;const{sourceX:Pe,sourceY:te,targetX:je,targetY:_e}=F2(C,Z,ke,A,we,$);return U.createElement(X,{key:y.id,id:y.id,className:Ht([y.className,s]),type:H,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:Pe,sourceY:te,targetX:je,targetY:_e,sourcePosition:ke,targetPosition:$,elementsSelectable:v,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:k,reconnectRadius:S,rfId:r,ariaLabel:y.ariaLabel,isFocusable:fe,isReconnectable:ve,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth,disableKeyboardA11y:g})})))),M):null};Ky.displayName="EdgeRenderer";var Z2=b.memo(Ky);const q2=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function eC({children:e}){const t=pt(q2);return U.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function tC(e){const t=Vn(),n=b.useRef(!1);b.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const nC={[Me.Left]:Me.Right,[Me.Right]:Me.Left,[Me.Top]:Me.Bottom,[Me.Bottom]:Me.Top},Jy=({nodeId:e,handleType:t,style:n,type:r=Tr.Bezier,CustomComponent:i,connectionStatus:s})=>{var T,P,x;const{fromNode:o,handleId:a,toX:c,toY:u,connectionMode:d}=pt(b.useCallback(E=>({fromNode:E.nodeInternals.get(e),handleId:E.connectionHandleId,toX:(E.connectionPosition.x-E.transform[0])/E.transform[2],toY:(E.connectionPosition.y-E.transform[1])/E.transform[2],connectionMode:E.connectionMode}),[e]),Tt),f=(T=o==null?void 0:o[Ct])==null?void 0:T.handleBounds;let p=f==null?void 0:f[t];if(d===ki.Loose&&(p=p||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!p)return null;const h=a?p.find(E=>E.id===a):p[0],k=h?h.x+h.width/2:(o.width??0)/2,S=h?h.y+h.height/2:o.height??0,M=(((P=o.positionAbsolute)==null?void 0:P.x)??0)+k,g=(((x=o.positionAbsolute)==null?void 0:x.y)??0)+S,m=h==null?void 0:h.position,w=m?nC[m]:null;if(!m||!w)return null;if(i)return U.createElement(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:h,fromX:M,fromY:g,toX:c,toY:u,fromPosition:m,toPosition:w,connectionStatus:s});let v="";const z={sourceX:M,sourceY:g,sourcePosition:m,targetX:c,targetY:u,targetPosition:w};return r===Tr.Bezier?[v]=xy(z):r===Tr.Step?[v]=zu({...z,borderRadius:0}):r===Tr.SmoothStep?[v]=zu(z):r===Tr.SimpleBezier?[v]=vy(z):v=`M${M},${g} ${c},${u}`,U.createElement("path",{d:v,fill:"none",className:"react-flow__connection-path",style:n})};Jy.displayName="ConnectionLine";const rC=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function iC({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:s,nodesConnectable:o,width:a,height:c,connectionStatus:u}=pt(rC,Tt);return!(i&&s&&a&&o)?null:U.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},U.createElement("g",{className:Ht(["react-flow__connection",u])},U.createElement(Jy,{nodeId:i,handleType:s,style:t,type:n,CustomComponent:r,connectionStatus:u})))}function sh(e,t){return b.useRef(null),zt(),b.useMemo(()=>t(e),[e])}const Qy=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,onSelectionContextMenu:k,onSelectionStart:S,onSelectionEnd:M,connectionLineType:g,connectionLineStyle:m,connectionLineComponent:w,connectionLineContainerStyle:v,selectionKeyCode:z,selectionOnDrag:T,selectionMode:P,multiSelectionKeyCode:x,panActivationKeyCode:E,zoomActivationKeyCode:I,deleteKeyCode:L,onlyRenderVisibleElements:Y,elementsSelectable:O,selectNodesOnDrag:y,defaultViewport:C,translateExtent:_,minZoom:B,maxZoom:A,preventScrolling:j,defaultMarkerColor:D,zoomOnScroll:H,zoomOnPinch:X,panOnScroll:oe,panOnScrollSpeed:Z,panOnScrollMode:we,zoomOnDoubleClick:ke,panOnDrag:$,onPaneClick:fe,onPaneMouseEnter:ce,onPaneMouseMove:ve,onPaneMouseLeave:Pe,onPaneScroll:te,onPaneContextMenu:je,onEdgeContextMenu:_e,onEdgeMouseEnter:Ee,onEdgeMouseMove:ot,onEdgeMouseLeave:nt,onReconnect:ae,onReconnectStart:rt,onReconnectEnd:F,reconnectRadius:K,noDragClassName:W,noWheelClassName:V,noPanClassName:ie,elevateEdgesOnSelect:re,disableKeyboardA11y:xe,nodeOrigin:le,nodeExtent:ne,rfId:ge})=>{const Be=sh(e,z2),De=sh(t,O2);return tC(s),U.createElement(D2,{onPaneClick:fe,onPaneMouseEnter:ce,onPaneMouseMove:ve,onPaneMouseLeave:Pe,onPaneContextMenu:je,onPaneScroll:te,deleteKeyCode:L,selectionKeyCode:z,selectionOnDrag:T,selectionMode:P,onSelectionStart:S,onSelectionEnd:M,multiSelectionKeyCode:x,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:O,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:H,zoomOnPinch:X,zoomOnDoubleClick:ke,panOnScroll:oe,panOnScrollSpeed:Z,panOnScrollMode:we,panOnDrag:$,defaultViewport:C,translateExtent:_,minZoom:B,maxZoom:A,onSelectionContextMenu:k,preventScrolling:j,noDragClassName:W,noWheelClassName:V,noPanClassName:ie,disableKeyboardA11y:xe},U.createElement(eC,null,U.createElement(Z2,{edgeTypes:De,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:Y,onEdgeContextMenu:_e,onEdgeMouseEnter:Ee,onEdgeMouseMove:ot,onEdgeMouseLeave:nt,onReconnect:ae,onReconnectStart:rt,onReconnectEnd:F,reconnectRadius:K,defaultMarkerColor:D,noPanClassName:ie,elevateEdgesOnSelect:!!re,disableKeyboardA11y:xe,rfId:ge},U.createElement(iC,{style:m,type:g,component:w,containerStyle:v})),U.createElement("div",{className:"react-flow__edgelabel-renderer"}),U.createElement(T2,{nodeTypes:Be,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,selectNodesOnDrag:y,onlyRenderVisibleElements:Y,noPanClassName:ie,noDragClassName:W,disableKeyboardA11y:xe,nodeOrigin:le,nodeExtent:ne,rfId:ge})))};Qy.displayName="GraphView";var sC=b.memo(Qy);const $u=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],jr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:$u,nodeExtent:$u,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ki.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Ib,isValidConnection:void 0},oC=()=>K1((e,t)=>({...jr,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:s}=t();e({nodeInternals:yc(n,r,i,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",s=typeof r<"u",o=i?yc(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?r:[],hasDefaultNodes:i,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((S,M)=>{const g=i.get(M.id);if(g!=null&&g.hidden)i.set(g.id,{...g,[Ct]:{...g[Ct],handleBounds:void 0}});else if(g){const m=Hd(M.nodeElement);!!(m.width&&m.height&&(g.width!==m.width||g.height!==m.height||M.forceUpdate))&&(i.set(g.id,{...g,[Ct]:{...g[Ct],handleBounds:{source:Zp(".source",M.nodeElement,p,u),target:Zp(".target",M.nodeElement,p,u)}},...m}),S.push({id:g.id,type:"dimensions",dimensions:m}))}return S},[]);$y(i,u);const k=o||s&&!o&&Ly(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:k}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(a=>{const c={id:a.id,type:"position",dragging:i};return r&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const u=Fy(n,a()),d=yc(u,i,o,c);e({nodeInternals:d})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>Dr(c,!0)):(o=Yi(s(),n),a=Yi(i,[])),ul({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:s}=t();let o,a=null;r?o=n.map(c=>Dr(c,!0)):(o=Yi(i,n),a=Yi(s(),[])),ul({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:s}=t(),o=n||s(),a=r||i,c=o.map(d=>(d.selected=!1,Dr(d.id,!1))),u=a.map(d=>Dr(d.id,!1));ul({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),s=r().filter(a=>a.selected).map(a=>Dr(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Dr(a.id,!1));ul({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Wd(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:s,d3Zoom:o,d3Selection:a,translateExtent:c}=t();if(!o||!a||!n.x&&!n.y)return!1;const u=dr.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),d=[[0,0],[i,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(a,f),r[0]!==f.x||r[1]!==f.y||r[2]!==f.k},cancelConnection:()=>e({connectionNodeId:jr.connectionNodeId,connectionHandleId:jr.connectionHandleId,connectionHandleType:jr.connectionHandleType,connectionStatus:jr.connectionStatus,connectionStartHandle:jr.connectionStartHandle,connectionEndHandle:jr.connectionEndHandle}),reset:()=>e({...jr})}),Object.is),Zy=({children:e})=>{const t=b.useRef(null);return t.current||(t.current=oC()),U.createElement(Nb,{value:t.current},e)};Zy.displayName="ReactFlowProvider";const qy=({children:e})=>b.useContext(Pa)?U.createElement(U.Fragment,null,e):U.createElement(Zy,null,e);qy.displayName="ReactFlowWrapper";const lC={input:Dy,default:Tu,output:zy,group:Jd},aC={default:fa,straight:Yd,step:Vd,smoothstep:$a,simplebezier:Ud},cC=[0,0],uC=[15,15],dC={x:0,y:0,zoom:1},fC={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Zd=b.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s=lC,edgeTypes:o=aC,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onConnect:h,onConnectStart:k,onConnectEnd:S,onClickConnectStart:M,onClickConnectEnd:g,onNodeMouseEnter:m,onNodeMouseMove:w,onNodeMouseLeave:v,onNodeContextMenu:z,onNodeDoubleClick:T,onNodeDragStart:P,onNodeDrag:x,onNodeDragStop:E,onNodesDelete:I,onEdgesDelete:L,onSelectionChange:Y,onSelectionDragStart:O,onSelectionDrag:y,onSelectionDragStop:C,onSelectionContextMenu:_,onSelectionStart:B,onSelectionEnd:A,connectionMode:j=ki.Strict,connectionLineType:D=Tr.Bezier,connectionLineStyle:H,connectionLineComponent:X,connectionLineContainerStyle:oe,deleteKeyCode:Z="Backspace",selectionKeyCode:we="Shift",selectionOnDrag:ke=!1,selectionMode:$=Eo.Full,panActivationKeyCode:fe="Space",multiSelectionKeyCode:ce=ua()?"Meta":"Control",zoomActivationKeyCode:ve=ua()?"Meta":"Control",snapToGrid:Pe=!1,snapGrid:te=uC,onlyRenderVisibleElements:je=!1,selectNodesOnDrag:_e=!0,nodesDraggable:Ee,nodesConnectable:ot,nodesFocusable:nt,nodeOrigin:ae=cC,edgesFocusable:rt,edgesUpdatable:F,elementsSelectable:K,defaultViewport:W=dC,minZoom:V=.5,maxZoom:ie=2,translateExtent:re=$u,preventScrolling:xe=!0,nodeExtent:le,defaultMarkerColor:ne="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:Be=!0,panOnScroll:De=!1,panOnScrollSpeed:$e=.5,panOnScrollMode:Ye=di.Free,zoomOnDoubleClick:Ne=!0,panOnDrag:me=!0,onPaneClick:Le,onPaneMouseEnter:Ve,onPaneMouseMove:Je,onPaneMouseLeave:dt,onPaneScroll:lt,onPaneContextMenu:ct,children:xt,onEdgeContextMenu:ht,onEdgeDoubleClick:jt,onEdgeMouseEnter:Wt,onEdgeMouseMove:un,onEdgeMouseLeave:tn,onEdgeUpdate:dn,onEdgeUpdateStart:Kt,onEdgeUpdateEnd:ut,onReconnect:Ut,onReconnectStart:R,onReconnectEnd:N,reconnectRadius:ee=10,edgeUpdaterRadius:se=10,onNodesChange:Se,onEdgesChange:Ae,noDragClassName:Ie="nodrag",noWheelClassName:Oe="nowheel",noPanClassName:qe="nopan",fitView:it=!1,fitViewOptions:q,connectOnClick:G=!0,attributionPosition:Q,proOptions:J,defaultEdgeOptions:de,elevateNodesOnSelect:be=!0,elevateEdgesOnSelect:he=!1,disableKeyboardA11y:ze=!1,autoPanOnConnect:Fe=!0,autoPanOnNodeDrag:He=!0,connectionRadius:We=20,isValidConnection:Ce,onError:Te,style:Ue,id:Xe,nodeDragThreshold:et,...Ke},Jt)=>{const yt=Xe||"1";return U.createElement("div",{...Ke,style:{...Ue,...fC},ref:Jt,className:Ht(["react-flow",i]),"data-testid":"rf__wrapper",id:Xe},U.createElement(qy,null,U.createElement(sC,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:m,onNodeMouseMove:w,onNodeMouseLeave:v,onNodeContextMenu:z,onNodeDoubleClick:T,nodeTypes:s,edgeTypes:o,connectionLineType:D,connectionLineStyle:H,connectionLineComponent:X,connectionLineContainerStyle:oe,selectionKeyCode:we,selectionOnDrag:ke,selectionMode:$,deleteKeyCode:Z,multiSelectionKeyCode:ce,panActivationKeyCode:fe,zoomActivationKeyCode:ve,onlyRenderVisibleElements:je,selectNodesOnDrag:_e,defaultViewport:W,translateExtent:re,minZoom:V,maxZoom:ie,preventScrolling:xe,zoomOnScroll:ge,zoomOnPinch:Be,zoomOnDoubleClick:Ne,panOnScroll:De,panOnScrollSpeed:$e,panOnScrollMode:Ye,panOnDrag:me,onPaneClick:Le,onPaneMouseEnter:Ve,onPaneMouseMove:Je,onPaneMouseLeave:dt,onPaneScroll:lt,onPaneContextMenu:ct,onSelectionContextMenu:_,onSelectionStart:B,onSelectionEnd:A,onEdgeContextMenu:ht,onEdgeDoubleClick:jt,onEdgeMouseEnter:Wt,onEdgeMouseMove:un,onEdgeMouseLeave:tn,onReconnect:Ut??dn,onReconnectStart:R??Kt,onReconnectEnd:N??ut,reconnectRadius:ee??se,defaultMarkerColor:ne,noDragClassName:Ie,noWheelClassName:Oe,noPanClassName:qe,elevateEdgesOnSelect:he,rfId:yt,disableKeyboardA11y:ze,nodeOrigin:ae,nodeExtent:le}),U.createElement(n2,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:k,onConnectEnd:S,onClickConnectStart:M,onClickConnectEnd:g,nodesDraggable:Ee,nodesConnectable:ot,nodesFocusable:nt,edgesFocusable:rt,edgesUpdatable:F,elementsSelectable:K,elevateNodesOnSelect:be,minZoom:V,maxZoom:ie,nodeExtent:le,onNodesChange:Se,onEdgesChange:Ae,snapToGrid:Pe,snapGrid:te,connectionMode:j,translateExtent:re,connectOnClick:G,defaultEdgeOptions:de,fitView:it,fitViewOptions:q,onNodesDelete:I,onEdgesDelete:L,onNodeDragStart:P,onNodeDrag:x,onNodeDragStop:E,onSelectionDrag:y,onSelectionDragStart:O,onSelectionDragStop:C,noPanClassName:qe,nodeOrigin:ae,rfId:yt,autoPanOnConnect:Fe,autoPanOnNodeDrag:He,onError:Te,connectionRadius:We,isValidConnection:Ce,nodeDragThreshold:et}),U.createElement(e2,{onSelectionChange:Y}),xt,U.createElement(_b,{proOptions:J,position:Q}),U.createElement(l2,{rfId:yt,disableKeyboardA11y:ze})))});Zd.displayName="ReactFlow";function ev(e){return t=>{const[n,r]=b.useState(t),i=b.useCallback(s=>r(o=>e(s,o)),[]);return[n,r,i]}}const tv=ev(Fy),nv=ev(S2),rv=({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:p,selected:h})=>{const{background:k,backgroundColor:S}=s||{},M=o||k||S;return U.createElement("rect",{className:Ht(["react-flow__minimap-node",{selected:h},u]),x:t,y:n,rx:d,ry:d,width:r,height:i,fill:M,stroke:a,strokeWidth:c,shapeRendering:f,onClick:p?g=>p(g,e):void 0})};rv.displayName="MiniMapNode";var pC=b.memo(rv);const hC=e=>e.nodeOrigin,gC=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),Sc=e=>e instanceof Function?e:()=>e;function mC({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i=2,nodeComponent:s=pC,onClick:o}){const a=pt(gC,Tt),c=pt(hC),u=Sc(t),d=Sc(e),f=Sc(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return U.createElement(U.Fragment,null,a.map(h=>{const{x:k,y:S}=gi(h,c).positionAbsolute;return U.createElement(s,{key:h.id,x:k,y:S,width:h.width,height:h.height,style:h.style,selected:h.selected,className:f(h),color:u(h),borderRadius:r,strokeColor:d(h),strokeWidth:i,shapeRendering:p,onClick:o,id:h.id})}))}var yC=b.memo(mC);const vC=200,xC=150,wC=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?zb(La(t,e.nodeOrigin),n):n,rfId:e.rfId}},SC="react-flow__minimap-desc";function iv({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:p,onNodeClick:h,pannable:k=!1,zoomable:S=!1,ariaLabel:M="React Flow mini map",inversePan:g=!1,zoomStep:m=10,offsetScale:w=5}){const v=zt(),z=b.useRef(null),{boundingRect:T,viewBB:P,rfId:x}=pt(wC,Tt),E=(e==null?void 0:e.width)??vC,I=(e==null?void 0:e.height)??xC,L=T.width/E,Y=T.height/I,O=Math.max(L,Y),y=O*E,C=O*I,_=w*O,B=T.x-(y-T.width)/2-_,A=T.y-(C-T.height)/2-_,j=y+_*2,D=C+_*2,H=`${SC}-${x}`,X=b.useRef(0);X.current=O,b.useEffect(()=>{if(z.current){const we=Cn(z.current),ke=ce=>{const{transform:ve,d3Selection:Pe,d3Zoom:te}=v.getState();if(ce.sourceEvent.type!=="wheel"||!Pe||!te)return;const je=-ce.sourceEvent.deltaY*(ce.sourceEvent.deltaMode===1?.05:ce.sourceEvent.deltaMode?1:.002)*m,_e=ve[2]*Math.pow(2,je);te.scaleTo(Pe,_e)},$=ce=>{const{transform:ve,d3Selection:Pe,d3Zoom:te,translateExtent:je,width:_e,height:Ee}=v.getState();if(ce.sourceEvent.type!=="mousemove"||!Pe||!te)return;const ot=X.current*Math.max(1,ve[2])*(g?-1:1),nt={x:ve[0]-ce.sourceEvent.movementX*ot,y:ve[1]-ce.sourceEvent.movementY*ot},ae=[[0,0],[_e,Ee]],rt=dr.translate(nt.x,nt.y).scale(ve[2]),F=te.constrain()(rt,ae,je);te.transform(Pe,F)},fe=ay().on("zoom",k?$:null).on("zoom.wheel",S?ke:null);return we.call(fe),()=>{we.on("zoom",null)}}},[k,S,g,m]);const oe=p?we=>{const ke=Pn(we);p(we,{x:ke[0],y:ke[1]})}:void 0,Z=h?(we,ke)=>{const $=v.getState().nodeInternals.get(ke);h(we,$)}:void 0;return U.createElement(Bd,{position:f,style:e,className:Ht(["react-flow__minimap",t]),"data-testid":"rf__minimap"},U.createElement("svg",{width:E,height:I,viewBox:`${B} ${A} ${j} ${D}`,role:"img","aria-labelledby":H,ref:z,onClick:oe},M&&U.createElement("title",{id:H},M),U.createElement(yC,{onClick:Z,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:a}),U.createElement("path",{className:"react-flow__minimap-mask",d:`M${B-_},${A-_}h${j+_*2}v${D+_*2}h${-j-_*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}iv.displayName="MiniMap";var sv=b.memo(iv);function kC(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},U.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function bC(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},U.createElement("path",{d:"M0 0h32v4.2H0z"}))}function CC(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},U.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function jC(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},U.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function EC(){return U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},U.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Us=({children:e,className:t,...n})=>U.createElement("button",{type:"button",className:Ht(["react-flow__controls-button",t]),...n},e);Us.displayName="ControlButton";const NC=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),ov=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const p=zt(),[h,k]=b.useState(!1),{isInteractive:S,minZoomReached:M,maxZoomReached:g}=pt(NC,Tt),{zoomIn:m,zoomOut:w,fitView:v}=Vn();if(b.useEffect(()=>{k(!0)},[]),!h)return null;const z=()=>{m(),s==null||s()},T=()=>{w(),o==null||o()},P=()=>{v(i),a==null||a()},x=()=>{p.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),c==null||c(!S)};return U.createElement(Bd,{className:Ht(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&U.createElement(U.Fragment,null,U.createElement(Us,{onClick:z,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},U.createElement(kC,null)),U.createElement(Us,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:M},U.createElement(bC,null))),n&&U.createElement(Us,{className:"react-flow__controls-fitview",onClick:P,title:"fit view","aria-label":"fit view"},U.createElement(CC,null)),r&&U.createElement(Us,{className:"react-flow__controls-interactive",onClick:x,title:"toggle interactivity","aria-label":"toggle interactivity"},S?U.createElement(EC,null):U.createElement(jC,null)),d)};ov.displayName="Controls";var lv=b.memo(ov),Hn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Hn||(Hn={}));function AC({color:e,dimensions:t,lineWidth:n}){return U.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function _C({color:e,radius:t}){return U.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const DC={[Hn.Dots]:"#91919a",[Hn.Lines]:"#eee",[Hn.Cross]:"#e2e2e2"},MC={[Hn.Dots]:1,[Hn.Lines]:1,[Hn.Cross]:6},zC=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function av({id:e,variant:t=Hn.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=2,color:o,style:a,className:c}){const u=b.useRef(null),{transform:d,patternId:f}=pt(zC,Tt),p=o||DC[t],h=r||MC[t],k=t===Hn.Dots,S=t===Hn.Cross,M=Array.isArray(n)?n:[n,n],g=[M[0]*d[2]||1,M[1]*d[2]||1],m=h*d[2],w=S?[m,m]:g,v=k?[m/s,m/s]:[w[0]/s,w[1]/s];return U.createElement("svg",{className:Ht(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},U.createElement("pattern",{id:f+e,x:d[0]%g[0],y:d[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${v[0]},-${v[1]})`},k?U.createElement(_C,{color:p,radius:m/s}):U.createElement(AC,{dimensions:w,color:p,lineWidth:i})),U.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}av.displayName="Background";var cv=b.memo(av);function kc(e){return l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:12,color:"#475569",marginBottom:6},children:e.label}),l.jsx("input",{type:"range",min:e.min,max:e.max,value:e.value,onChange:t=>e.onChange(Number(t.target.value)),style:{width:"100%"}})]})}const Gi={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid #cbd5e1"},Zn={display:"flex",alignItems:"center",gap:8},uv={padding:"2px 8px",borderRadius:999,border:"1px solid #e2e8f0",background:"#f8fafc",fontSize:12},fl={border:"1px solid #e2e8f0",borderRadius:12,background:"white"},Er={padding:"8px 10px",borderRadius:8,border:"1px solid #cbd5e1",background:"white",cursor:"pointer"},oi={color:"#64748b",fontSize:12},vs={position:"absolute",top:4,right:4,width:22,height:22,borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",color:"#334155",lineHeight:"20px",textAlign:"center",zIndex:10},Ri={d4:2.5,d6:3.5,d8:4.5,d10:5.5,d12:6.5};function RC(e){const t=new Set(["4","6","8","10","12"]);return e.toLowerCase().split("+").map(n=>n.trim()).filter(Boolean).map(n=>{const r=n.split("d"),i=parseInt(r[0],10)||0,s=r[1]||"6",o=t.has(s)?`d${s}`:"d6";return{n:i,die:o}})}function bc(e,t){const n={d4:.75,d6:.6667,d8:.625,d10:.6,d12:.5833},r=RC(e);let i=0;return r.forEach(({n:s,die:o})=>{const a=Ri[o]??0,c=t!=null&&t.greatWeaponFighting?n[o]??0:0;i+=s*(a+c)}),i}function oh(e){return e>=17?6:e>=13?5:e>=9?4:e>=5?3:2}function lh(e){return e>=20?4:e>=11?3:e>=5?2:1}function ah(e){return Math.floor((e-10)/2)}function IC(e,t,n){return Math.max(t,Math.min(n,e))}function ch(e,t){return t==="adv"?1-(1-e)**2:t==="dis"?e**2:e}const TC=[{id:"defense",name:"Defense (+1 AC)",tag:"defense"},{id:"dueling",name:"Dueling (+2 dmg with 1H melee)",tag:"melee-1h"},{id:"great-weapon",name:"Great Weapon Fighting (reroll 1-2)",tag:"melee-2h"},{id:"archery",name:"Archery (+2 to hit)",tag:"ranged"},{id:"two-weapon",name:"Two-Weapon Fighting (add mod to offhand)",tag:"twf"}],rs=[{id:"longsword",name:"Longsword",dice:"1d8",versatile:"1d10",type:"slashing",properties:["versatile"],handed:"1h",finesse:!1,ranged:!1,tags:[]},{id:"greatsword",name:"Greatsword",dice:"2d6",type:"slashing",properties:["heavy","two-handed"],handed:"2h",finesse:!1,ranged:!1,tags:["gwm"]},{id:"rapier",name:"Rapier",dice:"1d8",type:"piercing",properties:["finesse"],handed:"1h",finesse:!0,ranged:!1,tags:[]},{id:"shortsword",name:"Shortsword",dice:"1d6",type:"piercing",properties:["finesse","light"],handed:"1h",finesse:!0,ranged:!1,tags:[]},{id:"longbow",name:"Longbow",dice:"1d8",type:"piercing",properties:["heavy","two-handed","ammunition"],handed:"2h",finesse:!1,ranged:!0,tags:["ss"]},{id:"handaxe",name:"Handaxe",dice:"1d6",type:"slashing",properties:["light","thrown"],handed:"1h",finesse:!1,ranged:!1,tags:[]},{id:"glaive",name:"Glaive",dice:"1d10",type:"slashing",properties:["heavy","reach","two-handed"],handed:"2h",finesse:!1,ranged:!1,tags:["gwm","pam"]},{id:"halberd",name:"Halberd",dice:"1d10",type:"slashing",properties:["heavy","reach","two-handed"],handed:"2h",finesse:!1,ranged:!1,tags:["gwm","pam"]},{id:"spear",name:"Spear",dice:"1d6",versatile:"1d8",type:"piercing",properties:["thrown","versatile"],handed:"1h",finesse:!1,ranged:!1,tags:["pam"]},{id:"hcrossbow",name:"Heavy Crossbow",dice:"1d10",type:"piercing",properties:["heavy","ammunition","loading","two-handed"],handed:"2h",finesse:!1,ranged:!0,tags:["ss","cbe"]}];function xs(e){return l.jsxs("div",{style:{minWidth:260,background:"#f3f4f6",border:"1px solid #e2e8f0",borderRadius:12},children:[l.jsx("div",{style:{padding:10,borderBottom:"1px solid #e2e8f0",fontWeight:600,fontSize:13},children:e.title}),l.jsx("div",{style:{padding:10,display:"grid",gap:8},children:e.children})]})}function PC({id:e,data:t}){const{deleteElements:n}=Vn(),r=b.useCallback(i=>{i.stopPropagation(),i.preventDefault(),n({nodes:[{id:e}]})},[n,e]);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{className:"nodrag nopan",style:vs,onPointerDown:i=>{i.stopPropagation(),i.preventDefault()},onMouseDown:i=>{i.stopPropagation(),i.preventDefault()},onClick:r,title:"Delete",children:""}),l.jsx(At,{type:"target",position:Me.Left}),l.jsxs(xs,{title:"Fighter: Fighting Style",children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Style"}),l.jsx("select",{value:t.styleId,onChange:i=>t.onChange({styleId:i.target.value}),style:Gi,children:TC.map(i=>l.jsx("option",{value:i.id,children:i.name},i.id))})]}),t.styleId&&l.jsxs("div",{style:{fontSize:12,color:"#64748b"},children:[l.jsx("strong",{children:t.styleId})," active"]})]}),l.jsx(At,{type:"source",position:Me.Right})]})}const $C=({id:e,data:t})=>{const{deleteElements:n}=Vn(),r=b.useCallback(s=>{s.stopPropagation(),s.preventDefault(),n({nodes:[{id:e}]})},[n,e]),i=rs.find(s=>s.id===t.weaponId)??rs[0];return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{className:"nodrag nopan",style:vs,onPointerDown:s=>{s.stopPropagation(),s.preventDefault()},onMouseDown:s=>{s.stopPropagation(),s.preventDefault()},onClick:r,title:"Delete",children:""}),l.jsx(At,{type:"target",position:Me.Left}),l.jsxs(xs,{title:"Weapon",children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Preset"}),l.jsx("select",{value:i.id,onChange:s=>t.onChange({weaponId:s.target.value}),style:Gi,children:rs.map(s=>l.jsx("option",{value:s.id,children:s.name},s.id))})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:6,fontSize:12},children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Dice:"})," ",i.dice,i.versatile?` (${i.versatile} vers.)`:""]}),l.jsxs("div",{children:[l.jsx("strong",{children:"Type:"})," ",i.type]}),l.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",flexWrap:"wrap",gap:6},children:i.properties.map(s=>l.jsx("span",{style:uv,children:s},s))})]})]}),l.jsx(At,{type:"source",position:Me.Right})]})};function LC({id:e,data:t}){const{deleteElements:n}=Vn(),r=b.useCallback(i=>{i.stopPropagation(),i.preventDefault(),n({nodes:[{id:e}]})},[n,e]);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{className:"nodrag nopan",style:vs,onPointerDown:i=>{i.stopPropagation(),i.preventDefault()},onMouseDown:i=>{i.stopPropagation(),i.preventDefault()},onClick:r,title:"Delete",children:""}),l.jsx(At,{type:"target",position:Me.Left}),l.jsxs(xs,{title:"Feats",children:[l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.gwm,onChange:i=>t.onChange({gwm:i.target.checked})})," Great Weapon Master"]}),l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.ss,onChange:i=>t.onChange({ss:i.target.checked})})," Sharpshooter"]}),l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.pam,onChange:i=>t.onChange({pam:i.target.checked})})," Polearm Master"]}),l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.cbe,onChange:i=>t.onChange({cbe:i.target.checked})})," Crossbow Expert"]})]}),l.jsx(At,{type:"source",position:Me.Right})]})}function OC({id:e,data:t}){const{deleteElements:n}=Vn(),r=b.useCallback(a=>{a.stopPropagation(),a.preventDefault(),n({nodes:[{id:e}]})},[n,e]),i=t.level??5,s=Math.ceil(i/2),o=i>=16?4:i>=9?3:(i>=3,2);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{className:"nodrag nopan",style:vs,onPointerDown:a=>{a.stopPropagation(),a.preventDefault()},onMouseDown:a=>{a.stopPropagation(),a.preventDefault()},onClick:r,title:"Delete",children:""}),l.jsx(At,{type:"target",position:Me.Left}),l.jsxs(xs,{title:"Class Features",children:[l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.sneak,onChange:a=>t.onChange({sneak:a.target.checked})})," Rogue Sneak Attack"]}),t.sneak&&l.jsxs("div",{style:oi,children:["Approx: ",s,"d6 once/turn on hit"]}),l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.rage,onChange:a=>t.onChange({rage:a.target.checked})})," Barbarian Rage"]}),t.rage&&l.jsxs("div",{style:oi,children:["+",o," melee damage per hit"]}),l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.smite,onChange:a=>t.onChange({smite:a.target.checked})})," Paladin Divine Smite"]}),t.smite&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("label",{style:{fontSize:12,color:"#475569"},children:["Smite Dice (d8)",l.jsx("input",{type:"range",min:0,max:5,step:1,value:t.smiteDice??2,onChange:a=>t.onChange({smiteDice:Number(a.target.value)}),style:{width:"100%"}})]}),l.jsxs("label",{style:{fontSize:12,color:"#475569"},children:["Smites/Round",l.jsx("input",{type:"range",min:0,max:2,step:1,value:t.smitesPerRound??1,onChange:a=>t.onChange({smitesPerRound:Number(a.target.value)}),style:{width:"100%"}})]})]})]}),l.jsx(At,{type:"source",position:Me.Right})]})}function FC({id:e,data:t}){const{deleteElements:n}=Vn(),r=b.useCallback(i=>{i.stopPropagation(),i.preventDefault(),n({nodes:[{id:e}]})},[n,e]);return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{className:"nodrag nopan",style:vs,onPointerDown:i=>{i.stopPropagation(),i.preventDefault()},onMouseDown:i=>{i.stopPropagation(),i.preventDefault()},onClick:r,title:"Delete",children:""}),l.jsx(At,{type:"target",position:Me.Left}),l.jsxs(xs,{title:"Buffs & Rider Damage",children:[l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.bless,onChange:i=>t.onChange({bless:i.target.checked})})," Bless ( +2.5 to hit)"]}),l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:!!t.d6onhit,onChange:i=>t.onChange({d6onhit:i.target.checked})})," Hex / Hunter's Mark (+1d6 on hit)"]})]}),l.jsx(At,{type:"source",position:Me.Right})]})}function BC({id:e,data:t}){var s;const{deleteElements:n}=Vn(),r=b.useCallback(o=>{o.stopPropagation(),o.preventDefault(),n({nodes:[{id:e}]})},[n,e]),{summary:i}=t;return l.jsxs("div",{style:{position:"relative"},children:[l.jsx("button",{className:"nodrag nopan",style:vs,onPointerDown:o=>{o.stopPropagation(),o.preventDefault()},onMouseDown:o=>{o.stopPropagation(),o.preventDefault()},onClick:r,title:"Delete",children:""}),l.jsx(At,{type:"target",position:Me.Left}),l.jsx(xs,{title:"DPR Output",children:i?l.jsxs("div",{style:{fontSize:14,display:"grid",gap:4},children:[l.jsxs("div",{children:[l.jsx("span",{style:oi,children:"To-hit:"})," ",l.jsxs("strong",{children:["+",i.toHit]})]}),l.jsxs("div",{children:[l.jsx("span",{style:oi,children:"Mode:"})," ",l.jsx("strong",{children:i.advMode})]}),l.jsxs("div",{children:[l.jsxs("span",{style:oi,children:["Hit chance vs AC ",i.targetAC,":"]})," ",l.jsxs("strong",{children:[Math.round(i.pHit*100),"%"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:oi,children:"Crit chance:"})," ",l.jsxs("strong",{children:[Math.round(i.pCrit*100),"%"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:oi,children:"Attacks/round:"})," ",l.jsx("strong",{children:i.attacks})]}),l.jsx("div",{style:{borderTop:"1px solid #e2e8f0",margin:"8px 0"}}),l.jsxs("div",{style:{fontSize:18},children:["DPR: ",l.jsx("strong",{children:i.dpr.toFixed(2)})]}),(s=i.notes)!=null&&s.length?l.jsx("ul",{style:{marginTop:6,color:"#475569",paddingLeft:18},children:i.notes.map((o,a)=>l.jsx("li",{style:{fontSize:12},children:o},a))}):null]}):l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Connect a Fighting Style / Weapon / Feats / Features / Buffs to compute DPR."})}),l.jsx(At,{type:"source",position:Me.Right})]})}const HC={fighterStyle:PC,weapon:$C,feats:LC,features:OC,buffs:FC,output:BC};function WC(e){var X,oe,Z,we,ke,$,fe,ce,ve,Pe;const[t,n]=b.useState(5),[r,i]=b.useState(16),[s,o]=b.useState(14),[a,c]=b.useState(16),[u,d]=b.useState("normal"),[f,p]=b.useState(!1),[h,k]=b.useState("none"),[S,M]=b.useState("none");U.useEffect(()=>{var je;const te=(je=e.derived)==null?void 0:je.totalLevel;typeof te=="number"&&te>0&&n(te)},[(X=e.derived)==null?void 0:X.totalLevel]),U.useEffect(()=>{var te,je,_e,Ee;(je=(te=e.character)==null?void 0:te.abilities)!=null&&je.str&&i(e.character.abilities.str),(Ee=(_e=e.character)==null?void 0:_e.abilities)!=null&&Ee.dex&&o(e.character.abilities.dex)},[(Z=(oe=e.character)==null?void 0:oe.abilities)==null?void 0:Z.str,(ke=(we=e.character)==null?void 0:we.abilities)==null?void 0:ke.dex]);const g=(($=e.derived)==null?void 0:$.totalLevel)??t,m=b.useMemo(()=>oh(g),[g]),w=b.useMemo(()=>lh(g),[g]),v=b.useMemo(()=>[{id:"style-1",type:"fighterStyle",position:{x:80,y:200},data:{styleId:"dueling"}},{id:"wpn-1",type:"weapon",position:{x:80,y:20},data:{weaponId:"longsword"}},{id:"feat-1",type:"feats",position:{x:80,y:380},data:{gwm:!1,ss:!1,pam:!1,cbe:!1}},{id:"feat-2",type:"features",position:{x:80,y:560},data:{}},{id:"buff-1",type:"buffs",position:{x:80,y:740},data:{bless:!1,d6onhit:!1}},{id:"out-1",type:"output",position:{x:620,y:240},data:{summary:null}}],[]),[z,T,P]=tv(v),[x,E,I]=nv([{id:"e1",source:"wpn-1",target:"out-1"},{id:"e2",source:"style-1",target:"out-1"},{id:"e3",source:"feat-1",target:"out-1"},{id:"e4",source:"feat-2",target:"out-1"},{id:"e5",source:"buff-1",target:"out-1"}]),L=b.useRef({past:[],future:[],suppress:!1,lastTs:0}),Y=b.useCallback(()=>{if(L.current.suppress)return;const te=Date.now();if(te-L.current.lastTs<50)return;L.current.lastTs=te;const je=JSON.parse(JSON.stringify(z)),_e=JSON.parse(JSON.stringify(x));L.current.past.push({nodes:je,edges:_e}),L.current.future=[]},[z,x]),O=b.useCallback(()=>{const{past:te,future:je}=L.current;if(te.length===0)return;const _e={nodes:JSON.parse(JSON.stringify(z)),edges:JSON.parse(JSON.stringify(x))},Ee=te.pop();je.push(_e),L.current.suppress=!0,T(Ee.nodes),E(Ee.edges),L.current.suppress=!1},[z,x,T,E]),y=b.useCallback(()=>{const{past:te,future:je}=L.current;if(je.length===0)return;const _e={nodes:JSON.parse(JSON.stringify(z)),edges:JSON.parse(JSON.stringify(x))},Ee=je.pop();te.push(_e),L.current.suppress=!0,T(Ee.nodes),E(Ee.edges),L.current.suppress=!1},[z,x,T,E]);U.useEffect(()=>{const te=je=>{const _e=je.ctrlKey||je.metaKey,Ee=je.key.toLowerCase();_e&&Ee==="z"&&!je.shiftKey?(je.preventDefault(),O()):(_e&&Ee==="y"||_e&&Ee==="z"&&je.shiftKey)&&(je.preventDefault(),y())};return window.addEventListener("keydown",te),()=>window.removeEventListener("keydown",te)},[O,y]);const C=b.useCallback(te=>{Y(),P(te)},[Y,P]),_=b.useCallback(te=>{Y(),I(te)},[Y,I]),B=b.useCallback((te,je)=>{Y(),T(_e=>_e.map(Ee=>Ee.id===te?{...Ee,data:{...Ee.data,...je}}:Ee))},[Y,T]);U.useEffect(()=>{T(te=>te.some(_e=>{var Ee;return!((Ee=_e.data)!=null&&Ee.onChange)})?te.map(_e=>{var Ee;return(Ee=_e.data)!=null&&Ee.onChange?_e:{..._e,data:{..._e.data,onChange:ot=>B(_e.id,ot)}}}):te)},[B,T]);const A=b.useCallback(te=>{Y(),T(je=>je.filter(_e=>_e.id!==te)),E(je=>je.filter(_e=>_e.source!==te&&_e.target!==te))},[T,E]);U.useEffect(()=>()=>{},[A]),U.useEffect(()=>{T(te=>te.some(_e=>{var Ee;return!((Ee=_e.data)!=null&&Ee.onDelete)})?te.map(_e=>{var Ee;return(Ee=_e.data)!=null&&Ee.onDelete?_e:{..._e,data:{..._e.data,onDelete:A}}}):te)},[A,T]);const j=b.useCallback(te=>{Y(),E(je=>Xd(te,je))},[Y,E]),D=b.useCallback(()=>{const te=new Map(z.map(_e=>[_e.id,_e])),je=z.map(_e=>{var q,G,Q,J,de,be;if(_e.type!=="output")return _e;const Ee=x.filter(he=>he.target===_e.id),ot=Ee.map(he=>te.get(he.source)).find(he=>(he==null?void 0:he.type)==="fighterStyle"),nt=Ee.map(he=>te.get(he.source)).find(he=>(he==null?void 0:he.type)==="weapon"),ae=Ee.map(he=>te.get(he.source)).find(he=>(he==null?void 0:he.type)==="feats"),rt=Ee.map(he=>te.get(he.source)).find(he=>(he==null?void 0:he.type)==="features"),F=Ee.map(he=>te.get(he.source)).find(he=>(he==null?void 0:he.type)==="buffs");if(!nt)return{..._e,data:{..._e.data,summary:null}};const K=(q=ot==null?void 0:ot.data)==null?void 0:q.styleId,W=(ae==null?void 0:ae.data)||{},V={...(rt==null?void 0:rt.data)||{}},ie=(F==null?void 0:F.data)||{},re=rs.find(he=>he.id===nt.data.weaponId)??rs[0],xe=((G=e.derived)==null?void 0:G.strMod)??ah(r),le=((Q=e.derived)==null?void 0:Q.dexMod)??ah(s),ne=re.ranged===!0,ge=ne||re.finesse;let Be=m+(ge?le:xe);const De=[];K==="archery"&&ne&&(Be+=2,De.push("Archery: +2 to hit applied.")),K==="defense"&&De.push("Defense: +1 AC (not factored into DPR)."),ie.bless&&(Be+=2.5,De.push("Bless: +2.5 to hit EV."));const $e=(J=re.tags)==null?void 0:J.includes("gwm"),Ye=(de=re.tags)==null?void 0:de.includes("ss");W.gwm&&$e&&!ne&&(Be-=5,De.push("GWM: -5 to hit/+10 dmg.")),W.ss&&Ye&&ne&&(Be-=5,De.push("Sharpshooter: -5 to hit/+10 dmg."));const Ne=a,me=IC((21+Be-Ne)/20,0,1),Le=.05,Ve=ch(me,u),Je=ch(Le,u),dt=f&&re.versatile?re.versatile:re.dice,lt=K==="great-weapon"&&re.handed==="2h"&&!ne,ct=bc(dt,{greatWeaponFighting:lt});lt&&De.push("Great Weapon Fighting: reroll 1s & 2s estimated.");const xt=ge?le:xe;let ht=0,jt=0;K==="dueling"&&re.handed==="1h"&&!ne&&(ht+=2,De.push("Dueling: +2 damage with 1H melee.")),K==="two-weapon"&&re.properties.includes("light")&&!ne&&(jt+=1,De.push("Two-Weapon Fighting: includes offhand attack (adds mod).")),W.gwm&&$e&&!ne&&(ht+=10),W.ss&&Ye&&ne&&(ht+=10);let Wt=0;if(W.pam&&((be=re.tags)!=null&&be.includes("pam"))&&!ne){const he=V.rage?g>=16?4:g>=9?3:2:0,ze=ie.d6onhit?Ri.d6:0,Fe=Ri.d4+xt+he+ze,He=Ri.d4;Wt=Math.max(Ve-Je,0)*Fe+Je*(Fe+He),De.push("Polearm Master: bonus 1d4 attack added.")}W.cbe&&ne&&re.id.includes("crossbow")&&(jt+=1,De.push("Crossbow Expert: bonus attack added."));const un=ie.d6onhit?Ri.d6:0;ie.d6onhit&&De.push("Hex/Hunter's Mark: +1d6 on hit.");const tn=V.rage?g>=16?4:g>=9?3:2:0;tn&&!ne&&(ht+=tn,De.push(`Rage: +${tn} melee damage per hit.`));let dn=0,Kt=0;V.smite&&(dn=V.smiteDice??2,Kt=V.smitesPerRound??1);const ut=V.sneak?Math.min(10,Math.ceil(g/2)):0,Ut=bc(dt,{greatWeaponFighting:lt}),R=ct+xt+ht+un,N=(Ve-Je)*R+Je*(R+Ut);let ee=w;jt&&(ee+=jt);const se=Math.max(Ve-Je,0),Se=1-Math.pow(1-se,Math.max(1,w)),Ae=ut?Se*bc(`${ut}d6`):0,Ie=Ri.d8,Oe=dn&&Kt?Kt*(se*(dn*Ie)+Je*(dn*2*Ie)):0;let qe=N*ee+Ae+Oe+Wt,it=1;return h!=="none"&&h===re.type&&(it*=.5,De.push(`Target resists ${re.type} damage.`)),S!=="none"&&S===re.type&&(it*=2,De.push(`Target vulnerable to ${re.type} damage.`)),qe*=it,{..._e,data:{..._e.data,summary:{toHit:Math.round(Be),advMode:u,targetAC:Ne,pHit:Ve,pCrit:Je,attacks:ee,dpr:qe,notes:De}}}});L.current.suppress=!0,T(je),L.current.suppress=!1},[z,x,g,r,s,a,w,f,u,h,S,T,m,(fe=e.derived)==null?void 0:fe.strMod,(ce=e.derived)==null?void 0:ce.dexMod]);U.useEffect(()=>{D()},[z.length,JSON.stringify(x),g,r,s,a,f,u,h,S,D]);const H=te=>{const je=`${te}-${crypto.randomUUID().slice(0,6)}`,_e=40+Math.random()*760,Ee={id:je,type:te,position:{x:80,y:_e},data:{onChange:ot=>B(je,ot),onDelete:A}};te==="weapon"&&(Ee.data.weaponId=rs[0].id),te==="fighterStyle"&&(Ee.data.styleId="dueling"),te==="feats"&&Object.assign(Ee.data,{gwm:!1,ss:!1,pam:!1,cbe:!1}),te==="features"&&Object.assign(Ee.data,{level:t}),te==="buffs"&&Object.assign(Ee.data,{bless:!1,d6onhit:!1}),te==="output"&&(Ee.data.summary=null),Y(),T(ot=>[...ot,Ee])};return l.jsxs("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:"1fr 360px",gap:12,height:"calc(100vh - 100px)"},children:[l.jsx("div",{style:{height:"100%",border:"1px solid #e2e8f0",borderRadius:12,overflow:"hidden",background:"white"},children:l.jsxs(Zd,{nodes:z,edges:x,onNodesChange:C,onEdgesChange:_,onConnect:j,nodeTypes:HC,fitView:!0,children:[l.jsx(cv,{}),l.jsx(sv,{pannable:!0,zoomable:!0}),l.jsx(lv,{showInteractive:!1})]})}),l.jsxs("div",{style:{display:"grid",gap:12},children:[l.jsxs("section",{style:fl,children:[l.jsx("div",{style:{padding:12,borderBottom:"1px solid #e2e8f0",fontWeight:600},children:"History"}),l.jsxs("div",{style:{padding:12,display:"flex",gap:8},children:[l.jsx("button",{onClick:O,style:Er,children:" Undo"}),l.jsx("button",{onClick:y,style:Er,children:" Redo"})]})]}),l.jsxs("section",{style:fl,children:[l.jsx("div",{style:{padding:12,borderBottom:"1px solid #e2e8f0",fontWeight:600},children:"Global Settings"}),l.jsxs("div",{style:{padding:12,display:"grid",gap:12},children:[l.jsx(kc,{label:`Level: ${g}`,min:1,max:20,value:t,onChange:te=>n(te)}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsx(kc,{label:`STR: ${r} ${((ve=e.derived)==null?void 0:ve.strMod)!==void 0?`(mod ${e.derived.strMod>=0?"+":""}${e.derived.strMod})`:""}`,min:8,max:20,value:r,onChange:te=>i(te)}),l.jsx(kc,{label:`DEX: ${s} ${((Pe=e.derived)==null?void 0:Pe.dexMod)!==void 0?`(mod ${e.derived.dexMod>=0?"+":""}${e.derived.dexMod})`:""}`,min:8,max:20,value:s,onChange:te=>o(te)})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:["Target AC",l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsx("input",{type:"number",value:a,onChange:te=>c(parseInt(te.target.value||"0",10)),style:Gi}),l.jsx("span",{style:uv,children:"vs"})]})]}),l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:["Roll Mode",l.jsxs("select",{value:u,onChange:te=>d(te.target.value),style:Gi,children:[l.jsx("option",{value:"normal",children:"Normal"}),l.jsx("option",{value:"adv",children:"Advantage"}),l.jsx("option",{value:"dis",children:"Disadvantage"})]})]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,alignItems:"end"},children:[l.jsxs("label",{style:Zn,children:[l.jsx("input",{type:"checkbox",checked:f,onChange:te=>p(te.target.checked)})," Use versatile die"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:["Resistance",l.jsxs("select",{value:h,onChange:te=>k(te.target.value),style:Gi,children:[l.jsx("option",{value:"none",children:"None"}),l.jsx("option",{value:"slashing",children:"Slashing"}),l.jsx("option",{value:"piercing",children:"Piercing"}),l.jsx("option",{value:"bludgeoning",children:"Bludgeoning"})]})]}),l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:["Vulnerability",l.jsxs("select",{value:S,onChange:te=>M(te.target.value),style:Gi,children:[l.jsx("option",{value:"none",children:"None"}),l.jsx("option",{value:"slashing",children:"Slashing"}),l.jsx("option",{value:"piercing",children:"Piercing"}),l.jsx("option",{value:"bludgeoning",children:"Bludgeoning"})]})]})]})]}),l.jsxs("div",{style:{fontSize:12,color:"#475569"},children:["Proficiency: ",l.jsxs("strong",{children:["+",oh(g)]}),"  Base Attacks/Round (Fighter): ",l.jsx("strong",{children:lh(g)})]})]})]}),l.jsxs("section",{style:fl,children:[l.jsx("div",{style:{padding:12,borderBottom:"1px solid #e2e8f0",fontWeight:600},children:"Add Nodes"}),l.jsxs("div",{style:{padding:12,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:8},children:[l.jsx("button",{onClick:()=>H("weapon"),style:Er,children:"+ Weapon"}),l.jsx("button",{onClick:()=>H("fighterStyle"),style:Er,children:"+ Style"}),l.jsx("button",{onClick:()=>H("feats"),style:Er,children:"+ Feats"}),l.jsx("button",{onClick:()=>H("features"),style:Er,children:"+ Features"}),l.jsx("button",{onClick:()=>H("buffs"),style:Er,children:"+ Buffs"}),l.jsx("button",{onClick:()=>H("output"),style:Er,children:"+ Output"})]}),l.jsx("div",{style:{padding:"0 12px 12px",fontSize:12,color:"#64748b"},children:"Typical wiring: Weapon  Output; Style/Feats/Features/Buffs  Output. Create multiple outputs to compare builds."})]}),l.jsxs("section",{style:fl,children:[l.jsx("div",{style:{padding:12,borderBottom:"1px solid #e2e8f0",fontWeight:600},children:"Notes"}),l.jsxs("ul",{style:{padding:12,margin:0,color:"#475569",fontSize:14},children:[l.jsx("li",{children:"Advantage/disadvantage transforms hit and crit probabilities."}),l.jsx("li",{children:"GWM/SS: -5 to hit, +10 damage when weapon qualifies."}),l.jsx("li",{children:"Polearm Master adds a bonus 1d4 attack if using a qualifying weapon."}),l.jsx("li",{children:"Rogue Sneak Attack modeled once/turn with probability of at least one primary hit."}),l.jsx("li",{children:"Divine Smite adds chosen d8s per smite on hit; crit doubles smite dice."}),l.jsx("li",{children:"Rage adds +2/+3/+4 melee damage scaling by level."}),l.jsx("li",{children:"Resist/Vulnerability multiplies final DPR by 0.5x/2x if it matches damage type."})]})]})]})]})}const Lt={width:"100%",padding:"8px 10px",borderRadius:8,border:"1px solid #cbd5e1"},to={padding:"2px 8px",borderRadius:999,border:"1px solid #e2e8f0",background:"#f8fafc",fontSize:12},Cc={border:"1px solid #e2e8f0",borderRadius:12,background:"white"},Qe={padding:"8px 10px",borderRadius:8,border:"1px solid #cbd5e1",background:"white",cursor:"pointer"},Gn={color:"#64748b",fontSize:12},Qn=["Barbarian","Bard","Cleric","Druid","Fighter","Monk","Paladin","Ranger","Rogue","Sorcerer","Warlock","Wizard"],uh={Barbarian:3,Bard:3,Cleric:1,Druid:2,Fighter:3,Monk:3,Paladin:3,Ranger:3,Rogue:3,Sorcerer:1,Warlock:1,Wizard:2},Lu=["Human (Base)","Human (Variant)","Elf (Wood)","Elf (High)","Dwarf (Hill)","Dwarf (Mountain)","Halfling (Lightfoot)","Halfling (Stout)","Tiefling","Dragonborn","Dragonborn (Black)","Dragonborn (Blue)","Dragonborn (Brass)","Dragonborn (Bronze)","Dragonborn (Copper)","Dragonborn (Gold)","Dragonborn (Green)","Dragonborn (Red)","Dragonborn (Silver)","Dragonborn (White)","Gnome","Half-Orc"],Ou=["Soldier","Acolyte","Criminal","Sage","Folk Hero","Urchin","Noble","Outlander","Sailor"];function dv(e){return l.jsxs("div",{style:{minWidth:280,background:"#f3f4f6",border:"1px solid #e2e8f0",borderRadius:12},children:[l.jsx("div",{style:{padding:10,borderBottom:"1px solid #e2e8f0",fontWeight:600,fontSize:13},children:e.title}),l.jsx("div",{style:{padding:10,display:"grid",gap:8},children:e.children})]})}const Ao=["STR","DEX","CON","INT","WIS","CHA"],UC=["Acrobatics","Animal Handling","Arcana","Athletics","Deception","History","Insight","Intimidation","Investigation","Medicine","Nature","Perception","Performance","Persuasion","Religion","Sleight of Hand","Stealth","Survival"],VC=["Archery","Defense","Dueling","Great Weapon Fighting","Protection","Two-Weapon Fighting"],Vs={class:"#fde68a",feat:"#86efac",asi:"#93c5fd",note:"#fca5a5"},fv="application/x-scratch-block",On="application/x-scratch-token";function jc(e){return{display:"inline-flex",alignItems:"center",minWidth:72,padding:"4px 8px",borderRadius:8,border:`2px dashed ${e?"#0ea5e9":"#cbd5e1"}`,background:e?"#e0f2fe":"#f8fafc",color:"#0f172a",fontSize:12,gap:6}}function Ec(e){return l.jsx("span",{style:{padding:"2px 6px",borderRadius:999,background:"#e2e8f0",fontSize:12},children:e})}function pl(e){return l.jsx("div",{draggable:!0,onDragStart:t=>t.dataTransfer.setData(fv,JSON.stringify(e.draggableData)),style:{padding:"6px 10px",borderRadius:10,background:e.color,border:"1px solid #e2e8f0",cursor:"grab",userSelect:"none",fontSize:12},title:"Drag into the workspace",children:e.label})}function Ts(e){return l.jsx("div",{draggable:!0,onDragStart:t=>t.dataTransfer.setData(On,JSON.stringify({type:e.type,value:e.value})),style:{padding:"4px 8px",borderRadius:999,background:"#f8fafc",border:"1px solid #e2e8f0",cursor:"grab",fontSize:12},title:`Drag to a matching ${e.type} hole`,children:e.label})}function YC(e){const[t,n]=b.useState(null),r={background:Vs[e.blk.kind],border:"1px solid #e2e8f0",borderRadius:12,padding:10,display:"grid",gap:8},i=l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("strong",{style:{fontSize:12,textTransform:"uppercase",letterSpacing:.3},children:e.blk.kind}),l.jsx("span",{style:{fontSize:12,color:"#475569"},children:"Level"}),l.jsx("input",{type:"number",min:1,max:20,value:e.blk.level,onChange:s=>e.onChange({level:Math.max(1,Math.min(20,parseInt(s.target.value||"1",10)))}),style:{width:64,padding:"4px 6px",borderRadius:8,border:"1px solid #cbd5e1"}})]}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("button",{onClick:e.onMoveUp,style:{...Qe,padding:6},title:"Move up",children:""}),l.jsx("button",{onClick:e.onMoveDown,style:{...Qe,padding:6},title:"Move down",children:""}),l.jsx("button",{onClick:e.onRemove,style:{...Qe,padding:6},title:"Remove",children:""})]})]});return l.jsxs("div",{style:r,children:[i,e.blk.kind==="class"&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("span",{style:{fontSize:12,color:"#475569"},children:"Class:"}),l.jsx("span",{onDragOver:s=>{s.preventDefault(),n("class")},onDragLeave:()=>n(null),onDrop:s=>{n(null);const o=s.dataTransfer.getData(On);if(o)try{const a=JSON.parse(o);a.type==="class"&&Qn.includes(a.value)&&e.onChange({className:a.value})}catch{}},style:jc(t==="class"),children:e.blk.className?Ec(e.blk.className):l.jsx("span",{style:{color:"#64748b"},children:"drop class here"})}),l.jsx("select",{value:e.blk.className||"Fighter",onChange:s=>e.onChange({className:s.target.value}),style:Lt,children:Qn.slice().sort((s,o)=>s.localeCompare(o)).map(s=>l.jsx("option",{value:s,children:s},s))})]}),e.blk.kind==="feat"&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsx("span",{style:{fontSize:12,color:"#475569"},children:"Feat Name:"}),l.jsx("input",{value:e.blk.featName||"",onChange:s=>e.onChange({featName:s.target.value}),placeholder:"Great Weapon Master",style:Lt})]}),e.blk.kind==="asi"&&l.jsx("div",{style:{display:"grid",gap:8},children:l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("span",{style:{fontSize:12,color:"#475569"},children:"Ability +1:"}),l.jsx("span",{onDragOver:s=>{s.preventDefault(),n("a1")},onDragLeave:()=>n(null),onDrop:s=>{n(null);const o=s.dataTransfer.getData(On);if(o)try{const a=JSON.parse(o);a.type==="ability"&&Ao.includes(a.value)&&e.onChange({ability1:a.value})}catch{}},style:jc(t==="a1"),children:e.blk.ability1?Ec(e.blk.ability1):l.jsx("span",{style:{color:"#64748b"},children:"drop ability"})}),l.jsx("span",{style:{fontSize:12,color:"#475569"},children:"Ability +1:"}),l.jsx("span",{onDragOver:s=>{s.preventDefault(),n("a2")},onDragLeave:()=>n(null),onDrop:s=>{n(null);const o=s.dataTransfer.getData(On);if(o)try{const a=JSON.parse(o);a.type==="ability"&&Ao.includes(a.value)&&e.onChange({ability2:a.value})}catch{}},style:jc(t==="a2"),children:e.blk.ability2?Ec(e.blk.ability2):l.jsx("span",{style:{color:"#64748b"},children:"drop ability"})})]})}),e.blk.kind==="note"&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsx("span",{style:{fontSize:12,color:"#475569"},children:"Notes:"}),l.jsx("textarea",{value:e.blk.text||"",onChange:s=>e.onChange({text:s.target.value}),rows:2,style:{...Lt,resize:"vertical"},placeholder:"Why this choice?"})]})]})}function GC({id:e,data:t}){const{deleteElements:n,getNode:r,getEdges:i,setNodes:s,setEdges:o,getNodes:a}=Vn(),c=b.useCallback(x=>{x.stopPropagation(),x.preventDefault(),n({nodes:[{id:e}]})},[n,e]),[u,d]=U.useState(null),[f,p]=U.useState(!1),h=U.useRef({active:!1,startClientX:0,baseX:0,baseY:0,baseLevel:1,className:void 0,lastId:e,added:0,deleted:0}),k=U.useCallback(()=>{window.removeEventListener("pointermove",M),window.removeEventListener("pointerup",S)},[]),S=U.useCallback(x=>{h.current.active=!1,k()},[k]),M=U.useCallback(x=>{var L,Y,O;if(!h.current.active)return;const E=x.clientX-h.current.startClientX,I=120;if(E>=0){const y=Math.max(0,E);let C=Math.floor(y/I);if(C<=h.current.added)return;const _=Math.max(0,20-h.current.baseLevel);C=Math.min(C,_);let B=h.current.lastId;const A=(a==null?void 0:a())||[],j=(i==null?void 0:i())||[],D=[],H=[];for(let X=h.current.added+1;X<=C;X+=1){const oe=h.current.baseLevel+X,Z=`step-${crypto.randomUUID().slice(0,6)}`;D.push({id:Z,type:"progressStep",position:{x:h.current.baseX+X*320,y:h.current.baseY},data:{level:oe,type:"class",className:h.current.className,collapsed:!0}}),H.push({id:`e-${crypto.randomUUID().slice(0,6)}`,source:B,target:Z}),B=Z}h.current.added=C,h.current.lastId=B,D.length&&(s==null||s([...A,...D])),H.length&&(o==null||o([...j,...H]))}else{const y=Math.abs(E);let C=Math.floor(y/I);if(C<=h.current.deleted)return;const _=(a==null?void 0:a())||[],B=(i==null?void 0:i())||[],A=new Map(_.map(ce=>[ce.id,ce])),j=[];let D=e,H=0;for(;D&&H<256;){H+=1;const ce=B.filter(te=>te.source===D);if(!ce.length)break;const ve=(Y=(L=ce.map(te=>({e:te,n:A.get(te.target)})).filter(te=>!!te.n).sort((te,je)=>{var _e,Ee;return(((_e=te.n.position)==null?void 0:_e.y)||0)-(((Ee=je.n.position)==null?void 0:Ee.y)||0)})[0])==null?void 0:L.n)==null?void 0:Y.id;if(!ve)break;const Pe=A.get(ve);if(!Pe)break;j.push(Pe),D=ve}const X=h.current.className,oe=j.filter(ce=>{var ve,Pe;return ce.type==="progressStep"&&((ve=ce.data)==null?void 0:ve.type)==="class"&&((Pe=ce.data)==null?void 0:Pe.className)===X}),Z=oe.length;if(Z<=0)return;C=Math.min(C,Z);const we=C-h.current.deleted;if(we<=0)return;const ke=oe.slice(-we).map(ce=>ce.id),$=_.filter(ce=>!ke.includes(ce.id)),fe=B.filter(ce=>!ke.includes(ce.source)&&!ke.includes(ce.target));if(h.current.deleted=C,ke.includes(h.current.lastId)){const ce=((O=oe.filter(ve=>!ke.includes(ve.id)).pop())==null?void 0:O.id)||e;h.current.lastId=ce}s==null||s($),o==null||o(fe)}},[a,i,s,o]),g=U.useCallback(x=>{var I,L;if(t.type!=="class"||!t.className)return;x.preventDefault(),x.stopPropagation();const E=r==null?void 0:r(e);h.current={active:!0,startClientX:x.clientX,baseX:((I=E==null?void 0:E.position)==null?void 0:I.x)??0,baseY:((L=E==null?void 0:E.position)==null?void 0:L.y)??0,baseLevel:Number(t.level)||1,className:t.className,lastId:e,added:0,deleted:0},window.addEventListener("pointermove",M),window.addEventListener("pointerup",S,{once:!0})},[t.type,t.className,t.level,e,r,M,S]),m=()=>{var x;return(x=t.onChange)==null?void 0:x.call(t,{collapsed:!t.collapsed})},w=b.useMemo(()=>{var E;const x=[];if(x.push(`L${t.level}`),t.type==="class"&&x.push(t.className||"Class"),t.type==="feat"&&(t.featName||t.feats&&t.feats.length)){const I=(((E=t.feats)==null?void 0:E.length)||0)+(t.featName?1:0);x.push(I>1?`${I} feats`:"Feat")}if(t.type==="asi"&&(t.ability1||t.ability2||t.asi)&&x.push(t.asi||Mr(t.ability1,t.ability2)||"ASI"),t.type==="bundle"){const I=t.featureChoices||[],L=new Set(I.map(O=>O.kind)),Y=[];L.has("fighting-style")&&Y.push("Fighting Style"),L.has("skill-proficiency")&&Y.push("Skills"),L.has("other")&&Y.push("Other"),x.push(Y.length?`Choices: ${Y.join(", ")}`:"Choices")}return t.type==="subclass"&&x.push(`Subclass${t.subclass?`: ${t.subclass}`:""}`),(t.notes||"").trim()&&x.push((t.notes||"").trim().slice(0,32)),x.join("  ")},[t.level,t.type,t.className,t.featName,t.asi,t.notes]),v=b.useMemo(()=>{const x=Number(t.level),E=[4,8,12,16,19].includes(x),I=t.className==="Fighter"&&(x===6||x===14),L=t.className==="Rogue"&&x===10;return E||I||L},[t.level,t.className]),z=b.useCallback(x=>{var O,y,C,_;if((x==null?void 0:x.targetHandle)!=="attach")return!0;const E=x!=null&&x.source?r(x.source):null,I=x!=null&&x.target?r(x.target):null,L=!!(E&&E.type==="progressStep"&&(((O=E.data)==null?void 0:O.type)==="asi"||((y=E.data)==null?void 0:y.type)==="bundle"||((C=E.data)==null?void 0:C.type)==="subclass")),Y=!!(I&&I.type==="progressStep"&&((_=I.data)==null?void 0:_.type)==="class");return L&&Y},[r]),T=b.useMemo(()=>{var E,I,L,Y;const x=Array.isArray(t==null?void 0:t.featureChoices)?t.featureChoices.length:0;if((t==null?void 0:t.type)!=="class")return x;try{const O=((i==null?void 0:i())||[]).filter(C=>C.target===e&&(C==null?void 0:C.targetHandle)==="attach");let y=0;for(const C of O){const _=r==null?void 0:r(C.source);!_||_.type!=="progressStep"||(((E=_.data)==null?void 0:E.type)==="bundle"&&Array.isArray((I=_.data)==null?void 0:I.featureChoices)?y+=_.data.featureChoices.length:(((L=_.data)==null?void 0:L.type)==="asi"||((Y=_.data)==null?void 0:Y.type)==="subclass")&&(y+=1))}return x+y}catch{return x}},[t,i,r,e]),P=t!=null&&t._active?"0 0 0 2px rgba(14,165,233,0.35), 0 6px 20px rgba(14,165,233,0.25)":"0 1px 2px rgba(0,0,0,0.06)";return l.jsxs("div",{style:{position:"relative",boxShadow:P,outline:f?"2px dashed #0ea5e9":void 0,outlineOffset:-2},onDragOver:x=>{Array.from(x.dataTransfer.types||[]).includes(On)&&(x.preventDefault(),p(!0))},onDragLeave:()=>p(!1),onDrop:x=>{var I,L,Y,O;p(!1);const E=x.dataTransfer.getData(On);if(E)try{const y=JSON.parse(E);if(t.type==="class"&&y.type==="class"&&Qn.includes(y.value)){(I=t.onChange)==null||I.call(t,{className:y.value}),x.stopPropagation();return}if(t.type==="asi"&&y.type==="ability"&&Ao.includes(y.value)){const C=t.ability1||null,_=t.ability2||null;C?_?(O=t.onChange)==null||O.call(t,{ability2:y.value,asi:Mr(C,y.value)}):(Y=t.onChange)==null||Y.call(t,{ability2:y.value,asi:Mr(C,y.value)}):(L=t.onChange)==null||L.call(t,{ability1:y.value,asi:Mr(y.value,_)}),x.stopPropagation();return}}catch{}},children:[l.jsxs("details",{className:"nodrag nopan",style:{position:"absolute",top:4,right:4,zIndex:10},children:[l.jsx("summary",{role:"button",style:{listStyle:"none",width:24,height:24,borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",color:"#0f172a",lineHeight:"22px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.06)"},onPointerDown:x=>{x.stopPropagation()},onMouseDown:x=>{x.stopPropagation()},onClick:x=>{x.stopPropagation()},title:"Node actions",children:""}),l.jsxs("div",{style:{position:"absolute",right:0,top:28,display:"grid",gap:6,background:"white",border:"1px solid #e2e8f0",borderRadius:8,padding:8,boxShadow:"0 8px 24px rgba(0,0,0,0.12)"},onClick:x=>x.stopPropagation(),children:[l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:x=>{x.preventDefault(),c(x);const E=x.currentTarget.closest("details");E&&E.removeAttribute("open")},children:"Delete"}),l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:x=>{x.preventDefault(),m();const E=x.currentTarget.closest("details");E&&E.removeAttribute("open")},children:t.collapsed?"Show":"Hide"}),t.onApply?l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:x=>{var I;x.preventDefault(),(I=t.onApply)==null||I.call(t);const E=x.currentTarget.closest("details");E&&E.removeAttribute("open")},children:"Apply to Builder"}):null,t.onCloneFromSelf?l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:x=>{var I;x.preventDefault(),(I=t.onCloneFromSelf)==null||I.call(t);const E=x.currentTarget.closest("details");E&&E.removeAttribute("open")},children:"Duplicate Branch"}):null]})]}),l.jsx(At,{type:"target",position:Me.Left}),(t==null?void 0:t.type)==="class"?l.jsx("div",{className:"nodrag nopan",onPointerDown:g,title:t.className?`Drag to extend ${t.className} levels`:"Set class to enable quick-fill",style:{position:"absolute",bottom:-8,right:-8,width:16,height:16,borderRadius:4,border:"1px solid #e2e8f0",background:"#f8fafc",color:"#0f172a",cursor:t.className?"ew-resize":"not-allowed",display:"grid",placeItems:"center",fontSize:10,boxShadow:"0 1px 2px rgba(0,0,0,0.06)",zIndex:10},children:""}):null,(t==null?void 0:t.type)==="bundle"||(t==null?void 0:t.type)==="asi"||(t==null?void 0:t.type)==="subclass"?l.jsx(At,{type:"source",id:"top",position:Me.Top,style:{background:"#0ea5e9",width:10,height:10,border:"2px solid #fff"}}):null,(t==null?void 0:t.type)==="class"?l.jsx(At,{type:"target",id:"attach",position:Me.Bottom,isValidConnection:z,style:{background:"#0ea5e9",width:10,height:10,border:"2px solid #fff"}}):null,(t==null?void 0:t.type)==="class"?l.jsx("button",{className:"nodrag nopan",onClick:x=>{var E,I,L,Y;x.preventDefault(),x.stopPropagation();try{const O=`step-${crypto.randomUUID().slice(0,6)}`,y=((I=(E=r==null?void 0:r(e))==null?void 0:E.position)==null?void 0:I.y)??0,C=((Y=(L=r==null?void 0:r(e))==null?void 0:L.position)==null?void 0:Y.x)??0,_=t.className?uh[t.className]:void 0,B=!!(t.className&&_&&Number(t.level)===_),A=!B&&!!v,j={id:O,type:"progressStep",position:{x:C,y:y+100},data:A?{level:t.level,type:"asi",ability1:null,ability2:null,asi:"",collapsed:!1}:B?{level:t.level,type:"subclass",subclass:"",collapsed:!1}:{level:t.level,type:"bundle",featureChoices:[],collapsed:!1}},D={id:`e-${crypto.randomUUID().slice(0,6)}`,source:O,sourceHandle:"top",target:e,targetHandle:"attach"},H=(a==null?void 0:a())||[];s==null||s([...H,j]);const X=(i==null?void 0:i())||[];o==null||o([...X,D])}catch{}},title:t.className&&uh[t.className]===Number(t.level)?"Attach Subclass":v?"Attach ASI":"Attach Feature Choices",style:{position:"absolute",bottom:-10,left:"50%",transform:"translateX(8px)",width:20,height:20,borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",cursor:"pointer",boxShadow:"0 1px 2px rgba(0,0,0,0.06)"},children:"+"}):null,(t==null?void 0:t.type)==="class"&&T>0?l.jsx("div",{className:"nodrag nopan",style:{position:"absolute",bottom:-4,left:"50%",transform:"translateX(10px)",background:"#0ea5e9",color:"#fff",fontSize:10,lineHeight:"14px",height:16,minWidth:16,padding:"0 4px",borderRadius:999,border:"2px solid #fff",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.08)"},title:"Attached feature choices",children:T}):null,l.jsxs(dv,{title:`Step  ${w}`,children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsxs("span",{style:{...to},children:["Type: ",t.type]}),l.jsxs("span",{style:{...to},children:["Level: ",t.level]})]})}),!t.collapsed&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Character Level"}),l.jsx("input",{type:"number",min:1,max:20,value:t.level,onChange:x=>{var E;return(E=t.onChange)==null?void 0:E.call(t,{level:Math.max(1,Math.min(20,parseInt(x.target.value||"1",10)))})},style:Lt})]}),l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Step Type"}),l.jsxs("select",{value:t.type,onChange:x=>{var E;return(E=t.onChange)==null?void 0:E.call(t,{type:x.target.value})},style:Lt,children:[l.jsx("option",{value:"class",children:"Class Level"}),l.jsx("option",{value:"feat",children:"Feat"}),l.jsx("option",{value:"asi",children:"ASI"}),l.jsx("option",{value:"bundle",children:"Feature Choices"}),l.jsx("option",{value:"note",children:"Note"})]})]}),t.type==="class"&&l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Class"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("span",{onDragOver:x=>{x.preventDefault(),d("class")},onDragLeave:()=>d(null),onDrop:x=>{var I;d(null);const E=x.dataTransfer.getData("application/x-scratch-token");if(E)try{const L=JSON.parse(E);L.type==="class"&&Qn.includes(L.value)&&((I=t.onChange)==null||I.call(t,{className:L.value}))}catch{}},style:{display:"inline-flex",alignItems:"center",minWidth:72,padding:"4px 8px",borderRadius:8,border:`2px dashed ${u==="class"?"#0ea5e9":"#cbd5e1"}`,background:u==="class"?"#e0f2fe":"#f8fafc",color:"#0f172a",fontSize:12,gap:6},children:t.className?l.jsx("span",{style:{padding:"2px 6px",borderRadius:999,background:"#e2e8f0",fontSize:12},children:t.className}):l.jsx("span",{style:{color:"#64748b"},children:"drop class here"})}),l.jsx("select",{value:t.className||"Fighter",onChange:x=>{var E;return(E=t.onChange)==null?void 0:E.call(t,{className:x.target.value})},style:Lt,children:Qn.slice().sort((x,E)=>x.localeCompare(E)).map(x=>l.jsx("option",{value:x,children:x},x))})]})]}),!1,t.type==="feat"&&l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Feats (this level)"}),l.jsx("input",{value:t.featName||"",onChange:x=>{var E;return(E=t.onChange)==null?void 0:E.call(t,{featName:x.target.value})},placeholder:"Great Weapon Master",style:Lt}),l.jsxs("div",{style:{display:"grid",gap:6},children:[(t.feats||[]).map((x,E)=>l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("input",{value:x,onChange:I=>{var Y;const L=[...t.feats||[]];L[E]=I.target.value,(Y=t.onChange)==null||Y.call(t,{feats:L})},style:Lt}),l.jsx("button",{onClick:()=>{var I;return(I=t.onChange)==null?void 0:I.call(t,{feats:(t.feats||[]).filter((L,Y)=>Y!==E)})},style:Qe,title:"Remove",children:""})]},`${E}-${x}`)),l.jsx("button",{onClick:()=>{var x;return(x=t.onChange)==null?void 0:x.call(t,{feats:[...t.feats||[],""]})},style:Qe,children:"+ Add Feat"})]})]}),t.type==="asi"&&l.jsxs("div",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"ASI (+1/+1 or +2):"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("span",{onDragOver:x=>{x.preventDefault(),d("a1")},onDragLeave:()=>d(null),onDrop:x=>{var I;d(null);const E=x.dataTransfer.getData("application/x-scratch-token");if(E)try{const L=JSON.parse(E);L.type==="ability"&&((I=t.onChange)==null||I.call(t,{ability1:L.value,asi:Mr(L.value,t.ability2)}))}catch{}},style:{display:"inline-flex",alignItems:"center",minWidth:72,padding:"4px 8px",borderRadius:8,border:`2px dashed ${u==="a1"?"#0ea5e9":"#cbd5e1"}`,background:u==="a1"?"#e0f2fe":"#f8fafc",color:"#0f172a",fontSize:12,gap:6},children:t.ability1?l.jsx("span",{style:{padding:"2px 6px",borderRadius:999,background:"#e2e8f0",fontSize:12},children:t.ability1}):l.jsx("span",{style:{color:"#64748b"},children:"drop ability"})}),l.jsx("span",{onDragOver:x=>{x.preventDefault(),d("a2")},onDragLeave:()=>d(null),onDrop:x=>{var I;d(null);const E=x.dataTransfer.getData("application/x-scratch-token");if(E)try{const L=JSON.parse(E);L.type==="ability"&&Ao.includes(L.value)&&((I=t.onChange)==null||I.call(t,{ability2:L.value,asi:Mr(t.ability1,L.value)}))}catch{}},style:{display:"inline-flex",alignItems:"center",minWidth:72,padding:"4px 8px",borderRadius:8,border:`2px dashed ${u==="a2"?"#0ea5e9":"#cbd5e1"}`,background:u==="a2"?"#e0f2fe":"#f8fafc",color:"#0f172a",fontSize:12,gap:6},children:t.ability2?l.jsx("span",{style:{padding:"2px 6px",borderRadius:999,background:"#e2e8f0",fontSize:12},children:t.ability2}):l.jsx("span",{style:{color:"#64748b"},children:"drop ability"})}),l.jsx("input",{value:t.asi||"",onChange:x=>{var E;return(E=t.onChange)==null?void 0:E.call(t,{asi:x.target.value})},placeholder:"+2 STR or +1 STR / +1 CON",style:Lt})]})]}),t.type==="bundle"&&l.jsxs("div",{style:{display:"grid",gap:10,fontSize:12,color:"#475569"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("span",{children:"Feature Choices"}),l.jsx("button",{style:Qe,onClick:()=>{var E;const x={id:`ch-${crypto.randomUUID().slice(0,6)}`,kind:"fighting-style",style:void 0};(E=t.onChange)==null||E.call(t,{featureChoices:[...t.featureChoices||[],x]})},children:"+ Add Choice"})]}),l.jsx("div",{style:{display:"grid",gap:8},children:(t.featureChoices||[]).map((x,E)=>l.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:8,padding:8,background:"#f8fafc",display:"grid",gap:8},children:[l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",justifyContent:"space-between"},children:[l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsx("span",{children:"Kind"}),l.jsxs("select",{value:x.kind,onChange:I=>{var y;const L=I.target.value,Y=L==="fighting-style"?{id:x.id,kind:L,style:void 0}:L==="skill-proficiency"?{id:x.id,kind:L,skills:[],count:2}:{id:x.id,kind:L,text:""},O=[...t.featureChoices||[]];O[E]=Y,(y=t.onChange)==null||y.call(t,{featureChoices:O})},style:Lt,children:[l.jsx("option",{value:"fighting-style",children:"Fighting Style"}),l.jsx("option",{value:"skill-proficiency",children:"Skill Proficiencies"}),l.jsx("option",{value:"other",children:"Other"})]})]}),l.jsx("button",{style:Qe,title:"Remove",onClick:()=>{var I;return(I=t.onChange)==null?void 0:I.call(t,{featureChoices:(t.featureChoices||[]).filter(L=>L.id!==x.id)})},children:""})]}),x.kind==="fighting-style"&&l.jsxs("label",{style:{display:"grid",gap:6},children:[l.jsx("span",{children:"Fighting Style"}),l.jsxs("select",{value:x.style||"",onChange:I=>{var Y;const L=[...t.featureChoices||[]];L[E]={...x,style:I.target.value},(Y=t.onChange)==null||Y.call(t,{featureChoices:L})},style:Lt,children:[l.jsx("option",{value:"",children:"Select"}),VC.map(I=>l.jsx("option",{value:I,children:I},I))]})]}),x.kind==="skill-proficiency"&&l.jsxs("div",{style:{display:"grid",gap:6},children:[l.jsxs("label",{style:{display:"grid",gap:6},children:[l.jsx("span",{children:"Choose up to"}),l.jsx("input",{type:"number",min:1,max:6,value:x.count??2,onChange:I=>{var y;const L=Math.max(1,Math.min(6,parseInt(I.target.value||"1",10))),Y=[...t.featureChoices||[]],O={...x};O.count=L,Array.isArray(O.skills)&&O.skills.length>L&&(O.skills=O.skills.slice(0,L)),Y[E]=O,(y=t.onChange)==null||y.call(t,{featureChoices:Y})},style:{...Lt,width:80}})]}),l.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:UC.map(I=>{const L=Array.isArray(x.skills)?x.skills:[],Y=x.count??2,O=L.includes(I),y=!O&&L.length>=Y;return l.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,border:"1px solid #cbd5e1",padding:"4px 8px",borderRadius:8,background:y?"#f1f5f9":"#fff",color:y?"#94a3b8":"#0f172a"},children:[l.jsx("input",{type:"checkbox",checked:O,disabled:y,onChange:C=>{var j;const _=[...t.featureChoices||[]],B={...x},A=Array.isArray(B.skills)?B.skills.slice():[];if(C.target.checked)!A.includes(I)&&A.length<Y&&A.push(I);else{const D=A.indexOf(I);D>=0&&A.splice(D,1)}B.skills=A,_[E]=B,(j=t.onChange)==null||j.call(t,{featureChoices:_})}}),l.jsx("span",{style:{fontSize:12},children:I})]},I)})})]}),x.kind==="other"&&l.jsxs("label",{style:{display:"grid",gap:6},children:[l.jsx("span",{children:"Details"}),l.jsx("input",{value:x.text||"",onChange:I=>{var Y;const L=[...t.featureChoices||[]];L[E]={...x,text:I.target.value},(Y=t.onChange)==null||Y.call(t,{featureChoices:L})},placeholder:"Describe the choice",style:Lt})]})]},x.id))})]}),t.type==="subclass"&&l.jsxs("div",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Subclass"}),l.jsx("input",{value:t.subclass||"",onChange:x=>{var E;return(E=t.onChange)==null?void 0:E.call(t,{subclass:x.target.value})},placeholder:"Champion / Battle Master / Arcane Trickster ",style:Lt})]})]})]}),(t.onApply||t.onChange,null),t.onAddChild?l.jsx("div",{style:{position:"absolute",right:-10,top:"50%",transform:"translateY(-50%)",zIndex:9},children:l.jsxs("details",{className:"nodrag nopan",style:{position:"relative"},children:[l.jsx("summary",{role:"button",style:{listStyle:"none",width:24,height:24,borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",color:"#0f172a",lineHeight:"22px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.06)"},onPointerDown:x=>{x.stopPropagation()},onMouseDown:x=>{x.stopPropagation()},onClick:x=>{x.stopPropagation()},title:"Add and connect a new step",children:"+"}),l.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",display:"flex",gap:8,background:"white",border:"1px solid #e2e8f0",borderRadius:999,padding:"4px 8px",boxShadow:"0 6px 20px rgba(0,0,0,0.08)"},onClick:x=>x.stopPropagation(),children:["class","feat","asi","bundle","subclass","note"].map(x=>l.jsx("button",{className:"nodrag nopan",style:{...Qe,padding:"4px 8px"},onClick:E=>{var L;E.preventDefault(),E.stopPropagation(),(L=t.onAddChild)==null||L.call(t,x);const I=E.currentTarget.closest("details");I&&I.hasAttribute("open")&&I.removeAttribute("open")},onPointerDown:E=>{E.stopPropagation()},onMouseDown:E=>{E.stopPropagation()},children:x},x))})]})}):null,l.jsx(At,{type:"source",position:Me.Right})]})}function Mr(e,t){return e&&t?`+1 ${e} / +1 ${t}`:e&&!t?`+2 ${e}`:!e&&t?`+2 ${t}`:""}function XC({id:e,data:t}){const{deleteElements:n}=Vn(),r=b.useCallback(d=>{d.stopPropagation(),d.preventDefault(),n({nodes:[{id:e}]})},[n,e]),i=()=>{var d;return(d=t.onChange)==null?void 0:d.call(t,{collapsed:!t.collapsed})},[s,o]=b.useState(null),[a,c]=b.useState(!1),u=t!=null&&t._active?"0 0 0 2px rgba(14,165,233,0.35), 0 6px 20px rgba(14,165,233,0.25)":"0 1px 2px rgba(0,0,0,0.06)";return l.jsxs("div",{style:{position:"relative",boxShadow:u,outline:a?"2px dashed #0ea5e9":void 0,outlineOffset:-2},onDragOver:d=>{Array.from(d.dataTransfer.types||[]).includes(On)&&(d.preventDefault(),c(!0))},onDragLeave:()=>c(!1),onDrop:d=>{var p,h,k;c(!1);const f=d.dataTransfer.getData(On);if(f)try{const S=JSON.parse(f);if(S.type==="race"&&Lu.includes(S.value)){(p=t.onChange)==null||p.call(t,{race:S.value}),d.stopPropagation();return}if(S.type==="background"&&Ou.includes(S.value)){(h=t.onChange)==null||h.call(t,{background:S.value}),d.stopPropagation();return}if((S.type==="text"||S.type==="other")&&typeof S.value=="string"){(k=t.onChange)==null||k.call(t,{other:S.value}),d.stopPropagation();return}}catch{}},children:[l.jsxs("details",{className:"nodrag nopan",style:{position:"absolute",top:4,right:4,zIndex:10},children:[l.jsx("summary",{role:"button",style:{listStyle:"none",width:24,height:24,borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",color:"#0f172a",lineHeight:"22px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.06)"},onPointerDown:d=>{d.stopPropagation()},onMouseDown:d=>{d.stopPropagation()},onClick:d=>{d.stopPropagation()},title:"Node actions",children:""}),l.jsxs("div",{style:{position:"absolute",right:0,top:28,display:"grid",gap:6,background:"white",border:"1px solid #e2e8f0",borderRadius:8,padding:8,boxShadow:"0 8px 24px rgba(0,0,0,0.12)"},onClick:d=>d.stopPropagation(),children:[l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:d=>{d.preventDefault(),r(d);const f=d.currentTarget.closest("details");f&&f.removeAttribute("open")},children:"Delete"}),l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:d=>{d.preventDefault(),i();const f=d.currentTarget.closest("details");f&&f.removeAttribute("open")},children:t.collapsed?"Show":"Hide"}),t.onClone?l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:d=>{var p;d.preventDefault(),(p=t.onClone)==null||p.call(t);const f=d.currentTarget.closest("details");f&&f.removeAttribute("open")},children:"Duplicate Branch"}):null,t.onApply?l.jsx("button",{className:"nodrag nopan",style:Qe,onClick:d=>{var p;d.preventDefault(),(p=t.onApply)==null||p.call(t);const f=d.currentTarget.closest("details");f&&f.removeAttribute("open")},children:"Apply to Builder"}):null]})]}),l.jsxs(dv,{title:"Character Start",children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[t.race?l.jsx("span",{style:to,children:t.race}):null,t.background?l.jsx("span",{style:to,children:t.background}):null,t.other?l.jsx("span",{style:to,children:t.other}):null]})}),!t.collapsed&&l.jsxs(l.Fragment,{children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Race"}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:l.jsx("span",{onDragOver:d=>{d.preventDefault(),o("race")},onDragLeave:()=>o(null),onDrop:d=>{var p;o(null);const f=d.dataTransfer.getData(On);if(f)try{const h=JSON.parse(f);h.type==="race"&&Lu.includes(h.value)&&((p=t.onChange)==null||p.call(t,{race:h.value}))}catch{}},style:{display:"inline-flex",alignItems:"center",minWidth:120,padding:"6px 10px",borderRadius:8,border:`2px dashed ${s==="race"?"#0ea5e9":"#cbd5e1"}`,background:s==="race"?"#e0f2fe":"#f8fafc",color:"#0f172a",fontSize:12,gap:6},children:t.race?l.jsx("span",{style:{padding:"2px 6px",borderRadius:999,background:"#e2e8f0",fontSize:12},children:t.race}):l.jsx("span",{style:{color:"#64748b"},children:"drop race here"})})})]}),l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Background"}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:l.jsx("span",{onDragOver:d=>{d.preventDefault(),o("background")},onDragLeave:()=>o(null),onDrop:d=>{var p;o(null);const f=d.dataTransfer.getData(On);if(f)try{const h=JSON.parse(f);h.type==="background"&&Ou.includes(h.value)&&((p=t.onChange)==null||p.call(t,{background:h.value}))}catch{}},style:{display:"inline-flex",alignItems:"center",minWidth:120,padding:"6px 10px",borderRadius:8,border:`2px dashed ${s==="background"?"#0ea5e9":"#cbd5e1"}`,background:s==="background"?"#e0f2fe":"#f8fafc",color:"#0f172a",fontSize:12,gap:6},children:t.background?l.jsx("span",{style:{padding:"2px 6px",borderRadius:999,background:"#e2e8f0",fontSize:12},children:t.background}):l.jsx("span",{style:{color:"#64748b"},children:"drop background here"})})})]}),l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Other Option"}),l.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:l.jsx("span",{onDragOver:d=>{d.preventDefault(),o("other")},onDragLeave:()=>o(null),onDrop:d=>{var p;o(null);const f=d.dataTransfer.getData(On);if(f)try{const h=JSON.parse(f);h&&(h.type==="text"||h.type==="other")&&typeof h.value=="string"&&((p=t.onChange)==null||p.call(t,{other:h.value}))}catch{}},style:{display:"inline-flex",alignItems:"center",minWidth:120,padding:"6px 10px",borderRadius:8,border:`2px dashed ${s==="other"?"#0ea5e9":"#cbd5e1"}`,background:s==="other"?"#e0f2fe":"#f8fafc",color:"#0f172a",fontSize:12,gap:6},children:t.other?l.jsx("span",{style:{padding:"2px 6px",borderRadius:999,background:"#e2e8f0",fontSize:12},children:t.other}):l.jsx("span",{style:{color:"#64748b"},children:"drop text here"})})})]})]})]}),t.onAddChild?l.jsx("div",{style:{position:"absolute",right:-10,top:"50%",transform:"translateY(-50%)",zIndex:9},children:l.jsxs("details",{className:"nodrag nopan",style:{position:"relative"},children:[l.jsx("summary",{role:"button",style:{listStyle:"none",width:24,height:24,borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",cursor:"pointer",color:"#0f172a",lineHeight:"22px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.06)"},onPointerDown:d=>{d.stopPropagation()},onMouseDown:d=>{d.stopPropagation()},onClick:d=>{d.stopPropagation()},title:"Add and connect a new step",children:"+"}),l.jsx("div",{style:{position:"absolute",left:28,top:"50%",transform:"translateY(-50%)",display:"flex",gap:8,background:"white",border:"1px solid #e2e8f0",borderRadius:999,padding:"4px 8px",boxShadow:"0 6px 20px rgba(0,0,0,0.08)"},onClick:d=>d.stopPropagation(),children:["class","feat","asi","bundle","note"].map(d=>l.jsx("button",{className:"nodrag nopan",style:{...Qe,padding:"4px 8px"},onClick:f=>{var h;f.preventDefault(),f.stopPropagation(),(h=t.onAddChild)==null||h.call(t,d);const p=f.currentTarget.closest("details");p&&p.hasAttribute("open")&&p.removeAttribute("open")},onPointerDown:f=>{f.stopPropagation()},onMouseDown:f=>{f.stopPropagation()},children:d},d))})]})}):null,l.jsx(At,{type:"source",position:Me.Right})]})}const KC={root:XC,progressStep:GC};function ii(e,t,n){var f,p,h,k,S,M,g,m,w,v,z,T,P,x,E,I,L,Y;const r=new Map(e.map(O=>[O.id,O])),i=[];let s=n,o=0;for(;s&&o<256;){o+=1;const O=t.filter(_=>_.source===s);if(!O.length)break;const y=(p=(f=O.map(_=>({e:_,n:r.get(_.target)})).filter(_=>!!_.n).sort((_,B)=>{var A,j;return(((A=_.n.position)==null?void 0:A.y)||0)-(((j=B.n.position)==null?void 0:j.y)||0)})[0])==null?void 0:f.n)==null?void 0:p.id;if(!y)break;const C=r.get(y);if(!C)break;C.type==="progressStep"&&i.push(C),s=y}if(!i.length){const O=new Set,y=[n];for(;y.length;){const C=y.pop();O.has(C)||(O.add(C),t.filter(_=>_.source===C).forEach(_=>y.push(_.target)))}i.push(...e.filter(C=>C.type==="progressStep"&&O.has(C.id))),i.sort((C,_)=>{var B,A,j,D;return(((B=C.data)==null?void 0:B.level)||0)-(((A=_.data)==null?void 0:A.level)||0)||(((j=C.position)==null?void 0:j.y)||0)-(((D=_.position)==null?void 0:D.y)||0)})}const a=r.get(n),c=new Map;for(const O of i){const y=Number(((h=O.data)==null?void 0:h.level)||0);if(!y)continue;const C=c.get(y)||{level:y,feats:[],featureChoices:[]};(k=O.data)!=null&&k.className&&(C.className=O.data.className);const _=[...Array.isArray((S=O.data)==null?void 0:S.feats)?O.data.feats.filter(B=>!!B):[],...(M=O.data)!=null&&M.featName?[O.data.featName]:[]];if(_.length&&(C.feats=[...C.feats,..._]),(g=O.data)!=null&&g.asi&&(C.asi=O.data.asi),(m=O.data)!=null&&m.ability1&&(C.ability1=O.data.ability1),(w=O.data)!=null&&w.ability2&&(C.ability2=O.data.ability2),Array.isArray((v=O.data)==null?void 0:v.featureChoices)&&O.data.featureChoices.length&&(C.featureChoices=[...C.featureChoices||[],...O.data.featureChoices]),((z=O.data)==null?void 0:z.type)==="class"){const B=t.filter(A=>A.target===O.id&&(A==null?void 0:A.targetHandle)==="attach");for(const A of B){const j=r.get(A.source);if(!(!j||j.type!=="progressStep"))if(((T=j.data)==null?void 0:T.type)==="bundle"&&Array.isArray((P=j.data)==null?void 0:P.featureChoices))C.featureChoices=[...C.featureChoices||[],...j.data.featureChoices];else if(((x=j.data)==null?void 0:x.type)==="asi"){const D=j.data.asi||Mr(j.data.ability1,j.data.ability2);!C.asi&&D&&(C.asi=D),!C.ability1&&j.data.ability1&&(C.ability1=j.data.ability1),!C.ability2&&j.data.ability2&&(C.ability2=j.data.ability2)}else((E=j.data)==null?void 0:E.type)==="subclass"&&(C.subclass||(C.subclass=j.data.subclass||""))}if(Array.isArray(C.featureChoices)){const A=new Set;C.featureChoices=C.featureChoices.filter(j=>{const D=j&&typeof j=="object"&&j.id?String(j.id):JSON.stringify(j);return A.has(D)?!1:(A.add(D),!0)})}}typeof((I=O.data)==null?void 0:I.notes)=="string"&&O.data.notes&&!C.notes&&(C.notes=O.data.notes),c.set(y,C)}const u=Array.from(c.values()).sort((O,y)=>O.level-y.level);return{race:(L=a==null?void 0:a.data)==null?void 0:L.race,background:(Y=a==null?void 0:a.data)==null?void 0:Y.background,levels:u}}function hl(e,t,n){var k,S,M,g,m,w,v,z,T,P,x,E,I,L,Y,O,y,C,_,B;const r=new Map(e.map(A=>[A.id,A]));let i=n,s=0,o;const a=[];for(;i&&s<256;){s+=1;const A=t.filter(H=>H.target===i);if(!A.length)break;const j=(S=(k=A.map(H=>({e:H,n:r.get(H.source)})).filter(H=>!!H.n).sort((H,X)=>{var oe,Z;return(((oe=H.n.position)==null?void 0:oe.y)||0)-(((Z=X.n.position)==null?void 0:Z.y)||0)})[0])==null?void 0:k.n)==null?void 0:S.id;if(!j)break;const D=r.get(j);if(!D)break;if(D.type==="root"){o=D.id;break}D.type==="progressStep"&&a.push(D),i=D.id}const c=o?r.get(o):void 0,u=[];for(i=n,s=0;i&&s<256;){s+=1;const A=r.get(i);A&&A.type==="progressStep"&&u.push(A);const j=t.filter(H=>H.source===i);if(!j.length)break;const D=(g=(M=j.map(H=>({e:H,n:r.get(H.target)})).filter(H=>!!H.n).sort((H,X)=>{var oe,Z;return(((oe=H.n.position)==null?void 0:oe.y)||0)-(((Z=X.n.position)==null?void 0:Z.y)||0)})[0])==null?void 0:M.n)==null?void 0:g.id;if(!D)break;i=D}const d=[...a.reverse(),...u],f=new Map;for(const A of d){const j=Number(((m=A.data)==null?void 0:m.level)||0);if(!j)continue;const D=f.get(j)||{level:j,feats:[],featureChoices:[]};(w=A.data)!=null&&w.className&&(D.className=A.data.className);const H=[...Array.isArray((v=A.data)==null?void 0:v.feats)?A.data.feats.filter(X=>!!X):[],...(z=A.data)!=null&&z.featName?[A.data.featName]:[]];if(H.length&&(D.feats=[...D.feats,...H]),(T=A.data)!=null&&T.asi&&(D.asi=A.data.asi),(P=A.data)!=null&&P.ability1&&(D.ability1=A.data.ability1),(x=A.data)!=null&&x.ability2&&(D.ability2=A.data.ability2),Array.isArray((E=A.data)==null?void 0:E.featureChoices)&&A.data.featureChoices.length&&(D.featureChoices=[...D.featureChoices||[],...A.data.featureChoices]),((I=A.data)==null?void 0:I.type)==="class"){const X=t.filter(oe=>oe.target===A.id&&(oe==null?void 0:oe.targetHandle)==="attach");for(const oe of X){const Z=r.get(oe.source);if(!(!Z||Z.type!=="progressStep"))if(((L=Z.data)==null?void 0:L.type)==="bundle"&&Array.isArray((Y=Z.data)==null?void 0:Y.featureChoices))D.featureChoices=[...D.featureChoices||[],...Z.data.featureChoices];else if(((O=Z.data)==null?void 0:O.type)==="asi"){const we=Z.data.asi||Mr(Z.data.ability1,Z.data.ability2);!D.asi&&we&&(D.asi=we),!D.ability1&&Z.data.ability1&&(D.ability1=Z.data.ability1),!D.ability2&&Z.data.ability2&&(D.ability2=Z.data.ability2)}else((y=Z.data)==null?void 0:y.type)==="subclass"&&(D.subclass||(D.subclass=Z.data.subclass||""))}if(Array.isArray(D.featureChoices)){const oe=new Set;D.featureChoices=D.featureChoices.filter(Z=>{const we=Z&&typeof Z=="object"&&Z.id?String(Z.id):JSON.stringify(Z);return oe.has(we)?!1:(oe.add(we),!0)})}}typeof((C=A.data)==null?void 0:C.notes)=="string"&&A.data.notes&&!D.notes&&(D.notes=A.data.notes),f.set(j,D)}const p=Array.from(f.values()).sort((A,j)=>A.level-j.level);return{race:(_=c==null?void 0:c.data)==null?void 0:_.race,background:(B=c==null?void 0:c.data)==null?void 0:B.background,levels:p}}function JC(e){const t=U.useMemo(()=>e.nodes.filter(s=>s.type==="root"),[e.nodes]),[n,r]=U.useState(()=>{var s;return(s=t[0])==null?void 0:s.id});U.useEffect(()=>{var s;!n&&((s=t[0])!=null&&s.id)&&r(t[0].id)},[t,n]);const i=b.useCallback(()=>n?ii(e.nodes,e.edges,n):null,[e.nodes,e.edges,n]);return l.jsxs("div",{style:{padding:12,display:"grid",gap:10},children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Select Root"}),l.jsx("select",{value:n||"",onChange:s=>r(s.target.value||void 0),style:Lt,children:t.map(s=>{var o,a;return l.jsxs("option",{value:s.id,children:[((o=s.data)==null?void 0:o.race)||"Race","  ",((a=s.data)==null?void 0:a.background)||"Background"," (",s.id.slice(0,6),")"]},s.id)})})]}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.jsx("button",{disabled:!n,onClick:()=>n&&e.onClone(n),style:Qe,children:"Duplicate Branch"}),l.jsx("button",{onClick:()=>{var s;return(s=e.onCreateRoot)==null?void 0:s.call(e)},style:Qe,children:"+ New Root"}),l.jsx("button",{disabled:!n,onClick:()=>{const s=i();s&&e.onApplyPlan&&e.onApplyPlan(s)},style:Qe,children:"Apply to Builder"})]})]})}function QC(e){var ot,nt,ae,rt;const[t,n,r]=tv([]),[i,s,o]=nv([]),[a,c]=b.useState(void 0),u=b.useRef(!1),d=b.useRef(!1),f="progressionPlanner.v1",p=b.useMemo(()=>{var F;return`${f}:${((F=e.character)==null?void 0:F.name)||"default"}`},[(ot=e.character)==null?void 0:ot.name]),h="progressionPlanner.reseedDismissed.v1",k=b.useMemo(()=>{var F;return`${h}:${((F=e.character)==null?void 0:F.name)||"default"}`},[(nt=e.character)==null?void 0:nt.name]),S="progressionPlanner.activeRoot.v1",M=b.useMemo(()=>{var F;return`${S}:${((F=e.character)==null?void 0:F.name)||"default"}`},[(ae=e.character)==null?void 0:ae.name]),g="progressionPlanner.activePlan.v1",m=b.useMemo(()=>{var F;return`${g}:${((F=e.character)==null?void 0:F.name)||"default"}`},[(rt=e.character)==null?void 0:rt.name]),w=b.useCallback((F,K,W)=>{const V=new Map(F.map(re=>[re.id,re])),ie=new Set;if(W&&V.has(W)){const re=[W];for(;re.length;){const xe=re.pop();ie.has(xe)||(ie.add(xe),K.filter(le=>le.source===xe).forEach(le=>re.push(le.target)))}}return{active:ie}},[]),v=b.useCallback(F=>{n(K=>{const{active:W}=w(K,i,F);return K.map(V=>({...V,data:{...V.data,_active:W.has(V.id)}}))})},[i,n,w]),z=b.useCallback((F,K)=>{var Ye,Ne;if(!F)return null;const W=(K==null?void 0:K.totalLevel)??F.classes.reduce((me,Le)=>me+(Le.level||0),0),V={};let ie=1;if(F.classes.forEach(me=>{for(let Le=0;Le<(me.level||0);Le+=1){const Ve=me.klass.name,Je=Qn.includes(Ve)?Ve:"Fighter";V[ie]=Je,ie+=1}}),Object.keys(V).length===0&&W>0)for(let me=1;me<=W;me++)V[me]="Fighter";const re=[4,8,12,16,19],xe=F.feats||[],le=`root-${crypto.randomUUID().slice(0,6)}`,ge=[{id:le,type:"root",position:{x:40,y:120},data:{race:(Ye=F.race)==null?void 0:Ye.name,background:(Ne=F.background)==null?void 0:Ne.name,collapsed:!0}}],Be=[];let De=le,$e=0;for(let me=1;me<=Math.max(1,W||1);me+=1){const Le=`step-${crypto.randomUUID().slice(0,6)}`,Ve={level:me,type:"class",className:V[me]||"Fighter",collapsed:!0},Je={id:Le,type:"progressStep",position:{x:360,y:80+$e*120},data:Ve};if(ge.push(Je),Be.push({id:`e-${crypto.randomUUID().slice(0,6)}`,source:De,target:Le}),De=Le,$e+=1,re.includes(me)){const lt=`step-${crypto.randomUUID().slice(0,6)}`,ct=[];if(xe.length){const jt=xe.shift();jt&&ct.push(jt)}const xt={level:me,type:"asi",asi:"",ability1:null,ability2:null,feats:ct,collapsed:!0},ht={id:lt,type:"progressStep",position:{x:360,y:80+$e*120},data:xt};ge.push(ht),Be.push({id:`e-${crypto.randomUUID().slice(0,6)}`,source:De,target:lt}),De=lt,$e+=1}}return{nodes:ge,edges:Be}},[]),T=b.useMemo(()=>{var V,ie,re;const F=e.character;if(!F)return null;const K=((V=e.derived)==null?void 0:V.totalLevel)??F.classes.reduce((xe,le)=>xe+(le.level||0),0),W=[];if(F.classes.forEach(xe=>{var ge;const le=((ge=xe.klass)==null?void 0:ge.name)||"",ne=xe.level||0;for(let Be=0;Be<ne;Be+=1)W.push(le)}),W.length===0&&K>0)for(let xe=0;xe<K;xe+=1)W.push("Fighter");return JSON.stringify({race:((ie=F.race)==null?void 0:ie.name)||"",background:((re=F.background)==null?void 0:re.name)||"",classes:W})},[e.character,e.derived]),P=b.useMemo(()=>{var V,ie,re,xe;const F=new Map(t.map(le=>[le.id,le])),K=t.filter(le=>le.type==="root"),W=[];for(const le of K){const ne=[];let ge=le.id,Be=0;for(;ge&&Be<256;){Be+=1;const $e=i.filter(me=>me.source===ge);if(!$e.length)break;const Ye=(ie=(V=$e.map(me=>({e:me,n:F.get(me.target)})).filter(me=>!!me.n).sort((me,Le)=>{var Ve,Je;return(((Ve=me.n.position)==null?void 0:Ve.y)||0)-(((Je=Le.n.position)==null?void 0:Je.y)||0)})[0])==null?void 0:V.n)==null?void 0:ie.id;if(!Ye)break;const Ne=F.get(Ye);if(!Ne)break;Ne.type==="progressStep"&&ne.push(Ne),ge=Ye}if(!ne.length){const $e=new Set,Ye=[le.id];for(;Ye.length;){const Ne=Ye.pop();$e.has(Ne)||($e.add(Ne),i.filter(me=>me.source===Ne).forEach(me=>Ye.push(me.target)))}ne.push(...t.filter(Ne=>Ne.type==="progressStep"&&$e.has(Ne.id))),ne.sort((Ne,me)=>{var Le,Ve,Je,dt;return(((Le=Ne.data)==null?void 0:Le.level)||0)-(((Ve=me.data)==null?void 0:Ve.level)||0)||(((Je=Ne.position)==null?void 0:Je.y)||0)-(((dt=me.position)==null?void 0:dt.y)||0)})}const De=ne.slice().filter($e=>{var Ye,Ne;return((Ye=$e==null?void 0:$e.data)==null?void 0:Ye.type)==="class"&&!!((Ne=$e==null?void 0:$e.data)!=null&&Ne.className)}).sort(($e,Ye)=>{var Ne,me,Le,Ve;return(((Ne=$e.data)==null?void 0:Ne.level)||0)-(((me=Ye.data)==null?void 0:me.level)||0)||(((Le=$e.position)==null?void 0:Le.y)||0)-(((Ve=Ye.position)==null?void 0:Ve.y)||0)}).map($e=>$e.data.className);W.push(JSON.stringify({race:((re=le.data)==null?void 0:re.race)||"",background:((xe=le.data)==null?void 0:xe.background)||"",classes:De}))}return W},[t,i]),[x,E]=b.useState(!1);U.useEffect(()=>{if(!T){E(!1);return}const F=localStorage.getItem(k),K=P.includes(T);E(!K&&F!==T)},[T,P,k]);const I=b.useCallback(()=>{T&&localStorage.setItem(k,T),E(!1)},[T,k]);U.useEffect(()=>{var K;if(u.current)return;try{const W=localStorage.getItem(p),V=localStorage.getItem(M)||void 0;if(W){const ie=JSON.parse(W);if(ie&&Array.isArray(ie.nodes)&&Array.isArray(ie.edges)){const re=ie.nodes.map(xe=>{const le={...xe.data};return le.onChange=ne=>ke(xe.id,ne),le.onDelete=ne=>$(ne),xe.type==="root"&&(le.onClone=()=>je(xe.id)),le.onAddChild=ne=>ce(xe.id,ne),{...xe,data:le}});n(re),s(ie.edges),u.current=!0,d.current=!0,c(V),v(V);return}}}catch{}const F=z(e.character,e.derived);if(F){const W=F.nodes.map(ie=>{const re={...ie.data};return re.onChange=xe=>ke(ie.id,xe),re.onDelete=xe=>$(xe),ie.type==="root"&&(re.onClone=()=>je(ie.id)),re.onAddChild=xe=>ce(ie.id,xe),{...ie,data:re}});n(W),s(F.edges),u.current=!0;const V=(K=W.find(ie=>ie.type==="root"))==null?void 0:K.id;V&&(c(V),localStorage.setItem(M,V),v(V))}else{const W=`root-${crypto.randomUUID().slice(0,6)}`,V=`step-${crypto.randomUUID().slice(0,6)}`,ie=[{id:W,type:"root",position:{x:40,y:160},data:{race:"",background:"",collapsed:!0}},{id:V,type:"progressStep",position:{x:360,y:120},data:{level:1,type:"class",className:"Fighter",collapsed:!0}}];ie.forEach(re=>{const xe={...re.data};xe.onChange=le=>ke(re.id,le),xe.onDelete=le=>$(le),re.type==="root"&&(xe.onClone=()=>je(re.id)),xe.onAddChild=le=>ce(re.id,le),re.data=xe}),n(ie),s([{id:`e-${crypto.randomUUID().slice(0,6)}`,source:W,target:V}]),u.current=!0,c(W),localStorage.setItem(M,W),v(W)}},[e.character,e.derived]),U.useEffect(()=>{if(u.current)try{const K={nodes:t.map(W=>{const V={...W.data};return V&&(delete V.onChange,delete V.onDelete,delete V.onClone,delete V.onApply,delete V.onAddChild,delete V._active),{id:W.id,type:W.type,position:W.position,data:V}}),edges:i};localStorage.setItem(p,JSON.stringify(K))}catch{}},[t,i,p]),U.useEffect(()=>{v(a)},[a,t.length,i.length,v]),U.useEffect(()=>{var F;if(u.current)try{const K=t.filter(re=>re.type==="root"),W=a||((F=K[0])==null?void 0:F.id);if(!W){localStorage.removeItem(m);return}const ie={plan:ii(t,i,W),ts:Date.now()};localStorage.setItem(m,JSON.stringify(ie))}catch{}},[t,i,a,m]);const[L,Y]=b.useState([]),[O,y]=b.useState(""),C=b.useCallback(F=>{const K=`sb-${crypto.randomUUID().slice(0,6)}`,W=F==="class"?{id:K,kind:F,level:1,className:"Fighter"}:F==="feat"?{id:K,kind:F,level:1,featName:""}:F==="asi"?{id:K,kind:F,level:4,ability1:null,ability2:null}:{id:K,kind:"note",level:1,text:""};Y(V=>[...V,W])},[]),_=b.useCallback((F,K)=>{Y(W=>W.map(V=>V.id===F?{...V,...K}:V))},[]),B=b.useCallback(F=>Y(K=>K.filter(W=>W.id!==F)),[]),A=b.useCallback((F,K)=>{Y(W=>{const V=W.findIndex(le=>le.id===F);if(V<0)return W;const ie=Math.max(0,Math.min(W.length-1,V+K));if(ie===V)return W;const re=W.slice(),[xe]=re.splice(V,1);return re.splice(ie,0,xe),re})},[]),j=b.useRef({past:[],future:[],suppress:!1,lastTs:0}),D=b.useCallback(()=>{if(j.current.suppress)return;const F=Date.now();if(F-j.current.lastTs<50)return;j.current.lastTs=F;const K=JSON.parse(JSON.stringify(t)),W=JSON.parse(JSON.stringify(i));j.current.past.push({nodes:K,edges:W}),j.current.future=[]},[t,i]),H=b.useCallback(()=>{const{past:F,future:K}=j.current;if(F.length===0)return;const W={nodes:JSON.parse(JSON.stringify(t)),edges:JSON.parse(JSON.stringify(i))},V=F.pop();K.push(W),j.current.suppress=!0,n(V.nodes),s(V.edges),j.current.suppress=!1},[t,i,n,s]),X=b.useCallback(()=>{const{past:F,future:K}=j.current;if(K.length===0)return;const W={nodes:JSON.parse(JSON.stringify(t)),edges:JSON.parse(JSON.stringify(i))},V=K.pop();F.push(W),j.current.suppress=!0,n(V.nodes),s(V.edges),j.current.suppress=!1},[t,i,n,s]);U.useEffect(()=>{const F=K=>{const W=K.ctrlKey||K.metaKey,V=K.key.toLowerCase();if(W&&V==="z"&&!K.shiftKey)K.preventDefault(),H();else if(W&&V==="y"||W&&V==="z"&&K.shiftKey)K.preventDefault(),X();else if(K.shiftKey&&K.key==="Delete"){const ie=K.target;if(!!(ie&&(ie.tagName==="INPUT"||ie.tagName==="TEXTAREA"||ie.isContentEditable)))return;K.preventDefault();const xe=t.filter(ne=>ne==null?void 0:ne.selected).map(ne=>ne.id),le=i.filter(ne=>ne==null?void 0:ne.selected).map(ne=>ne.id);if(xe.length===0&&le.length===0)return;D(),n(ne=>ne.filter(ge=>!xe.includes(ge.id))),s(ne=>ne.filter(ge=>!le.includes(ge.id)&&!xe.includes(ge.source)&&!xe.includes(ge.target)))}};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[H,X,t,i,D,n,s]);const oe=b.useCallback(F=>{D(),r(F)},[D,r]),Z=b.useCallback(F=>{D(),o(F)},[D,o]),we=b.useCallback(F=>{D(),s(K=>Xd(F,K))},[D,s]),ke=b.useCallback((F,K)=>{D(),n(W=>W.map(V=>V.id===F?{...V,data:{...V.data,...K}}:V))},[D,n]),$=b.useCallback(F=>{D(),n(K=>K.filter(W=>W.id!==F)),s(K=>K.filter(W=>W.source!==F&&W.target!==F))},[n,s]),fe=b.useCallback(()=>{const F=Ne=>{var Ve,Je;const me=Ne.height||((Ve=Ne.measured)==null?void 0:Ve.height);if(typeof me=="number"&&me>0)return me;const Le=!!((Je=Ne.data)!=null&&Je.collapsed);return Ne.type==="root"?Le?120:240:Le?140:560},K=new Map(t.map(Ne=>[Ne.id,Ne])),W=Ne=>{var Ve,Je;let me=Ne,Le=0;for(;me&&Le<256;){Le+=1;const dt=i.filter(xt=>xt.target===me);if(!dt.length)break;const lt=(Je=(Ve=dt.map(xt=>({e:xt,n:K.get(xt.source)})).filter(xt=>!!xt.n).sort((xt,ht)=>{var jt,Wt;return(((jt=xt.n.position)==null?void 0:jt.y)||0)-(((Wt=ht.n.position)==null?void 0:Wt.y)||0)})[0])==null?void 0:Ve.n)==null?void 0:Je.id;if(!lt)break;const ct=K.get(lt);if(!ct)break;if(ct.type==="root")return ct.id;me=ct.id}},V=new Map,ie=Ne=>Ne.type==="root"?Ne.id:W(Ne.id)||`ungrouped-${Ne.id}`;t.forEach(Ne=>{const me=ie(Ne),Le=V.get(me)||[];Le.push(Ne),V.set(me,Le)});const re=360,xe=24,le=40,ne=60,ge=520,Be={},De=[];Array.from(V.entries()).forEach(([Ne,me],Le)=>{var Kt,ut,Ut;const Ve=new Set(me.map(R=>R.id)),Je={};me.forEach(R=>{Je[R.id]=0}),i.forEach(R=>{Ve.has(R.target)&&Ve.has(R.source)&&(Je[R.target]=(Je[R.target]||0)+1)});const dt={};me.forEach(R=>{dt[R.id]=(Je[R.id],0)});for(let R=0;R<me.length;R+=1){let N=!1;for(const ee of i){if(!Ve.has(ee.source)||!Ve.has(ee.target))continue;const se=(dt[ee.source]??0)+1;(dt[ee.target]??0)<se&&(dt[ee.target]=se,N=!0)}if(!N)break}const lt={};me.forEach(R=>{const N=dt[R.id]??0;lt[N]||(lt[N]=[]),lt[N].push(R)});const ct=me.find(R=>R.type==="root"),xt=((Kt=ct==null?void 0:ct.position)==null?void 0:Kt.x)??le+Le*ge,ht={};let jt=Number.POSITIVE_INFINITY,Wt=Number.NEGATIVE_INFINITY,un=Number.POSITIVE_INFINITY,tn=Number.NEGATIVE_INFINITY;Object.keys(lt).map(R=>parseInt(R,10)).sort((R,N)=>R-N).forEach((R,N)=>{const ee=lt[R];ee.sort((Se,Ae)=>{var qe,it;const Ie=typeof((qe=Se.data)==null?void 0:qe.level)=="number"?Se.data.level:Number.MAX_SAFE_INTEGER,Oe=typeof((it=Ae.data)==null?void 0:it.level)=="number"?Ae.data.level:Number.MAX_SAFE_INTEGER;return Ie!==Oe?Ie-Oe:Se.type!==Ae.type?String(Se.type).localeCompare(String(Ae.type)):String(Se.id).localeCompare(String(Ae.id))});let se=ne;ee.forEach(Se=>{const Ae=xt+N*re;ht[Se.id]={x:Ae,y:se},jt=Math.min(jt,Ae),Wt=Math.max(Wt,Ae),un=Math.min(un,se),tn=Math.max(tn,se+F(Se)),se+=F(Se)+xe})}),De.push({key:Ne,positions:ht,minX:jt,maxX:Wt,minY:un,maxY:tn,rootX:((ut=ct==null?void 0:ct.position)==null?void 0:ut.x)??le+Le*ge,rootY:((Ut=ct==null?void 0:ct.position)==null?void 0:Ut.y)??ne})}),De.sort((Ne,me)=>Ne.rootY-me.rootY);let $e=ne;const Ye=120;for(const Ne of De){const me=Math.max(0,Ne.maxY-Ne.minY),Le=$e-Ne.minY;Object.keys(Ne.positions).forEach(Ve=>{Ne.positions[Ve].y+=Le}),$e+=me+Ye,Object.assign(Be,Ne.positions)}D(),n(Ne=>Ne.map(me=>({...me,position:Be[me.id]?Be[me.id]:me.position})))},[t,i,n,D]),ce=b.useCallback((F,K)=>{var Ve,Je,dt,lt,ct,xt,ht,jt,Wt,un,tn,dn,Kt;const W=new Map(t.map(ut=>[ut.id,ut])),V=W.get(F);if(!V)return;let ie=F,re=0,xe;for(;ie&&re<256;){re+=1;const ut=W.get(ie);ut&&ut.type==="progressStep"&&(xe=ut);const Ut=i.filter(N=>N.source===ie);if(!Ut.length)break;const R=(Je=(Ve=Ut.map(N=>({e:N,n:W.get(N.target)})).filter(N=>!!N.n).sort((N,ee)=>{var se,Se;return(((se=N.n.position)==null?void 0:se.y)||0)-(((Se=ee.n.position)==null?void 0:Se.y)||0)})[0])==null?void 0:Ve.n)==null?void 0:Je.id;if(!R)break;ie=R}let le=1,ne="Fighter";if(xe)le=Math.min(20,(Number((dt=xe.data)==null?void 0:dt.level)||0)+1),ne=(lt=xe.data)!=null&&lt.className&&Qn.includes(xe.data.className)?xe.data.className:"Fighter";else if(V.type==="progressStep")le=Math.min(20,(Number((ct=V.data)==null?void 0:ct.level)||0)+1),ne=(xt=V.data)!=null&&xt.className&&Qn.includes(V.data.className)?V.data.className:"Fighter";else{const ut=(un=(Wt=(jt=(ht=e.character)==null?void 0:ht.classes)==null?void 0:jt[0])==null?void 0:Wt.klass)==null?void 0:un.name;ne=ut&&Qn.includes(ut)?ut:"Fighter",le=1}const ge=`step-${crypto.randomUUID().slice(0,6)}`,Be=V.position||{x:0,y:0},De=i.filter(ut=>ut.source===F).length,$e={x:(Be.x||0)+320,y:(Be.y||0)+De*140},Ye=K||"class",Ne={level:le,type:Ye,collapsed:!1};let me=Ne;Ye==="class"?me={...Ne,className:ne,type:Ye}:Ye==="feat"?me={...Ne,featName:"",feats:[]}:Ye==="asi"?me={...Ne,asi:"",ability1:null,ability2:null}:Ye==="bundle"?me={...Ne,featureChoices:[]}:Ye==="subclass"?me={...Ne,type:"subclass",subclass:""}:Ye==="note"&&(me={...Ne,notes:""}),D(),n(ut=>{const Ut={id:ge,type:"progressStep",position:$e,data:{...me}};return Ut.data.onChange=R=>ke(ge,R),Ut.data.onDelete=R=>$(R),Ut.data.onAddChild=R=>ce(ge,R),[...ut,Ut]});const Le=((tn=W.get(F))==null?void 0:tn.type)==="progressStep"&&((Kt=(dn=W.get(F))==null?void 0:dn.data)==null?void 0:Kt.type)==="class";s(Le&&(Ye==="bundle"||Ye==="asi"||Ye==="subclass")?ut=>[...ut,{id:`e-${crypto.randomUUID().slice(0,6)}`,source:ge,sourceHandle:"top",target:F,targetHandle:"attach"}]:ut=>[...ut,{id:`e-${crypto.randomUUID().slice(0,6)}`,source:F,target:ge}]),setTimeout(()=>{try{fe()}catch{}},0)},[t,i,e.character,n,s,D,ke,$,fe]),ve=b.useCallback(()=>{D(),n(F=>F.map(K=>({...K,data:{...K.data,collapsed:!0}})))},[D,n]),Pe=b.useCallback(()=>{D(),n(F=>F.map(K=>({...K,data:{...K.data,collapsed:!1}})))},[D,n]),te=b.useCallback(()=>{if(window.confirm("Reset planner? This will clear all nodes and edges for this character. This cannot be undone except via Ctrl+Z in this session.")){D(),n([]),s([]),c(void 0);try{localStorage.removeItem(p),localStorage.removeItem(M),localStorage.removeItem(m)}catch{}v(void 0)}},[D,n,s,p,M,m,v]),je=b.useCallback(F=>{const K=new Map(t.map(ne=>[ne.id,ne]));if(!K.get(F)||K.get(F).type!=="root")return;const W=new Set,V=[F];for(;V.length;){const ne=V.pop();if(W.has(ne))continue;W.add(ne),i.filter(Be=>Be.source===ne).map(Be=>Be.target).forEach(Be=>V.push(Be))}const ie=new Map,re=420,xe=[];Array.from(W).forEach(ne=>{var De,$e;const ge=K.get(ne),Be=`${ge.type}-${crypto.randomUUID().slice(0,6)}`;ie.set(ne,Be),xe.push({id:Be,type:ge.type,position:{x:(((De=ge.position)==null?void 0:De.x)||0)+re,y:(($e=ge.position)==null?void 0:$e.y)||0},data:{...ge.data}})});const le=i.filter(ne=>W.has(ne.source)&&W.has(ne.target)).map((ne,ge)=>({id:`clone-${crypto.randomUUID().slice(0,6)}-${ge}`,source:ie.get(ne.source),target:ie.get(ne.target)}));D(),n(ne=>[...ne,...xe]),s(ne=>[...ne,...le])},[t,i,n,s,D]);U.useEffect(()=>{n(F=>F.map(K=>{const W={...K.data};return W.onChange||(W.onChange=V=>ke(K.id,V)),W.onDelete||(W.onDelete=V=>$(V)),K.type==="root"&&!W.onClone&&(W.onClone=()=>je(K.id)),K.type==="root"&&!W.onApply&&(W.onApply=()=>{const V=a||K.id,ie=ii(F,i,V);ie&&e.onApplyPlan&&e.onApplyPlan(ie)}),K.type==="progressStep"&&!W.onApply&&(W.onApply=()=>{const V=hl(F,i,K.id);V&&e.onApplyPlan&&e.onApplyPlan(V)}),W.onAddChild=V=>ce(K.id,V),K.type==="progressStep"&&(W.onCloneFromSelf=()=>{var le,ne;let V=K.id,ie=0;const re=new Map(F.map(ge=>[ge.id,ge]));let xe;for(;V&&ie<256;){ie+=1;const ge=i.filter($e=>$e.target===V);if(!ge.length)break;const Be=(ne=(le=ge.map($e=>({e:$e,nn:re.get($e.source)})).filter($e=>!!$e.nn).sort(($e,Ye)=>{var Ne,me;return(((Ne=$e.nn.position)==null?void 0:Ne.y)||0)-(((me=Ye.nn.position)==null?void 0:me.y)||0)})[0])==null?void 0:le.nn)==null?void 0:ne.id;if(!Be)break;const De=re.get(Be);if(!De)break;if(De.type==="root"){xe=De.id;break}V=De.id}xe&&je(xe)}),{...K,data:W}}))},[ke,je,i,e.onApplyPlan,ce,n]);const _e=b.useCallback(()=>{if(!L.length)return;D();const F=40+Math.random()*40,K=`root-${crypto.randomUUID().slice(0,6)}`,W={id:K,type:"root",position:{x:40,y:F+40},data:{race:"",background:""}};W.data.onChange=le=>ke(K,le),W.data.onDelete=le=>$(le),W.data.onClone=()=>je(K),W.data.onApply=()=>{const le=ii(t,i,K);le&&e.onApplyPlan&&e.onApplyPlan(le)},W.data.onAddChild=le=>ce(K,le);let V=K,ie=0;const re=[W],xe=[];L.sort((le,ne)=>le.level-ne.level).forEach(le=>{const ne=`sbnode-${crypto.randomUUID().slice(0,6)}`,ge=le.kind==="class"?{level:le.level,type:"class",className:le.className||"Fighter"}:le.kind==="feat"?{level:le.level,type:"feat",featName:le.featName||""}:le.kind==="asi"?{level:le.level,type:"asi",asi:[le.ability1,le.ability2].filter(Boolean).join(" / ")||""}:{level:le.level,type:"note",notes:le.text||""},Be={id:ne,type:"progressStep",position:{x:360,y:F+ie*160},data:{...ge}};Be.data.onChange=De=>ke(ne,De),Be.data.onDelete=De=>$(De),Be.data.onApply=()=>{const De=hl(t,i,ne);De&&e.onApplyPlan&&e.onApplyPlan(De)},Be.data.onAddChild=De=>ce(ne,De),re.push(Be),xe.push({id:`e-${crypto.randomUUID().slice(0,6)}`,source:V,target:ne}),V=ne,ie+=1}),n(le=>[...le,...re]),s(le=>[...le,...xe])},[L,n,s,D,ke,$,je]),Ee=F=>{const K=`${F}-${crypto.randomUUID().slice(0,6)}`,W=40,V=120,ie=160;let re=F==="root"?W:360,xe=F==="root"?V:40+Math.random()*720;if(F==="root"){const ne=t.filter(ge=>ge.type==="root");ne.length>0&&(xe=Math.max(...ne.map(Be=>{var De;return Number(((De=Be.position)==null?void 0:De.y)??V)}))+ie)}const le={id:K,type:F,position:{x:re,y:xe},data:{}};F==="progressStep"&&Object.assign(le.data,{level:1,type:"class",className:"Fighter",collapsed:!1}),F==="root"&&Object.assign(le.data,{race:"",background:"",collapsed:!1}),le.data.onChange=ne=>ke(K,ne),le.data.onDelete=ne=>$(ne),le.data.onAddChild=ne=>ce(K,ne),F==="root"&&(le.data.onClone=()=>je(K),le.data.onApply=()=>{const ne=ii(t,i,K);ne&&e.onApplyPlan&&e.onApplyPlan(ne)}),D(),n(ne=>[...ne,le])};return l.jsxs("div",{className:"w-full",style:{display:"grid",gridTemplateColumns:"1fr 360px",gap:16,height:"calc(100vh - 100px)"},children:[l.jsxs("div",{style:{height:"100%",border:"1px solid #e2e8f0",borderRadius:12,overflow:"hidden",background:"white",position:"relative"},children:[l.jsxs("div",{style:{position:"absolute",top:8,right:8,display:"flex",gap:6,zIndex:20},children:[l.jsx("button",{onClick:H,style:{...Qe,padding:6,width:32,height:32},title:"Undo",children:""}),l.jsx("button",{onClick:X,style:{...Qe,padding:6,width:32,height:32},title:"Redo",children:""}),l.jsx("button",{onClick:Pe,style:Qe,title:"Expand all nodes",children:"Expand"}),l.jsx("button",{onClick:ve,style:Qe,title:"Collapse all nodes",children:"Collapse"}),l.jsx("button",{onClick:fe,style:Qe,title:"Auto-arrange nodes",children:"Arrange"}),l.jsx("button",{onClick:()=>{var W;const F=z(e.character,e.derived);if(!F)return;D(),n(F.nodes.map(V=>{const ie={...V.data,onChange:re=>ke(V.id,re),onDelete:re=>$(re)};return V.type==="root"&&(ie.onClone=()=>je(V.id),ie.onApply=()=>{const re=ii(F.nodes,F.edges,V.id);re&&e.onApplyPlan&&e.onApplyPlan(re)}),V.type==="progressStep"&&(ie.onApply=()=>{const re=hl(F.nodes,F.edges,V.id);re&&e.onApplyPlan&&e.onApplyPlan(re)}),ie.onAddChild=re=>ce(V.id,re),{...V,data:ie}})),s(F.edges);const K=(W=F.nodes.find(V=>V.type==="root"))==null?void 0:W.id;K&&(c(K),localStorage.setItem(M,K),v(K)),setTimeout(()=>{try{fe()}catch{}},0)},style:Qe,title:"Reseed from Builder",children:"Reseed"}),l.jsx("button",{onClick:te,style:{...Qe,borderColor:"#ef4444",color:"#b91c1c"},title:"Reset (clear all nodes and edges)",children:"Reset"})]}),l.jsx("style",{children:".react-flow__edge.edge-active path { stroke: #0ea5e9 !important; stroke-width: 2.5px; }"}),(()=>{const F=new Map(t.map(W=>{var V;return[W.id,!!((V=W.data)!=null&&V._active)]})),K=i.map(W=>F.get(W.source)&&F.get(W.target)?{...W,className:"edge-active"}:W);return l.jsxs(Zd,{nodes:t,edges:K,onNodesChange:oe,onEdgesChange:Z,onConnect:we,nodeTypes:KC,fitView:!0,children:[l.jsx(cv,{}),l.jsx(sv,{pannable:!0,zoomable:!0}),l.jsx(lv,{showInteractive:!1})]})})(),x?l.jsx("div",{style:{position:"absolute",left:12,right:12,bottom:12,display:"flex",justifyContent:"center",pointerEvents:"none"},children:l.jsxs("div",{style:{pointerEvents:"auto",maxWidth:640,width:"100%",background:"white",border:"1px solid #e2e8f0",borderRadius:12,boxShadow:"0 6px 20px rgba(0,0,0,0.08)",padding:12,display:"grid",gap:8},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l.jsx("div",{style:{fontWeight:600},children:"No branch matches the current Builder"}),l.jsx("button",{onClick:I,style:{...Qe,padding:"4px 8px"},title:"Dismiss",children:""})]}),l.jsx("div",{style:{fontSize:13,color:"#475569"},children:"You can reseed the planner from the Character Builder to create a matching branch."}),l.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[l.jsx("button",{onClick:I,style:Qe,children:"Not now"}),l.jsx("button",{onClick:()=>{var W;const F=z(e.character,e.derived);if(!F)return;D(),n(F.nodes.map(V=>{const ie={...V.data,onChange:re=>ke(V.id,re),onDelete:re=>$(re)};return V.type==="root"&&(ie.onClone=()=>je(V.id),ie.onApply=()=>{const re=ii(F.nodes,F.edges,V.id);re&&e.onApplyPlan&&e.onApplyPlan(re)}),V.type==="progressStep"&&(ie.onApply=()=>{const re=hl(F.nodes,F.edges,V.id);re&&e.onApplyPlan&&e.onApplyPlan(re)}),ie.onAddChild=re=>ce(V.id,re),{...V,data:ie}})),s(F.edges);const K=(W=F.nodes.find(V=>V.type==="root"))==null?void 0:W.id;K&&(c(K),localStorage.setItem(M,K),v(K)),setTimeout(()=>{try{fe()}catch{}},0),I()},style:{...Qe,background:"#0ea5e9",borderColor:"#0284c7",color:"white"},children:"Reseed from Builder"})]})]})}):null]}),l.jsxs("div",{style:{display:"grid",gap:12,overflowY:"auto",overflowX:"hidden",paddingRight:12,minWidth:0},children:[l.jsxs("section",{style:Cc,children:[l.jsx("div",{style:{padding:12,borderBottom:"1px solid #e2e8f0",fontWeight:600},children:"Branch Actions"}),l.jsx(JC,{nodes:t,edges:i,onClone:je,onApplyPlan:e.onApplyPlan,onCreateRoot:()=>{Ee("root"),setTimeout(()=>{try{fe()}catch{}},0)}}),l.jsxs("div",{style:{padding:12,display:"grid",gap:8},children:[l.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"#475569"},children:[l.jsx("span",{children:"Active Branch"}),l.jsxs("select",{value:a||"",onChange:F=>{const K=F.target.value||void 0;c(K),K&&localStorage.setItem(M,K),v(K)},style:Lt,children:[l.jsx("option",{value:"",children:"(none)"}),t.filter(F=>F.type==="root").map(F=>{var K,W;return l.jsxs("option",{value:F.id,children:[((K=F.data)==null?void 0:K.race)||"Race","  ",((W=F.data)==null?void 0:W.background)||"Background"," (",F.id.slice(0,6),")"]},F.id)})]})]}),l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"The active branch is highlighted and drives the Apply to Builder."})]})]}),l.jsxs("section",{style:Cc,children:[l.jsx("div",{style:{padding:12,borderBottom:"1px solid #e2e8f0",fontWeight:600},children:"Add Nodes"}),l.jsxs("div",{style:{padding:12,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsx("button",{onClick:()=>{Ee("root"),setTimeout(()=>{try{fe()}catch{}},0)},style:Qe,children:"+ Root"}),l.jsx("button",{onClick:()=>Ee("progressStep"),style:Qe,children:"+ Step"})]}),l.jsx("div",{style:{padding:"0 12px 12px",fontSize:12,color:"#64748b"},children:"Use Root to set Race and Background, then connect Steps to build branches. Clone a Root to fork a new branch with the same history."})]}),l.jsxs("section",{style:Cc,children:[l.jsxs("div",{style:{padding:12,borderBottom:"1px solid #e2e8f0",fontWeight:600,display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[l.jsx("span",{children:"Quick Plan Builder"}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.jsx("button",{onClick:_e,style:Qe,title:"Create a new branch from the blocks below",children:"Create Branch"}),l.jsx("button",{onClick:()=>Y([]),style:Qe,title:"Clear all blocks",children:"Clear"})]})]}),l.jsxs("div",{style:{padding:12,display:"grid",gap:12},children:[l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[l.jsx("button",{onClick:()=>C("class"),style:Qe,children:"+ Class"}),l.jsx("button",{onClick:()=>C("feat"),style:Qe,children:"+ Feat"}),l.jsx("button",{onClick:()=>C("asi"),style:Qe,children:"+ ASI"}),l.jsx("button",{onClick:()=>C("note"),style:Qe,children:"+ Note"}),l.jsx("span",{style:{fontSize:12,color:"#64748b"},children:"or drag chips:"}),l.jsx(pl,{label:"Class",color:Vs.class,draggableData:{kind:"class"}}),l.jsx(pl,{label:"Feat",color:Vs.feat,draggableData:{kind:"feat"}}),l.jsx(pl,{label:"ASI",color:Vs.asi,draggableData:{kind:"asi"}}),l.jsx(pl,{label:"Note",color:Vs.note,draggableData:{kind:"note"}})]}),l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[l.jsx("input",{value:O,onChange:F=>y(F.target.value),placeholder:"Filter tokens (e.g., fighter, str, elf)",style:{...Lt,maxWidth:320}}),O?l.jsx("button",{style:{...Qe,padding:"6px 10px"},onClick:()=>y(""),children:"Clear"}):null]}),(()=>{const F=O.trim().toLowerCase(),K=ge=>F?ge.toLowerCase().includes(F):!0,W=Qn.filter(ge=>K(ge)),V=Ao.filter(ge=>K(ge)),ie=Lu.filter(ge=>K(ge)),re=Ou.filter(ge=>K(ge)),le=["Variant Rule","Alignment","Deity"].filter(ge=>K(ge)),ne=F==="";return l.jsxs("div",{style:{display:"grid",gap:10},children:[ne||W.length?l.jsxs("details",{open:!0,children:[l.jsx("summary",{style:{...Gn,cursor:"pointer"},children:"Classes"}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",paddingTop:6},children:[W.map(ge=>l.jsx(Ts,{label:ge,type:"class",value:ge},ge)),W.length?null:l.jsx("span",{style:Gn,children:"No matches"})]})]}):null,ne||V.length?l.jsxs("details",{open:!0,children:[l.jsx("summary",{style:{...Gn,cursor:"pointer"},children:"Abilities"}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",paddingTop:6},children:[V.map(ge=>l.jsx(Ts,{label:ge,type:"ability",value:ge},ge)),V.length?null:l.jsx("span",{style:Gn,children:"No matches"})]})]}):null,ne||ie.length?l.jsxs("details",{open:!0,children:[l.jsx("summary",{style:{...Gn,cursor:"pointer"},children:"Races"}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",paddingTop:6},children:[ie.map(ge=>l.jsx(Ts,{label:ge,type:"race",value:ge},ge)),ie.length?null:l.jsx("span",{style:Gn,children:"No matches"})]})]}):null,ne||re.length?l.jsxs("details",{open:!0,children:[l.jsx("summary",{style:{...Gn,cursor:"pointer"},children:"Backgrounds"}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",paddingTop:6},children:[re.map(ge=>l.jsx(Ts,{label:ge,type:"background",value:ge},ge)),re.length?null:l.jsx("span",{style:Gn,children:"No matches"})]})]}):null,ne||le.length?l.jsxs("details",{children:[l.jsx("summary",{style:{...Gn,cursor:"pointer"},children:"Other"}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",paddingTop:6},children:[le.map(ge=>l.jsx(Ts,{label:ge,type:"text",value:ge},ge)),le.length?null:l.jsx("span",{style:Gn,children:"No matches"})]})]}):null]})})()]}),l.jsx("div",{onDragOver:F=>F.preventDefault(),onDrop:F=>{const K=F.dataTransfer.getData(fv);if(K)try{const W=JSON.parse(K);W!=null&&W.kind&&C(W.kind)}catch{}},style:{padding:12,borderTop:"1px dashed #e2e8f0",display:"grid",gap:10},children:L.length===0?l.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Drag blocks here or use the buttons above to build a plan. You can drop tokens (classes, abilities) into matching holes on blocks."}):L.map(F=>l.jsx(YC,{blk:F,onChange:K=>_(F.id,K),onRemove:()=>B(F.id),onMoveUp:()=>A(F.id,-1),onMoveDown:()=>A(F.id,1)},F.id))}),l.jsx("div",{style:{padding:"0 12px 12px",display:"flex",gap:8,alignItems:"center"},children:L.length?l.jsxs("span",{style:{fontSize:12,color:"#64748b"},children:[L.length," block(s)"]}):l.jsx("span",{style:{fontSize:12,color:"#64748b"},children:"No blocks yet"})})]})]})]})}function ZC(){return Math.random().toString(36).slice(2,9)}function qC(){var w;const[e,t]=b.useState([]),[n,r]=b.useState(1),[i,s]=b.useState(0),[o,a]=b.useState(""),[c,u]=b.useState(""),[d,f]=b.useState(""),p=b.useMemo(()=>[...e].sort((v,z)=>z.initiative-v.initiative),[e]),h=(w=p[i])==null?void 0:w.id,k=()=>{if(!o||c===""||d==="")return;const v={id:ZC(),name:o.trim(),maxHp:Number(c),hp:Number(c),initiative:Number(d)},z=[...e,v];t(z);const T=[...z].sort((x,E)=>E.initiative-x.initiative),P=Math.max(0,T.findIndex(x=>x.id===h));s(P===-1?0:P),a(""),u(""),f("")},S=v=>{const z=p.findIndex(P=>P.id===v),T=e.filter(P=>P.id!==v);if(t(T),T.length===0)s(0),r(1);else if(z!==-1){const P=[...T].sort((E,I)=>I.initiative-E.initiative),x=Math.min(Math.max(0,i-(z<=i?1:0)),P.length-1);s(x)}},M=()=>{if(p.length===0)return;const v=(i+1)%p.length;s(v),v===0&&r(z=>z+1)},g=(v,z)=>{t(T=>T.map(P=>P.id===v?{...P,hp:Math.max(0,Math.min(P.maxHp,P.hp+z))}:P))},m=()=>{r(1),s(0),t(v=>v.map(z=>({...z,hp:z.maxHp})))};return l.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[l.jsx("h2",{style:{marginTop:0},children:"Combat Tracker"}),l.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-end",flexWrap:"wrap",marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("label",{style:Nc,children:"Name"}),l.jsx("input",{value:o,onChange:v=>a(v.target.value),placeholder:"Goblin A / Cleric",style:Ac})]}),l.jsxs("div",{children:[l.jsx("label",{style:Nc,children:"Max HP"}),l.jsx("input",{value:c,onChange:v=>u(v.target.value===""?"":Number(v.target.value)),type:"number",min:0,style:Ac})]}),l.jsxs("div",{children:[l.jsx("label",{style:Nc,children:"Initiative"}),l.jsx("input",{value:d,onChange:v=>f(v.target.value===""?"":Number(v.target.value)),type:"number",style:Ac})]}),l.jsx("button",{onClick:k,style:tj,children:"Add"}),l.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[l.jsxs("div",{style:{padding:"6px 10px",border:"1px solid #cbd5e1",borderRadius:8,background:"white"},children:["Round: ",l.jsx("b",{children:n})]}),l.jsx("button",{onClick:M,style:pa,children:"Next Turn "}),l.jsx("button",{onClick:m,style:pa,children:"Reset"})]})]}),p.length===0?l.jsx("div",{style:{padding:16,border:"1px dashed #cbd5e1",borderRadius:8,color:"#475569"},children:"Add combatants with their max HP and initiative. Use Next Turn to advance the round."}):l.jsx("div",{style:{display:"grid",gap:8},children:p.map((v,z)=>{const T=z===i,P=v.hp<=0;return l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr repeat(4, auto)",alignItems:"center",gap:8,padding:10,border:"1px solid #e2e8f0",borderRadius:8,background:T?"#ecfeff":"white",opacity:P?.7:1},children:[l.jsx("div",{title:"Initiative",style:{width:40,textAlign:"center",fontWeight:700},children:v.initiative}),l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600},children:v.name}),l.jsx(ej,{hp:v.hp,maxHp:v.maxHp})]}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("button",{onClick:()=>g(v.id,-1),style:ei,children:"-1"}),l.jsx("button",{onClick:()=>g(v.id,-5),style:ei,children:"-5"}),l.jsx("button",{onClick:()=>g(v.id,-10),style:ei,children:"-10"})]}),l.jsxs("div",{style:{display:"flex",gap:6},children:[l.jsx("button",{onClick:()=>g(v.id,1),style:ei,children:"+1"}),l.jsx("button",{onClick:()=>g(v.id,5),style:ei,children:"+5"}),l.jsx("button",{onClick:()=>g(v.id,10),style:ei,children:"+10"})]}),l.jsxs("div",{style:{color:"#0f172a",minWidth:80,textAlign:"right"},children:[v.hp," / ",v.maxHp]}),l.jsx("button",{onClick:()=>S(v.id),style:{...ei,color:"#ef4444",borderColor:"#fecaca"},children:"Remove"})]},v.id)})})]})}function ej({hp:e,maxHp:t}){const n=Math.max(0,Math.min(100,e/Math.max(1,t)*100)),r=e<=0?"#64748b":n<25?"#ef4444":n<60?"#f59e0b":"#22c55e";return l.jsx("div",{style:{height:10,background:"#f1f5f9",borderRadius:999,overflow:"hidden",border:"1px solid #e2e8f0",marginTop:6},children:l.jsx("div",{style:{width:n+"%",height:"100%",background:r}})})}const Nc={display:"block",fontSize:12,color:"#334155",marginBottom:4},Ac={padding:"8px 10px",border:"1px solid #cbd5e1",borderRadius:8,minWidth:160},pa={padding:"8px 12px",borderRadius:8,border:"1px solid #cbd5e1",background:"white",cursor:"pointer"},tj={...pa,background:"#0ea5e9",color:"white",borderColor:"#38bdf8"},ei={...pa,padding:"6px 10px"};function nj(){return Math.floor(Math.random()*20)+1}function rj(e,t,n){const r=Array(e.count).fill(e.hp),i=Array(t.count).fill(t.hp),s=(c,u)=>{let d=0;for(let f=0;f<1;f++){const p=nj();(p===20||p!==1&&p+c>=u)&&d++}return d};for(let c=1;c<=n;c++){for(let f=0;f<r.length;f++){if(r[f]<=0)continue;let h=s(e.attackBonus,t.ac)*e.damageAvg;for(let k=0;k<i.length&&h>0;k++){if(i[k]<=0)continue;const S=i[k];i[k]=Math.max(0,i[k]-h),h=Math.max(0,h-S)}}for(let f=0;f<i.length;f++){if(i[f]<=0)continue;let h=s(t.attackBonus,e.ac)*t.damageAvg;for(let k=0;k<r.length&&h>0;k++){if(r[k]<=0)continue;const S=r[k];r[k]=Math.max(0,r[k]-h),h=Math.max(0,h-S)}}const u=r.some(f=>f>0),d=i.some(f=>f>0);if(!u||!d)break}const o=r.filter(c=>c>0).length,a=i.filter(c=>c>0).length;return{aliveA:o,aliveB:a}}function ij(){const[e,t]=b.useState({name:"Party",count:4,attackBonus:6,damageAvg:8,ac:16,hp:24}),[n,r]=b.useState({name:"Enemies",count:4,attackBonus:4,damageAvg:6,ac:14,hp:18}),[i,s]=b.useState(5),[o,a]=b.useState(2e3),c=b.useMemo(()=>()=>{let d=0,f=0,p=0,h=0;for(let S=0;S<o;S++){const M=rj(e,n,i);p+=M.aliveA,h+=M.aliveB,M.aliveA>0&&M.aliveB===0?d++:M.aliveB>0&&M.aliveA===0?f++:M.aliveA>M.aliveB?d++:M.aliveB>M.aliveA&&f++}return{trials:o,rounds:i,winRateA:d/o,winRateB:f/o,avgUnitsAliveA:p/o,avgUnitsAliveB:h/o}},[e,n,i,o]),u=b.useMemo(()=>c(),[c]);return l.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[l.jsx("h2",{style:{marginTop:0},children:"Encounter Simulator"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[l.jsx(dh,{title:"Side A",side:e,onChange:t}),l.jsx(dh,{title:"Side B",side:n,onChange:r})]}),l.jsxs("div",{style:{display:"flex",gap:12,alignItems:"flex-end",marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("label",{style:fh,children:"Rounds"}),l.jsx("input",{type:"number",min:1,value:i,onChange:d=>s(Number(d.target.value)),style:zr})]}),l.jsxs("div",{children:[l.jsx("label",{style:fh,children:"Trials"}),l.jsx("input",{type:"number",min:100,step:100,value:o,onChange:d=>a(Number(d.target.value)),style:zr})]}),l.jsxs("div",{style:{marginLeft:"auto",padding:"8px 12px",border:"1px solid #cbd5e1",borderRadius:8,background:"white"},children:["Computed across ",u.trials.toLocaleString()," trials / ",u.rounds," rounds"]})]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:[l.jsx(gl,{title:`${e.name} Win Rate`,value:(u.winRateA*100).toFixed(1)+"%",accent:"#22c55e"}),l.jsx(gl,{title:`${n.name} Win Rate`,value:(u.winRateB*100).toFixed(1)+"%",accent:"#ef4444"}),l.jsx(gl,{title:`${e.name} Avg Units Alive`,value:u.avgUnitsAliveA.toFixed(2)}),l.jsx(gl,{title:`${n.name} Avg Units Alive`,value:u.avgUnitsAliveB.toFixed(2)})]})]})}function dh({title:e,side:t,onChange:n}){return l.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:12},children:[l.jsx("div",{style:{fontWeight:700,marginBottom:8},children:e}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8},children:[l.jsx(zi,{label:"Name",children:l.jsx("input",{value:t.name,onChange:r=>n({...t,name:r.target.value}),style:zr})}),l.jsx(zi,{label:"Count",children:l.jsx("input",{type:"number",min:1,value:t.count,onChange:r=>n({...t,count:Number(r.target.value)}),style:zr})}),l.jsx(zi,{label:"Attack Bonus",children:l.jsx("input",{type:"number",value:t.attackBonus,onChange:r=>n({...t,attackBonus:Number(r.target.value)}),style:zr})}),l.jsx(zi,{label:"Avg Damage on Hit",children:l.jsx("input",{type:"number",min:0,value:t.damageAvg,onChange:r=>n({...t,damageAvg:Number(r.target.value)}),style:zr})}),l.jsx(zi,{label:"AC",children:l.jsx("input",{type:"number",min:0,value:t.ac,onChange:r=>n({...t,ac:Number(r.target.value)}),style:zr})}),l.jsx(zi,{label:"HP per Unit",children:l.jsx("input",{type:"number",min:1,value:t.hp,onChange:r=>n({...t,hp:Number(r.target.value)}),style:zr})})]})]})}function zi({label:e,children:t}){return l.jsxs("label",{children:[l.jsx("div",{style:pv,children:e}),t]})}function gl({title:e,value:t,accent:n}){return l.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:12,padding:12},children:[l.jsx("div",{style:{fontSize:12,color:"#334155"},children:e}),l.jsx("div",{style:{fontSize:22,fontWeight:800,color:n??"#0f172a"},children:t})]})}const pv={display:"block",fontSize:12,color:"#334155",marginBottom:4},fh=pv,zr={padding:"8px 10px",border:"1px solid #cbd5e1",borderRadius:8,width:"100%"};function sj(){const[e,t]=b.useState("builder"),[n,r]=b.useState(void 0),[i,s]=b.useState(void 0),[o,a]=b.useState(()=>{try{const p=localStorage.getItem("theme.v1");return p==="light"||p==="dark"?p:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}});b.useEffect(()=>{try{localStorage.setItem("theme.v1",o)}catch{}const p=document.documentElement;o==="dark"?p.setAttribute("data-theme","dark"):p.removeAttribute("data-theme")},[o]);const[c,u]=b.useState(void 0),d=p=>{u({...p,_ts:Date.now()}),t("builder")},f=b.useMemo(()=>`progressionPlanner.activePlan.v1:${(n==null?void 0:n.name)||"default"}`,[n==null?void 0:n.name]);return b.useEffect(()=>{if(e==="builder")try{const p=localStorage.getItem(f);if(!p)return;const h=JSON.parse(p);h&&h.plan&&u({...h.plan||{},_ts:Date.now(),_origin:"planner-passive"})}catch{}},[e,f]),l.jsxs("div",{children:[l.jsx("header",{style:{position:"sticky",top:0,zIndex:30,backdropFilter:"saturate(1.2) blur(6px)",background:"var(--header-bg)",borderBottom:"1px solid var(--header-border)"},children:l.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[l.jsx("h1",{style:{margin:0,fontSize:20,letterSpacing:.2,fontWeight:700},children:"TTRPG Character Creator (5e)"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsxs("nav",{style:{display:"flex",gap:8},children:[l.jsx("button",{onClick:()=>t("builder"),style:Ps(e==="builder"),children:"Character Builder"}),l.jsx("button",{onClick:()=>t("planner"),style:Ps(e==="planner"),children:"Progression Planner"}),l.jsx("button",{onClick:()=>t("optimizer"),style:Ps(e==="optimizer"),children:"DPR Graph Optimizer"}),l.jsx("button",{onClick:()=>t("combat"),style:Ps(e==="combat"),children:"Combat Tracker"}),l.jsx("button",{onClick:()=>t("sim"),style:Ps(e==="sim"),children:"Encounter Simulator"})]}),l.jsx("button",{"aria-label":"Toggle theme",onClick:()=>a(o==="dark"?"light":"dark"),style:oj(),children:o==="dark"?" Dark":" Light"})]})]})}),l.jsx("main",{style:{padding:"16px 20px"},children:e==="builder"?l.jsx("div",{style:{maxWidth:1200,margin:"0 auto"},children:l.jsx(y1,{importPlan:c,onCharacterChange:(p,h)=>{r(p),s(h)}})}):e==="planner"?l.jsx(QC,{character:n,derived:i,onApplyPlan:d}):e==="optimizer"?l.jsx(WC,{character:n,derived:i}):e==="combat"?l.jsx(qC,{}):l.jsx(ij,{})})]})}function Ps(e){return{padding:"10px 14px",borderRadius:8,border:"1px solid var(--button-border)",background:e?"var(--button-active-bg)":"var(--button-bg)",color:e?"var(--button-active-fg)":"var(--button-fg)",cursor:"pointer"}}function oj(){return{padding:"10px 12px",borderRadius:8,border:"1px solid var(--button-border)",background:"var(--button-bg)",color:"var(--button-fg)",cursor:"pointer"}}const lj=Em(document.getElementById("root"));lj.render(l.jsx(U.StrictMode,{children:l.jsx(sj,{})}));
